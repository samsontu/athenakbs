; Mon Apr 09 13:58:43 PDT 2018
; 
;+ (version "3.5")
;+ (build "Build 663")

([30%3C%3DeGFR%3C45] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1080203])
	(label "30<=eGFR<45 past month"))

([30%3C%3DeGFR%3C45+past+30+days] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1320004])
	(label "30<=eGFR<45 past 30 days")
	(PrettyName "30<=eGFR<45 past 30 days"))

([30%3C%3DeGFR%3C45+past+year] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1120002])
	(label "30<=eGFR<45 past year"))

([30%3C%3DeGFR%3C60+past+year] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1130008])
	(label "30<=eGFR<60 past year"))

([Abs+Biguanide+and+30%3C%3DeGFR%3C45+in+past+month] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1220000])
	(PrettyName "Abs Biguanide and 30<=eGFR<45 in past month"))

([Abs+Biguanide+and+45%3C%3DeGFR%3C60+past+month] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1240004])
	(PrettyName "Abs Biguanide and 45<=eGFR<60 past month"))

([Abs+Empa+and+eGFR%3C45+past+30+days] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1320007])
	(PrettyName "Abs Empa and eGFR<45 past 30 days"))

([Abs+Empa+and+eGFR%3C45+past+month] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1160000])
	(label "Abs Empa and eGFR<45 past month")
	(PrettyName "Abs Empa and eGFR<45 past month"))

([Abs+glyb+and+eGFR%3C30] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1150005])
	(label "Abs glyb and eGFR<30 past month")
	(PrettyName "Abs glyb and eGFR<30 past month"))

([Absence+all+bicarb+labs+past+year] of  Diagnostic_Term_Metaclass

	(controllable TRUE)
	(DiagnosticCriteria [ATHENA_DM_GlycemicControl_Dashboard_Class160002]))

([Absence+of+AST+and+ALT+in+past+year] of  Diagnostic_Term_Metaclass

	(controllable TRUE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class520006])
	(PrettyName "Absence of AST and ALT in past year"))

([Absence+of+AST+and+ALT+or+Absnece+of+AST+and+ALT+in+past+yr] of  Diagnostic_Term_Metaclass

	(controllable TRUE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class530006])
	(PrettyName "Absence of AST and ALT  or Absnece of AST and ALT in past yr"))

([Absence+of+AST+or+ALT+in+past+year] of  Diagnostic_Term_Metaclass

	(controllable TRUE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1320000])
	(PrettyName "Absence of AST or ALT in past year"))

([Absence+of+bicar+or+Absence+of+bicarb+in+past+yr] of  Diagnostic_Term_Metaclass

	(controllable TRUE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class520005]))

([Absence+of+bicarb+in+past+year] of  Diagnostic_Term_Metaclass

	(controllable TRUE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class520001])
	(PrettyName "Absence of bicarb in past year"))

([Absence+of+eGFR+in+past+month] of  Diagnostic_Term_Metaclass

	(controllable TRUE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class400001])
	(PrettyName "Absence of eGFR in past 30 days"))

([Absence+of+eGFR+in+past+year] of  Diagnostic_Term_Metaclass

	(controllable TRUE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class530008])
	(PrettyName "Absence of eGFR in past year"))

([Absence+of+eGFR+or+Absence+of+eGFR+in+past+yr] of  Diagnostic_Term_Metaclass

	(controllable TRUE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class530009]))

([Absence+of+eGFR+or+Absnece+of+eGFR+in+past+mo] of  Diagnostic_Term_Metaclass

	(controllable TRUE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class520004]))

([Absence+of+K+in+past+mo] of  Diagnostic_Term_Metaclass

	(controllable TRUE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class400000]))

([Absence+of+SBP+in+past+mo] of  Diagnostic_Term_Metaclass

	(controllable TRUE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class410002]))

([Absence_of_insulin_defined_concept] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_DM_Eye_Instance_80028]))

([ADR+acidosis+to+MF+or+MF_ER] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1350011]))

([ADR+anaphylaxis+to+DPP4+inhibitor] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1090639]))

([ADR+anaphylaxis+to+glipizide] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class700007]))

([ADR+anaphylaxis+to+glyburide] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class710002]))

([ADR+anaphylaxis+to+MF+or+MF_ER] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_DM_GlycemicControl_Dashboard_Class30004])
	(PrettyName "ADR anaphylaxis to MF or MF_ER"))

([ADR+anaphylaxis+to+SGLT2+inhibitor] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_DM_GlycemicControl_Dashboard_Class30006])
	(PrettyName "ADR anaphylaxis to SGLT2 inhibitor"))

([ADR+anaphylaxis+to+SU+1st+gen] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class740003]))

([ADR+anaphylaxis+to+sulfa+drugs] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1310004]))

([ADR+anaphylaxis+to+TZD] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_DM_GlycemicControl_Dashboard_Class30005])
	(PrettyName "ADR anaphylaxis to TZD"))

([ADR+anapylaxis+to+glimepiride] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1020221])
	(PrettyName "ADR anapylaxis to glimepiride"))

([ADR+anggioedema+or+anaphylaxis+or+stevens+johns+to+glimepiride] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class700001]))

([ADR+angioedema+to+DPP4+inhibitor] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1090001])
	(PrettyName "ADR angioedema to DPP4 inhibitor"))

([ADR+angioedema+to+sulfa+drugs+or+SU] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1320494]))

([ADR+cardiac+arrest+or+coma+or+thrombocytopenia+or+renal+failure+or+renal+impairment+to+glip%2C+glyb%2C+glim%2C+first+gen+SU%2C+sulfa] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1350026]))

([ADR+of+thrombocytopenia+to+pio+or+rosi] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1350018]))

([ADR+renal+failure+or+impairment+to+MF+or+MF_ER] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1350008]))

([ADR+SJS+to+glip+glyb+glim+SU+sulfa] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1350030]))

([Age+%3E%3D65+and+absence+of+creatinine+in+past+month] of  Diagnostic_Term_Metaclass

	(controllable TRUE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class600000])
	(PrettyName "Age >=65 and absence of creatinine in past 30 days"))

([Age+%3E%3D65+and+absence+of+creatinine+in+past+year] of  Diagnostic_Term_Metaclass

	(controllable TRUE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class610002])
	(label "Age >=65 and absence of creatinine in past year"))

([Age%3E80+yrs] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class30001])
	(PrettyName "Age>80yrs"))

([Age%3E%3D65+and+creatinine%3E%3D2] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class90032])
	(PrettyName "Age>=65 and creatinine>=2"))

([Allergy+to+aspirin] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class570005]))

([Allergy+to+Sulfonylureas] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Instance_50007]))

([Allergy_ADR_to_sulfa_drugs] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class340001])
	(PrettyName "Allergy/ADR to sulfa drugs"))

([ALT%3E3*UpperLimitOfNormal] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class330015])
	(PrettyName "ALT>3*UpperLimitOfNormal"))

([AST%3E3*UpperLimitOfNormal] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class330014])
	(PrettyName "AST >3*UpperLimitOfNormal"))

([ATHENA_DM_GlycemicControl_Dashboard_Class0] of  Structured_Query

	(label "missing MF labs"))

([ATHENA_DM_GlycemicControl_Dashboard_Class1] of  Variable

	(derivation_expression [ATHENA_DM_GlycemicControl_Dashboard_Class2])
	(label "PatientChar missing MF labs 1 year variable")
	(string_name "missing MF labs variable"))

([ATHENA_DM_GlycemicControl_Dashboard_Class10000] of  Collateral_Action

	(actions [ATHENA_DM_GlycemicControl_Dashboard_Class10001])
	(mood Recommend_Add))

([ATHENA_DM_GlycemicControl_Dashboard_Class100000] of  Parameterized_Message

	(label "Param msg for 3 encoded Meds max dose")
	(message_type Primary_Recommendation)
	(parameterized_message [ATHENA_DM_GlycemicControl_Dashboard_Class100001]))

([ATHENA_DM_GlycemicControl_Dashboard_Class100001] of  Parameterized_String

	(label "Param string for 3 meds max dose")
	(value "Patient has active prescriptions for 3 DM drugs: ?Encoded_DM_drug at their maximum dose indicating that he/she is a complicated patient.  Please discuss with endocrinologist or specialized DM care team.")
	(variables [ATHENA_GlycemicControl_Class1110008]))

([ATHENA_DM_GlycemicControl_Dashboard_Class10001] of  On_Screen_Message

	(label "45<=eGFR<60 MF message")
	(message "Patient has an 45 &le eGFR &lt 60.  We recommend monitoring their eGFR every 3-4 months.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class1240002]))

([ATHENA_DM_GlycemicControl_Dashboard_Class10002] of  Collateral_Action

	(actions [ATHENA_DM_GlycemicControl_Dashboard_Class10003])
	(mood Recommend_Increase))

([ATHENA_DM_GlycemicControl_Dashboard_Class10003] of  On_Screen_Message

	(label "45<=eGFR<60 MF message rec incr")
	(message "Patient has an 45 &le eGFR &lt 60.  We recommend monitoring their eGFR every 3-4 months.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class1240000]))

([ATHENA_DM_GlycemicControl_Dashboard_Class10316] of  Variable

	(derivation_expression [ATHENA_DM_GlycemicControl_Dashboard_Class1130])
	(label "PatientChar present MF bicarb AST ALT StrucQuery")
	(string_name "PatientChar missing MF bicarb AST ALT StrucQuery"))

([ATHENA_DM_GlycemicControl_Dashboard_Class110000] of  Structured_Query

	(label "query for metformin er daily dose >= 1999.8")
	(type Medication)
	(where_restriction
		[ATHENA_DM_GlycemicControl_Dashboard_Class110001]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110002]))

([ATHENA_DM_GlycemicControl_Dashboard_Class110001] of  Comparison_Filter

	(attribute [drug_name])
	(label "drug eq metformin er")
	(operator eq)
	(value_expression [METFORMIN_ER]))

([ATHENA_DM_GlycemicControl_Dashboard_Class110002] of  Comparison_Filter

	(attribute [daily_dose])
	(label "daily dose >= 1999.8")
	(operator %3E%3D)
	(value_expression [ATHENA_DM_GlycemicControl_Dashboard_Class110003]))

([ATHENA_DM_GlycemicControl_Dashboard_Class110003] of  Numeric_Constant

	(label "1999.8")
	(value 1999.8))

([ATHENA_DM_GlycemicControl_Dashboard_Class110004] of  Structured_Query

	(label "query for sax daily dose >= 4.9")
	(type Medication)
	(where_restriction
		[ATHENA_DM_GlycemicControl_Dashboard_Class110005]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110006]))

([ATHENA_DM_GlycemicControl_Dashboard_Class110005] of  Comparison_Filter

	(attribute [drug_name])
	(label "drug eq sax")
	(operator eq)
	(value_expression [Saxagliptin]))

([ATHENA_DM_GlycemicControl_Dashboard_Class110006] of  Comparison_Filter

	(attribute [daily_dose])
	(label "daily dose > 4.9")
	(operator %3E%3D)
	(value_expression [ATHENA_DM_GlycemicControl_Dashboard_Class110007]))

([ATHENA_DM_GlycemicControl_Dashboard_Class110007] of  Numeric_Constant

	(label "4.9")
	(value 4.9))

([ATHENA_DM_GlycemicControl_Dashboard_Class110008] of  Structured_Query

	(label "query for empa daily dose >= 24.9")
	(type Medication)
	(where_restriction
		[ATHENA_DM_GlycemicControl_Dashboard_Class110009]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110010]))

([ATHENA_DM_GlycemicControl_Dashboard_Class110009] of  Comparison_Filter

	(attribute [drug_name])
	(label "drug eq empa")
	(operator eq)
	(value_expression [Empagliflozin]))

([ATHENA_DM_GlycemicControl_Dashboard_Class110010] of  Comparison_Filter

	(attribute [daily_dose])
	(label "daily dose >= 24.9")
	(operator %3E%3D)
	(value_expression [ATHENA_DM_GlycemicControl_Dashboard_Class110011]))

([ATHENA_DM_GlycemicControl_Dashboard_Class110011] of  Numeric_Constant

	(label "24.9")
	(value 24.9))

([ATHENA_DM_GlycemicControl_Dashboard_Class110012] of  Query_Result_Criterion

	(label "query for metformin dialy dose >= 2499.8")
	(presence TRUE)
	(query [ATHENA_DM_GlycemicControl_Dashboard_Class120885]))

([ATHENA_DM_GlycemicControl_Dashboard_Class110013] of  Query_Result_Criterion

	(label "query for metformin er daily dose >= 1999.8")
	(presence TRUE)
	(query [ATHENA_DM_GlycemicControl_Dashboard_Class110000]))

([ATHENA_DM_GlycemicControl_Dashboard_Class110014] of  Query_Result_Criterion

	(label "query for sax daily dose >= 4.9")
	(presence TRUE)
	(query [ATHENA_DM_GlycemicControl_Dashboard_Class110004]))

([ATHENA_DM_GlycemicControl_Dashboard_Class110015] of  Query_Result_Criterion

	(label "query for empa daily dose >= 24.9")
	(presence TRUE)
	(query [ATHENA_DM_GlycemicControl_Dashboard_Class110008]))

([ATHENA_DM_GlycemicControl_Dashboard_Class110016] of  Conditional_On_Screen_Message

	(label "Check eGFR; Absence of eGFR past year and MF at max dose")
	(message "Metformin is at max dose and eGFR has not been measured in the past year.  Please check eGFR.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class110017]))

([ATHENA_DM_GlycemicControl_Dashboard_Class110017] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class530008]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110021])
	(label "Abs eGFR past year and MF or MF er at max dose")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class110018] of  N_ary_Criterion

	(criteria
		[ATHENA_DM_GlycemicControl_Dashboard_Class110019]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110020])
	(label "Pres of MF or MF ER")
	(operator OR))

([ATHENA_DM_GlycemicControl_Dashboard_Class110019] of  Presence_Criterion

	(domain_term METFORMIN)
	(entry_type Medication)
	(label "Pres of MF")
	(mood Authorized)
	(presence TRUE))

([ATHENA_DM_GlycemicControl_Dashboard_Class110020] of  Presence_Criterion

	(domain_term METFORMIN_ER)
	(entry_type Medication)
	(label "Pres of MF ER")
	(mood Authorized)
	(presence TRUE))

([ATHENA_DM_GlycemicControl_Dashboard_Class110021] of  N_ary_Criterion

	(criteria
		[ATHENA_DM_GlycemicControl_Dashboard_Class110012]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110013])
	(label "MF or MF er at max dose")
	(operator OR))

([ATHENA_DM_GlycemicControl_Dashboard_Class110022] of  Conditional_On_Screen_Message

	(label "Check eGFR; Absence of eGFR past year and sax at max dose")
	(message "Saxagliptin is at max dose and eGFR has not been measured in the past year.  Please check eGFR.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class110023]))

([ATHENA_DM_GlycemicControl_Dashboard_Class110023] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class530008]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110014])
	(label "Abs eGFR past year and sax at max dose")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class110024] of  Conditional_On_Screen_Message

	(label "check eGFR, Abs eGFR past year and empa at max dose")
	(message "Empagliflozin is at max dose and eGFR has not been measured in the past year.  Please check eGFR.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class110025]))

([ATHENA_DM_GlycemicControl_Dashboard_Class110025] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class530008]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110015])
	(label "Abs eGFR past year and empa at max dose")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class110108] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1220007]
		[ATHENA_GlycemicControl_Class120004])
	(label "glipizide not contra and Pres glip and glip XL")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class110109] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1220005]
		[ATHENA_GlycemicControl_Class120001])
	(label "count Biguanide gt 1 and MF not contraindicated")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class110110] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class120005])
	(label "not TZD contraindicated")
	(operator NOT))

([ATHENA_DM_GlycemicControl_Dashboard_Class110111] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1220010]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110110])
	(label "count TZD gt 1 and not TZD contra")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class110112] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class850001]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110110])
	(label "Pres gemfibrozil and TZD and not TZD contra")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class110113] of  N_ary_Criterion

	(criteria
		[ATHENA_DM_GlycemicControl_Dashboard_Class110108]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110109]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110111]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110112])
	(label "Pres encoded DM med bad drug partner and that DM med not contra")
	(operator OR))

([ATHENA_DM_GlycemicControl_Dashboard_Class110114] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1220007]
		[ATHENA_GlycemicControl_Class90000])
	(label "glipizide contra and Pres glip and glipXL")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class110115] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1220005]
		[ATHENA_GlycemicControl_Class110003])
	(label "count Biguanide gt 1 and metformin contraindicated")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class110116] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1220010]
		[ATHENA_GlycemicControl_Class120005])
	(label "count TZD gt 1 and TZD contraindicated")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class110117] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class850001]
		[ATHENA_GlycemicControl_Class120005])
	(label "Pres gemfibrozil and TZD and TZD contraindicated")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class110118] of  N_ary_Criterion

	(criteria
		[ATHENA_DM_GlycemicControl_Dashboard_Class110114]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110115]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110116]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110117])
	(label "Pres encoded bad drug partner DM med and that DM med contraindicated")
	(operator OR))

([ATHENA_DM_GlycemicControl_Dashboard_Class110119] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210014]
		[ATHENA_DM_GlycemicControl_Dashboard_Class120805])
	(label "not at target and contra bad drug partner")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class1128] of  Binary_Expression

	(first_argument [ATHENA_GlycemicControl_Class580001])
	(label "missing MF labs bicarb, AST, ALT")
	(operator -)
	(second_argument [ATHENA_DM_GlycemicControl_Dashboard_Class1130]))

([ATHENA_DM_GlycemicControl_Dashboard_Class1129] of  String_Set_Expression

	(label "{Bicarbonate, AST, ALT}")
	(set_elements
		"Bicarbonate"
		"AST"
		"ALT"))

([ATHENA_DM_GlycemicControl_Dashboard_Class1130] of  Structured_Query

	(attribute [domain_term])
	(label "query for bicarb, AST, ALT")
	(type Numeric_Entry)
	(where_restriction
		[ATHENA_GlycemicControl_Class580013]
		[ATHENA_GlycemicControl_Class730432]))

([ATHENA_DM_GlycemicControl_Dashboard_Class1131] of  Variable

	(derivation_expression [ATHENA_DM_GlycemicControl_Dashboard_Class1128])
	(label "PatientChar missing MF labs bicarb, AST, ALT")
	(string_name "?missingMFlabAdd"))

([ATHENA_DM_GlycemicControl_Dashboard_Class120000] of  Action_Choice

	(actions
		[ATHENA_DM_GlycemicControl_Dashboard_Class130001]
		[ATHENA_GlycemicControl_Class1140229])
	(followed_by [ATHENA_GlycemicControl_Class1210009])
	(label "Rec 1st and 2nd line")
	(strict_rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class90346]))

([ATHENA_DM_GlycemicControl_Dashboard_Class120001] of  On_Screen_Message

	(label "Follow up in 3 months if not on meds")
	(message "Follow up in 3 months")
	(message_type Follow_Up)
	(rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class120002]))

([ATHENA_DM_GlycemicControl_Dashboard_Class120002] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class800006]
		[ATHENA_GlycemicControl_Class210011])
	(label "Pres non-insulin rec add blocked and Abs DM med")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class120805] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1000007]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110118])
	(label "Abs bad drug partner OR contraindicated bad drug partner")
	(operator OR))

([ATHENA_DM_GlycemicControl_Dashboard_Class120885] of  Structured_Query

	(label "query for metformin dialy dose >= 2499.8")
	(type Medication)
	(where_restriction
		[ATHENA_DM_GlycemicControl_Dashboard_Class120886]
		[ATHENA_DM_GlycemicControl_Dashboard_Class120887]))

([ATHENA_DM_GlycemicControl_Dashboard_Class120886] of  Comparison_Filter

	(attribute [drug_name])
	(label "drug eq MF")
	(operator eq)
	(value_expression [METFORMIN]))

([ATHENA_DM_GlycemicControl_Dashboard_Class120887] of  Comparison_Filter

	(attribute [daily_dose])
	(label "daily dose >= 2499.8")
	(operator %3E%3D)
	(value_expression [ATHENA_DM_GlycemicControl_Dashboard_Class120888]))

([ATHENA_DM_GlycemicControl_Dashboard_Class120888] of  Numeric_Constant

	(label "2499.8")
	(value 2499.8))

([ATHENA_DM_GlycemicControl_Dashboard_Class12289] of  Parameterized_Message

	(label "Param msg missing bicarb or AST or ALT")
	(message_type Recommendation)
	(parameterized_message [ATHENA_DM_GlycemicControl_Dashboard_Class12291])
	(rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class12290]))

([ATHENA_DM_GlycemicControl_Dashboard_Class12290] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class500003]
		[ATHENA_GlycemicControl_Class520001]
		[ATHENA_GlycemicControl_Class500004])
	(label "Abs of bicarb or AST or ALT in past year")
	(operator OR))

([ATHENA_DM_GlycemicControl_Dashboard_Class12291] of  Parameterized_String

	(label "missing bicarb or AST or ALT")
	(value "We could not evaluate adding metformin because we are missing labs.  The following labs ?missingMFlabAdd are absent or older than 1 year")
	(variables [ATHENA_DM_GlycemicControl_Dashboard_Class1131]))

([ATHENA_DM_GlycemicControl_Dashboard_Class130000] of  N_ary_Criterion

	(criteria
		[ATHENA_DM_GlycemicControl_Dashboard_Class130008]
		[ATHENA_GlycemicControl_Class570003])
	(label "3 encoded DM meds and contra")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class130001] of  Evaluate_Start_Activity

	(activity_class "Medication")
	(alternatives
		[ATHENA_GlycemicControl_Instance_50004]
		[ATHENA_GlycemicControl_Instance_50026]
		[ATHENA_GlycemicControl_Class60000]
		[ATHENA_GlycemicControl_Class1070005])
	(label "Evaluate start 1st and and 2nd line")
	(recommendation_basis
		[is_first-line_drug_for]
		[is_second-line_drug_for])
	(therapeutic_goal [ATHENA_GlycemicControl_Class610454]))

([ATHENA_DM_GlycemicControl_Dashboard_Class130002] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class540003])
	(%3ATO [ATHENA_DM_GlycemicControl_Dashboard_Class120000]))

([ATHENA_DM_GlycemicControl_Dashboard_Class130003] of  Followed_By

	(%3AFROM [ATHENA_DM_GlycemicControl_Dashboard_Class120000])
	(%3ATO [ATHENA_GlycemicControl_Class1210009]))

([ATHENA_DM_GlycemicControl_Dashboard_Class130004] of  Action_Choice

	(actions
		[ATHENA_DM_GlycemicControl_Dashboard_Class60000]
		[ATHENA_DM_GlycemicControl_Dashboard_Class130005])
	(label "on 3 drugs not max path")
	(strict_rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class90000]))

([ATHENA_DM_GlycemicControl_Dashboard_Class130005] of  On_Screen_Message

	(label "Msg to discuss with endocrinologist when on 3 drugs")
	(message "Patient has active prescriptions of 3 DM drugs.  Consider discussion with endocrinologist")
	(message_type Recommendation))

([ATHENA_DM_GlycemicControl_Dashboard_Class130007] of  N_ary_Criterion

	(criteria
		[ATHENA_DM_GlycemicControl_Dashboard_Class130008]
		[ATHENA_GlycemicControl_Class1300424])
	(label "3 encoded DM meds not at max dose")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class130008] of  Numeric_Term_Criterion

	(aggregation_operator count)
	(entry_type Medication)
	(label "3 encoded DM meds")
	(numeric_domain_term Encoded_DM_Drugs)
	(operator %3D)
	(value 3.0))

([ATHENA_DM_GlycemicControl_Dashboard_Class130010] of  N_ary_Criterion

	(criteria
		[ATHENA_DM_GlycemicControl_Dashboard_Class130007]
		[ATHENA_DM_GlycemicControl_Dashboard_Class90346]
		[ATHENA_DM_GlycemicControl_Dashboard_Class130000])
	(label "1 or 2 DM encoded meds or 3 encoded DM meds not at max dose or contraindicated")
	(operator OR))

([ATHENA_DM_GlycemicControl_Dashboard_Class130011] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1300005]
		[ATHENA_GlycemicControl_Class1140001]
		[ATHENA_DM_GlycemicControl_Dashboard_Class90000])
	(label "out of scope - no rec's")
	(operator OR))

([ATHENA_DM_GlycemicControl_Dashboard_Class130012] of  N_ary_Criterion

	(criteria
		[ATHENA_DM_GlycemicControl_Dashboard_Class130008]
		[ATHENA_GlycemicControl_Class210131])
	(label "3 encoded DM meds at max dose")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class130013] of  N_ary_Criterion

	(criteria
		[ATHENA_DM_GlycemicControl_Dashboard_Class130011]
		[ATHENA_GlycemicControl_Class210005])
	(label "out of scope and Pres HbA1c or GlycHem")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class130014] of  Scenario

	(followed_by [ATHENA_DM_GlycemicControl_Dashboard_Class130015])
	(label "out of scope no recs")
	(new_encounter TRUE)
	(precondition [ATHENA_DM_GlycemicControl_Dashboard_Class130013]))

([ATHENA_DM_GlycemicControl_Dashboard_Class130015] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class680000]
		[ATHENA_DM_GlycemicControl_Dashboard_Class90342]
		[ATHENA_DM_GlycemicControl_Dashboard_Class160000])
	(label "out of scope choices"))

([ATHENA_DM_GlycemicControl_Dashboard_Class130017] of  Followed_By

	(%3AFROM [ATHENA_DM_GlycemicControl_Dashboard_Class130014])
	(%3ATO [ATHENA_DM_GlycemicControl_Dashboard_Class130015]))

([ATHENA_DM_GlycemicControl_Dashboard_Class130018] of  Followed_By

	(%3AFROM [ATHENA_DM_GlycemicControl_Dashboard_Class130015])
	(%3ATO [ATHENA_GlycemicControl_Class680000]))

([ATHENA_DM_GlycemicControl_Dashboard_Class130019] of  Followed_By

	(%3AFROM [ATHENA_DM_GlycemicControl_Dashboard_Class130015])
	(%3ATO [ATHENA_DM_GlycemicControl_Dashboard_Class90342]))

([ATHENA_DM_GlycemicControl_Dashboard_Class130020] of  Followed_By

	(%3AFROM [ATHENA_DM_GlycemicControl_Dashboard_Class130015])
	(%3ATO [ATHENA_GlycemicControl_Class470006]))

([ATHENA_DM_GlycemicControl_Dashboard_Class132980] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class120322]
		[ATHENA_DM_GlycemicControl_Dashboard_Class132981])
	(label "Pres biguanide and not biguanide contraindicated")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class132981] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControlAlt_Class1])
	(label "not biguanide contraindicated")
	(operator NOT))

([ATHENA_DM_GlycemicControl_Dashboard_Class140000] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "Bicarb alt1 lt 22 in past year")
	(numeric_domain_term Bicarbonate_alt1)
	(operator %3C)
	(valid_window [ATHENA_DM_Eye_Instance_30019])
	(value 22.0))

([ATHENA_DM_GlycemicControl_Dashboard_Class140001] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class1140002])
	(%3ATO [ATHENA_GlycemicControl_Class230008]))

([ATHENA_DM_GlycemicControl_Dashboard_Class141391] of  Numeric_Term_Criterion

	(aggregation_operator count)
	(entry_type Medication)
	(label "4+ encoded DM meds")
	(numeric_domain_term Encoded_DM_Drugs)
	(operator %3E%3D)
	(value 4.0))

([ATHENA_DM_GlycemicControl_Dashboard_Class141392] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class1300425]
		[ATHENA_DM_GlycemicControl_Dashboard_Class141393])
	(label "Four+ encoded meds, refer")
	(strict_rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class141391]))

([ATHENA_DM_GlycemicControl_Dashboard_Class141393] of  Parameterized_Message

	(label "Param msg for 4+ encoded meds")
	(message_type Primary_Recommendation)
	(parameterized_message [ATHENA_DM_GlycemicControl_Dashboard_Class141394])
	(rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class141391]))

([ATHENA_DM_GlycemicControl_Dashboard_Class141394] of  Parameterized_String

	(label "Param msg for 4+ encoded meds")
	(value "Patient has active prescriptions for 4 or more DM drugs: ?Encoded_DM_drug indicating that he/she is a complicated patient.  Please discuss with endocrinologist or specialized DM care team.")
	(variables [ATHENA_GlycemicControl_Class1110008]))

([ATHENA_DM_GlycemicControl_Dashboard_Class141395] of  Followed_By

	(%3AFROM [ATHENA_DM_GlycemicControl_Dashboard_Class130015])
	(%3ATO [ATHENA_DM_GlycemicControl_Dashboard_Class141392]))

([ATHENA_DM_GlycemicControl_Dashboard_Class1439] of  Qualitative_Constant

	(label "AST")
	(value "AST"))

([ATHENA_DM_GlycemicControl_Dashboard_Class1440] of  Qualitative_Constant

	(label "AST")
	(value "AST"))

([ATHENA_DM_GlycemicControl_Dashboard_Class150000] of  Presence_Criterion

	(domain_term Bicarbonate_alt1)
	(entry_type Numeric_Entry)
	(label "Absence bicarb_alt1 past year")
	(period [library_Class60017])
	(presence FALSE))

([ATHENA_DM_GlycemicControl_Dashboard_Class150001] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "Bicarb alt2 lt 23 in past year")
	(numeric_domain_term Bicarbonate_alt2)
	(operator %3C)
	(valid_window [ATHENA_DM_Eye_Instance_30019])
	(value 23.0))

([ATHENA_DM_GlycemicControl_Dashboard_Class150002] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1340000]
		[ATHENA_DM_GlycemicControl_Dashboard_Class140000]
		[ATHENA_DM_GlycemicControl_Dashboard_Class150001])
	(label "bicarb<24 past year or bicarb alt1<22 past year or bicarb alt2 <23 past year")
	(operator OR))

([ATHENA_DM_GlycemicControl_Dashboard_Class150300] of  Parameterized_Message

	(label "Param msg for 3 encoded drugs not at max dose")
	(message_type Recommendation)
	(parameterized_message [ATHENA_DM_GlycemicControl_Dashboard_Class150301])
	(rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class130008]))

([ATHENA_DM_GlycemicControl_Dashboard_Class150301] of  Parameterized_String

	(label "drug not at max dose 3 encoded drugs")
	(value "Patient has an active prescription of a DM drug ?notMaxDose that is not at the maximum dose, but we canoot increase dose.")
	(variables [ATHENA_GlycemicControl_Class1150010]))

([ATHENA_DM_GlycemicControl_Dashboard_Class160000] of  Action_Choice

	(actions [ATHENA_DM_GlycemicControl_Dashboard_Class170001])
	(label "dThree+ encoded meds")
	(strict_rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class90000]))

([ATHENA_DM_GlycemicControl_Dashboard_Class160001] of  Presence_Criterion

	(domain_term Bicarbonate_alt2)
	(entry_type Numeric_Entry)
	(label "Absence bicarb_alt2 past year")
	(period [library_Class60017])
	(presence FALSE))

([ATHENA_DM_GlycemicControl_Dashboard_Class160002] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class520001]
		[ATHENA_DM_GlycemicControl_Dashboard_Class150000]
		[ATHENA_DM_GlycemicControl_Dashboard_Class160001])
	(label "Absence of all bicarbs past year")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class160323] of  Action_Choice

	(actions [ATHENA_DM_GlycemicControl_Dashboard_Class150300])
	(label "dNo incr dose 3 meds")
	(strict_rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class160324]))

([ATHENA_DM_GlycemicControl_Dashboard_Class160324] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1080006]
		[ATHENA_GlycemicControl_Class1080008]
		[ATHENA_DM_GlycemicControl_Dashboard_Class130008])
	(label "Absence DM med rec inc and incr blocked for 3 encoded meds")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class170001] of  Parameterized_Message

	(label "Param msg for 3 encode meds")
	(message_type Primary_Recommendation)
	(parameterized_message [ATHENA_DM_GlycemicControl_Dashboard_Class170002]))

([ATHENA_DM_GlycemicControl_Dashboard_Class170002] of  Parameterized_String

	(label "Param string for 3 encoded meds")
	(value "Patient has active prescriptions for 3+ DM drugs: ?Encoded_DM_drug indicating that he/she is a complicated patient.  Please discuss with endocrinologist or specialized DM care team.")
	(variables [ATHENA_GlycemicControl_Class1110008]))

([ATHENA_DM_GlycemicControl_Dashboard_Class170003] of  Followed_By

	(%3AFROM [ATHENA_DM_GlycemicControl_Dashboard_Class130015])
	(%3ATO [ATHENA_DM_GlycemicControl_Dashboard_Class160000]))

([ATHENA_DM_GlycemicControl_Dashboard_Class170004] of  Scenario

	(consultation_template [ATHENA_GlycemicControl_Class780000])
	(followed_by [ATHENA_GlycemicControl_Class550006])
	(label "Scenario on One or Two encoded drugs not insulin")
	(new_encounter TRUE)
	(precondition [ATHENA_DM_GlycemicControl_Dashboard_Class90345]))

([ATHENA_DM_GlycemicControl_Dashboard_Class170005] of  Followed_By

	(%3AFROM [ATHENA_DM_GlycemicControl_Dashboard_Class170004])
	(%3ATO [ATHENA_GlycemicControl_Class550006]))

([ATHENA_DM_GlycemicControl_Dashboard_Class170298] of  Action_Choice

	(followed_by [ATHENA_GlycemicControl_Class1140002])
	(label "Make rec's")
	(strict_rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class183749]))

([ATHENA_DM_GlycemicControl_Dashboard_Class170299] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class550006])
	(%3ATO [ATHENA_DM_GlycemicControl_Dashboard_Class170298]))

([ATHENA_DM_GlycemicControl_Dashboard_Class170300] of  Followed_By

	(%3AFROM [ATHENA_DM_GlycemicControl_Dashboard_Class170298])
	(%3ATO [ATHENA_GlycemicControl_Class1140002]))

([ATHENA_DM_GlycemicControl_Dashboard_Class170873] of  Variable

	(derivation_expression [ATHENA_DM_GlycemicControl_Dashboard_Class160002])
	(label "Absence all bicarbs")
	(string_name "Absence all bicarbs"))

([ATHENA_DM_GlycemicControl_Dashboard_Class183748] of  N_ary_Criterion

	(criteria [ATHENA_DM_GlycemicControl_Dashboard_Class110112])
	(label "NOT (Pres gemfibrozil and TZD and not TZD contra)")
	(operator NOT))

([ATHENA_DM_GlycemicControl_Dashboard_Class183749] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210014]
		[ATHENA_DM_GlycemicControl_Dashboard_Class183748])
	(label "not at goal and not bad TZD and gemfibrozil")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class2] of  Binary_Expression

	(first_argument [ATHENA_GlycemicControl_Class730430])
	(label "missing MF labs binary expression")
	(operator -)
	(second_argument [ATHENA_GlycemicControl_Class590003]))

([ATHENA_DM_GlycemicControl_Dashboard_Class20000] of  Action_Choice

	(actions [KB_308520_Class2])
	(followed_by [ATHENA_DM_GlycemicControl_Dashboard_Class20002])
	(label "dFirst Line Therapy on meds II")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class140001]))

([ATHENA_DM_GlycemicControl_Dashboard_Class20002] of  Choice_Step

	(branches [ATHENA_GlycemicControl_Class540023])
	(label "true add second line"))

([ATHENA_DM_GlycemicControl_Dashboard_Class20003] of  Followed_By

	(%3AFROM [ATHENA_DM_GlycemicControl_Dashboard_Class20000])
	(%3ATO [ATHENA_DM_GlycemicControl_Dashboard_Class20002]))

([ATHENA_DM_GlycemicControl_Dashboard_Class20004] of  Followed_By

	(%3AFROM [ATHENA_DM_GlycemicControl_Dashboard_Class20002])
	(%3ATO [ATHENA_GlycemicControl_Class540023]))

([ATHENA_DM_GlycemicControl_Dashboard_Class20594] of  N_ary_Criterion

	(criteria
		[ATHENA_DM_GlycemicControl_Dashboard_Class20595]
		[ATHENA_DM_GlycemicControl_Dashboard_Class20596])
	(label "Pres DPP4 inhibitor and GLP-1 agonist")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class20595] of  Presence_Criterion

	(domain_term DIPEPTIDYL_PEPTIDASE-4_INHIBITOR)
	(entry_type Medication)
	(label "Pres DPP4 inhibitor")
	(mood Authorized)
	(presence TRUE))

([ATHENA_DM_GlycemicControl_Dashboard_Class20596] of  Presence_Criterion

	(domain_term Glucagon_like_peptide_1_agonist)
	(entry_type Medication)
	(label "Pres GLP-1 agonist")
	(presence TRUE))

([ATHENA_DM_GlycemicControl_Dashboard_Class20597] of  On_Screen_Message

	(label "Pres DPP4 inhibitor and GLP-1 agonist")
	(message "Patient has an active prescription of a DPP4 inhibitor and a GLP-1 agonist.  Please stop one.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class20594]))

([ATHENA_DM_GlycemicControl_Dashboard_Class30000] of  Structured_Query

	(label "ADR anaphylaxis to MF or MF ER")
	(type Adverse_Reaction)
	(where_restriction
		[ATHENA_GlycemicControl_Class690001]
		[ATHENA_GlycemicControl_Class1350005]))

([ATHENA_DM_GlycemicControl_Dashboard_Class30001] of  Structured_Query

	(label "ADR anaphylaxis to TZD")
	(type Adverse_Reaction)
	(where_restriction
		[ATHENA_GlycemicControl_Class690001]
		[ATHENA_GlycemicControl_Class1350014]))

([ATHENA_DM_GlycemicControl_Dashboard_Class30002] of  Structured_Query

	(label "ADR anaphylaxis to SGLT2 inhibitor")
	(type Adverse_Reaction)
	(where_restriction
		[ATHENA_GlycemicControl_Class690001]
		[ATHENA_DM_GlycemicControl_Dashboard_Class30003]))

([ATHENA_DM_GlycemicControl_Dashboard_Class30003] of  Comparison_Filter

	(attribute [substance])
	(label "substance is subclass of SGLT2 inhibitor")
	(operator subclass_of)
	(value_expression [SGLT2_Inhibitor]))

([ATHENA_DM_GlycemicControl_Dashboard_Class30004] of  Query_Result_Criterion

	(label "ADR anaphylaxis to MF or MF ER")
	(presence TRUE)
	(query [ATHENA_DM_GlycemicControl_Dashboard_Class30000]))

([ATHENA_DM_GlycemicControl_Dashboard_Class30005] of  Query_Result_Criterion

	(label "ADR anaphylaxis to TZD")
	(presence TRUE)
	(query [ATHENA_DM_GlycemicControl_Dashboard_Class30001]))

([ATHENA_DM_GlycemicControl_Dashboard_Class30006] of  Query_Result_Criterion

	(label "ADR anaphylaxis to SGLT2 inhibitor")
	(presence TRUE)
	(query [ATHENA_DM_GlycemicControl_Dashboard_Class30002]))

([ATHENA_DM_GlycemicControl_Dashboard_Class40000] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class930005])
	(%3ATO [ATHENA_GlycemicControl_Class1312626]))

([ATHENA_DM_GlycemicControl_Dashboard_Class40001] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class1000002]))

([ATHENA_DM_GlycemicControl_Dashboard_Class50000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1220005]
		[ATHENA_GlycemicControl_Class1220014]
		[ATHENA_GlycemicControl_Class1220012]
		[ATHENA_GlycemicControl_Class1060004]
		[ATHENA_GlycemicControl_Class1220010])
	(label "Pres multiple meds from same DM class")
	(operator OR))

([ATHENA_DM_GlycemicControl_Dashboard_Class50001] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class930005])
	(%3ATO [ATHENA_DM_GlycemicControl_Dashboard_Class50178]))

([ATHENA_DM_GlycemicControl_Dashboard_Class50178] of  Consultation_Action_Step

	(actions
		[ATHENA_GlycemicControl_Class1060199]
		[ATHENA_GlycemicControl_Class1220004]
		[ATHENA_GlycemicControl_Class1220013]
		[ATHENA_GlycemicControl_Class1220011]
		[ATHENA_GlycemicControl_Class1220009])
	(label "Multiple meds from same drug class")
	(rule_in [ATHENA_DM_GlycemicControl_Dashboard_Class50000]))

([ATHENA_DM_GlycemicControl_Dashboard_Class60000] of  On_Screen_Message

	(label "Select one med msg")
	(message "The CDS displays all possible therapeutic drug options.  When more than one option is displayed, please select the one that is the most appropriate for the patient.")
	(message_type Primary_Recommendation))

([ATHENA_DM_GlycemicControl_Dashboard_Class60002] of  Action_Choice

	(actions
		[ATHENA_DM_GlycemicControl_Dashboard_Class60000]
		[ATHENA_GlycemicControl_Class1170006])
	(label "Msg F/U")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class800006]))

([ATHENA_DM_GlycemicControl_Dashboard_Class60003] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class1210009])
	(%3ATO [ATHENA_DM_GlycemicControl_Dashboard_Class60002]))

([ATHENA_DM_GlycemicControl_Dashboard_Class60005] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class1210009])
	(%3ATO [ATHENA_DM_GlycemicControl_Dashboard_Class60002]))

([ATHENA_DM_GlycemicControl_Dashboard_Class60006] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class1210009])
	(%3ATO [ATHENA_GlycemicControl_Class540037]))

([ATHENA_DM_GlycemicControl_Dashboard_Class60007] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class1210005])
	(%3ATO [ATHENA_GlycemicControl_Class1210009]))

([ATHENA_DM_GlycemicControl_Dashboard_Class70000] of  Query_Result_Criterion

	(label "there exists bad drug partner DM med")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class840132]))

([ATHENA_DM_GlycemicControl_Dashboard_Class70002] of  Variable

	(derivation_expression [ATHENA_DM_GlycemicControl_Dashboard_Class70000])
	(label "PatientChar there exists bad drug partner DM med")
	(string_name "?existsBadDrugPartnerDMMed"))

([ATHENA_DM_GlycemicControl_Dashboard_Class70107] of  Structured_Query

	(attribute [drug_name])
	(label "WORK multiple meds only some classes")
	(type Medication)
	(where_restriction
		[ATHENA_DM_GlycemicControl_Dashboard_Class71058]
		[ATHENA_DM_GlycemicControl_Dashboard_Class70109]))

([ATHENA_DM_GlycemicControl_Dashboard_Class70109] of  N_aryFilter

	(filters
		[ATHENA_GlycemicControl_Class1110004]
		[ATHENA_GlycemicControl_Class1100002])
	(label "drugname is subclass of TZD or Biguanide")
	(operator OR))

([ATHENA_DM_GlycemicControl_Dashboard_Class70110] of  Variable

	(derivation_expression [ATHENA_DM_GlycemicControl_Dashboard_Class70107])
	(label "PatientChar StrucQuery multiple meds Biguanide TZD")
	(string_name "StrucQuery multiple meds Biguanide TZD"))

([ATHENA_DM_GlycemicControl_Dashboard_Class71057] of  Structured_Query

	(attribute [drug_name])
	(label "WORK multiple meds")
	(type Medication)
	(where_restriction
		[ATHENA_DM_GlycemicControl_Dashboard_Class71058]
		[ATHENA_GlycemicControl_Class1110495]))

([ATHENA_DM_GlycemicControl_Dashboard_Class71058] of  Comparison_Filter

	(attribute [drug_name])
	(label "PAL query meds in same drug class")
	(operator member_of)
	(value_expression [library_Class150006]))

([ATHENA_DM_GlycemicControl_Dashboard_Class71059] of  Variable

	(derivation_expression [ATHENA_DM_GlycemicControl_Dashboard_Class71057])
	(label "PatientChar ?StrucQueryMultiplMeds")
	(string_name "?StrucQueryMultiplMeds"))

([ATHENA_DM_GlycemicControl_Dashboard_Class77592] of  On_Screen_Message

	(label "select one med msg incr dose")
	(message "The CDS displays all possible therapeutic drug options.  When more than one option is displayed, please select the one that is the most appropriate for the patient.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class77593]))

([ATHENA_DM_GlycemicControl_Dashboard_Class77593] of  N_ary_Criterion

	(criteria
		[ATHENA_DM_GlycemicControl_Dashboard_Class77594]
		[ATHENA_GlycemicControl_Class1090646])
	(label "Pres rec incr block and abs rec add block")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class77594] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1170844]
		[ATHENA_DM_GlycemicControl_Dashboard_Class77595])
	(label "Pres non-insulin agent rec incr or block incr")
	(operator OR))

([ATHENA_DM_GlycemicControl_Dashboard_Class77595] of  Presence_Criterion

	(domain_term Non_Insulin_Related_Glucose_Reg_Agents)
	(entry_type Medication)
	(label "Pres non-insulin agent block incr")
	(mood Blocked_Increase)
	(presence TRUE))

([ATHENA_DM_GlycemicControl_Dashboard_Class80000] of  Action_Choice

	(followed_by [ATHENA_GlycemicControl_Class1140002])
	(label "no bad drug partner OR bad drug partner with contra")
	(strict_rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class110119]))

([ATHENA_DM_GlycemicControl_Dashboard_Class80001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210014]
		[ATHENA_GlycemicControl_Class1000007])
	(label "not at target and Abs bad drug partner DM")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class80002] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class550006])
	(%3ATO [ATHENA_DM_GlycemicControl_Dashboard_Class80000]))

([ATHENA_DM_GlycemicControl_Dashboard_Class80003] of  Followed_By

	(%3AFROM [ATHENA_DM_GlycemicControl_Dashboard_Class80000])
	(%3ATO [ATHENA_GlycemicControl_Class1140002]))

([ATHENA_DM_GlycemicControl_Dashboard_Class80004] of  Parameterized_Message

	(label "Param msg for partially encoded drug")
	(message_type Primary_Recommendation)
	(parameterized_message [ATHENA_DM_GlycemicControl_Dashboard_Class80005])
	(rule_in_condition [ATHENA_GlycemicControl_Class1140001]))

([ATHENA_DM_GlycemicControl_Dashboard_Class80005] of  Parameterized_String

	(label "Param msg for partially encoded drug")
	(value "Patient has an active prescription for ?Not_Encoded_DM_drug for which we check only for the presence of an Absolute Contraindication.  We do not check if lab values necessary for the drug are out of date.")
	(variables [ATHENA_GlycemicControl_Class1110248]))

([ATHENA_DM_GlycemicControl_Dashboard_Class80006] of  Consultation_Action_Step

	(actions [ATHENA_DM_GlycemicControl_Dashboard_Class80004])
	(label "Param msg for partially encoded drug")
	(rule_in [ATHENA_GlycemicControl_Class1140001]))

([ATHENA_DM_GlycemicControl_Dashboard_Class80007] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_DM_GlycemicControl_Dashboard_Class80006]))

([ATHENA_DM_GlycemicControl_Dashboard_Class80649] of  N_ary_Criterion

	(criteria
		[ATHENA_DM_GlycemicControl_Dashboard_Class70000]
		[ATHENA_DM_GlycemicControl_Dashboard_Class80651])
	(label "there exists bad drug parnter DM med and abs glipER")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class80650] of  Presence_Criterion

	(domain_term GLIPIZIDE)
	(entry_type Medication)
	(label "Abs glip")
	(mood Authorized)
	(presence FALSE))

([ATHENA_DM_GlycemicControl_Dashboard_Class80651] of  Presence_Criterion

	(domain_term GLIPIZIDE_XL)
	(entry_type Medication)
	(label "Abs glipER")
	(mood Authorized)
	(presence FALSE))

([ATHENA_DM_GlycemicControl_Dashboard_Class80652] of  Variable

	(derivation_expression [ATHENA_DM_GlycemicControl_Dashboard_Class80649])
	(label "PatientChar there exists bad drug parnter DM med and abs glipER")
	(string_name "?badDrugDMnotGlipGlipER"))

([ATHENA_DM_GlycemicControl_Dashboard_Class81111] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class1220004]
		[ATHENA_GlycemicControl_Class1220009]
		[ATHENA_DM_GlycemicControl_Dashboard_Class81113]
		[ATHENA_DM_GlycemicControl_Dashboard_Class84120])
	(label "dBad Drug partner DM drug II no contra")
	(strict_rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class110113]))

([ATHENA_DM_GlycemicControl_Dashboard_Class81113] of  Parameterized_Message

	(label "Bad Drug Parnter message stop one")
	(message_type Primary_Recommendation)
	(parameterized_message [ATHENA_DM_GlycemicControl_Dashboard_Class81114])
	(rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class80649]))

([ATHENA_DM_GlycemicControl_Dashboard_Class81114] of  Parameterized_String

	(label "parm msg bad drug stop one")
	(value "Patient has an active prescription of two drugs  ?badPartnerGlycemicControlmed that are normally not taken together.  Please stop one")
	(variables [ATHENA_GlycemicControl_Class850704]))

([ATHENA_DM_GlycemicControl_Dashboard_Class81115] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class550006])
	(%3ATO [ATHENA_DM_GlycemicControl_Dashboard_Class81111]))

([ATHENA_DM_GlycemicControl_Dashboard_Class84120] of  Parameterized_Message

	(label "BadDrugPartner glipXL")
	(message_type Primary_Recommendation)
	(parameterized_message [ATHENA_DM_GlycemicControl_Dashboard_Class84121])
	(rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class84122]))

([ATHENA_DM_GlycemicControl_Dashboard_Class84121] of  Parameterized_String

	(label "BadDrugPartner glipXL")
	(value "Patient has an active prescription of two drugs  ?StrucQueryMultiplMeds that are normally not taken together.  Please stop one")
	(variables [ATHENA_DM_GlycemicControl_Dashboard_Class71059]))

([ATHENA_DM_GlycemicControl_Dashboard_Class84122] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1220008]
		[ATHENA_DM_GlycemicControl_Dashboard_Class84123])
	(label "count all SU > 1 and Pres glipXL")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class84123] of  Numeric_Term_Criterion

	(aggregation_operator count)
	(entry_type Medication)
	(label "count all SU > 1")
	(numeric_domain_term SULFONYLUREAS)
	(operator %3E)
	(value 1.0))

([ATHENA_DM_GlycemicControl_Dashboard_Class90000] of  Numeric_Term_Criterion

	(aggregation_operator count)
	(entry_type Medication)
	(label "3 or more encoded DM meds")
	(numeric_domain_term Encoded_DM_Drugs)
	(operator %3E%3D)
	(value 3.0))

([ATHENA_DM_GlycemicControl_Dashboard_Class90239] of  Variable

	(derivation_expression [ATHENA_DM_GlycemicControl_Dashboard_Class90000])
	(label "PatientChar count encoded drug >=3"))

([ATHENA_DM_GlycemicControl_Dashboard_Class90338] of  Scenario

	(followed_by [ATHENA_DM_GlycemicControl_Dashboard_Class90340])
	(label "Scenario non encoded drug")
	(new_encounter TRUE)
	(precondition [ATHENA_DM_GlycemicControl_Dashboard_Class90339]))

([ATHENA_DM_GlycemicControl_Dashboard_Class90339] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1140001]
		[ATHENA_GlycemicControl_Class1300004]
		[ATHENA_GlycemicControl_Class210005])
	(label "Non encoded med and no insulin and Pres Hba1c")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class90340] of  Choice_Step

	(branches [ATHENA_DM_GlycemicControl_Dashboard_Class90342])
	(label "non encoded drugs out of scope"))

([ATHENA_DM_GlycemicControl_Dashboard_Class90341] of  Followed_By

	(%3AFROM [ATHENA_DM_GlycemicControl_Dashboard_Class90338])
	(%3ATO [ATHENA_DM_GlycemicControl_Dashboard_Class90340]))

([ATHENA_DM_GlycemicControl_Dashboard_Class90342] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class810214])
	(label "non encoded meds out of scope")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class1140001]))

([ATHENA_DM_GlycemicControl_Dashboard_Class90345] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210005]
		[ATHENA_GlycemicControl_Class1300004]
		[ATHENA_GlycemicControl_Class800000]
		[ATHENA_DM_GlycemicControl_Dashboard_Class90346])
	(label "1 or 2 encoded DM meds and no insulin and Pres HbA1c")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class90346] of  N_ary_Criterion

	(criteria
		[ATHENA_DM_GlycemicControl_Dashboard_Class90347]
		[ATHENA_DM_GlycemicControl_Dashboard_Class90348])
	(label "1 or 2 DM ecoded meds")
	(operator AND))

([ATHENA_DM_GlycemicControl_Dashboard_Class90347] of  N_ary_Criterion

	(criteria [ATHENA_DM_GlycemicControl_Dashboard_Class90000])
	(label "not 3+ encoded DM meds")
	(operator NOT))

([ATHENA_DM_GlycemicControl_Dashboard_Class90348] of  Numeric_Term_Criterion

	(aggregation_operator count)
	(entry_type Medication)
	(label "gt 0 DM encoded meds")
	(numeric_domain_term Encoded_DM_Drugs)
	(operator %3E)
	(value 0.0))

([ATHENA_GlycemicControl_Class0] of  Scenario

	(consultation_template [ATHENA_GlycemicControl_Class80002])
	(followed_by [ATHENA_GlycemicControl_Class5])
	(label "Nonpharmacologic Therapy")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Instance_120205]))

([ATHENA_GlycemicControl_Class1] of  Scenario

	(consultation_template [ATHENA_GlycemicControl_Class60011])
	(followed_by [ATHENA_GlycemicControl_Class7])
	(label "Monotherapy w/ oral agent")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Instance_120203]))

([ATHENA_GlycemicControl_Class10000] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 1000.0)
	(upper_limit 2549.0))

([ATHENA_GlycemicControl_Class100000] of  N_ary_Criterion

	(criteria
		[KB_362799_Class1]
		[ATHENA_DM_Eye_Instance_40003])
	(label "presence of diabetes or insulin")
	(operator OR))

([ATHENA_GlycemicControl_Class1000000] of  Presence_Criterion

	(domain_term Creatinine)
	(entry_type Numeric_Entry)
	(label "Presence of creatinine")
	(presence TRUE))

([ATHENA_GlycemicControl_Class1000002] of  Consultation_Action_Step

	(actions
		[ATHENA_GlycemicControl_Class1220004]
		[ATHENA_GlycemicControl_Class1220009]
		[ATHENA_DM_GlycemicControl_Dashboard_Class81113]
		[ATHENA_DM_GlycemicControl_Dashboard_Class84120])
	(label "Bad Drug Partners Presence")
	(rule_in [ATHENA_GlycemicControl_Class990000]))

([ATHENA_GlycemicControl_Class1000004] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class930005])
	(%3ATO [ATHENA_GlycemicControl_Class1000002]))

([ATHENA_GlycemicControl_Class1000005] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class300001]
		[ATHENA_GlycemicControl_Class1000006])
	(label "Presence of glipizde and glyburide")
	(operator AND))

([ATHENA_GlycemicControl_Class1000006] of  Presence_Criterion

	(domain_term GLIPIZIDE)
	(entry_type Medication)
	(label "Presence of glipizide")
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class1000007] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class990000])
	(label "Absence of bad drug partner DM med")
	(operator NOT))

([ATHENA_GlycemicControl_Class100001] of  %3APAL-CONSTRAINT

	(%3APAL-NAME "Glipizide contraindicated")
	(%3APAL-RANGE "(defrange ?condition :FRAME Note_Entry)\n(defrange ?problem :FRAME Medical_Conditions_Metaclass)\n(defrange ?derived_problem :FRAME Diagnostic_Term_Metaclass)\n(defrange ?drug_usage :FRAME Drug_Usage)")
	(%3APAL-STATEMENT "(forall ?drug_usage\n        (=> (Drug_Class_Name ?drug_usage GLIPIZIDE)\n            (or (exists ?condition \n                        (and (patient_id ?condition $patient_id)\n                             (exists ?problem \n                                     (and (Absolute_Contraindications ?drug_usage ?problem)\n                                          (isa-classname (domain_term ?condition))\n                                          (or (= (coerce-to-class (domain_term ?condition)) ?problem )\n                                              (subclass-of (coerce-to-class (domain_term ?condition)) ?problem )) \n                                     ))))\n                (exists  ?derived_problem \n                         (and (Absolute_Contraindications ?drug_usage ?derived_problem)\n                              (is-derivable ?derived_problem))))\n        )\n)"))

([ATHENA_GlycemicControl_Class100006] of  Action_Choice

	(actions [KB_390055_Class2])
	(label "Metformin contraindicated, add Glipizide")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Instance_90002])
	(strict_rule_out_condition [ATHENA_GlycemicControl_Class110006]))

([ATHENA_GlycemicControl_Class10001] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 2500.0)
	(upper_limit 2600.0))

([ATHENA_GlycemicControl_Class1010000] of  Collateral_Action

	(actions
		[ATHENA_GlycemicControl_Class730029]
		[ATHENA_GlycemicControl_Class1020001])
	(mood Blocked_Increase))

([ATHENA_GlycemicControl_Class1010002] of  Conditional_On_Screen_Message

	(label "Missing creatinine for add glyburide in age >= 65")
	(message "We could not recommend adding glyburide because the patient's age >= 65 and there is no value for creatinine available")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class1010003]))

([ATHENA_GlycemicControl_Class1010003] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class80026]
		[ATHENA_GlycemicControl_Class1010004])
	(label "Absence of Creatinine and age >= 65")
	(operator AND))

([ATHENA_GlycemicControl_Class1010004] of  Presence_Criterion

	(domain_term Creatinine)
	(entry_type Numeric_Entry)
	(label "Absence of Creatinine")
	(presence FALSE))

([ATHENA_GlycemicControl_Class1010736] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1000000]
		[ATHENA_GlycemicControl_Class150035])
	(label "Presence of Cr, but absent in past month")
	(operator AND))

([ATHENA_GlycemicControl_Class1020000] of  %3APAL-CONSTRAINT

	(%3APAL-NAME "there exists bad drug partner (based on any Drug Usage)")
	(%3APAL-RANGE "(defrange ?med1 :FRAME Medication)\n(defrange ?med2 :FRAME Medication)\n(defrange ?drugUsage :FRAME Drug_Usage)\n(defrange ?badPartner :FRAME Medications_Metaclass Drug_Partners_To_Avoid)")
	(%3APAL-STATEMENT "(exists ?med1 (and (is-class (drug_name ?med1))\n                   (exists ?med2 (and (is-class (drug_name ?med2))\n                                      (/=(drug_name ?med1)(drug_name ?med2))\n                                      		(exists ?drugUsage\n                                                (and \n                                                     (exists ?badPartner (and (Drug_Partners_To_Avoid ?drugUsage ?badPartner)   \n                                                                              (or (and \n                                                                                       (equal-or-subclass-of (coerce-to-class (drug_name ?med1))(Drug_Class_Name ?drugUsage))\n                                                                                       (equal-or-subclass-of (coerce-to-class (drug_name ?med2)) ?badPartner))\n                                                                                  (and \n                                                                                       (equal-or-subclass-of (coerce-to-class (drug_name ?med2))(Drug_Class_Name ?drugUsage))\n                                                                                       (equal-or-subclass-of (coerce-to-class (drug_name ?med1)) ?badPartner))\n                                                                              ))))))\n                   )))"))

([ATHENA_GlycemicControl_Class1020001] of  Parameterized_Message

	(label "Conditional: Old Cr ange age>=65 for increase glyburide")
	(message_type Primary_Recommendation)
	(parameterized_message [ATHENA_GlycemicControl_Class1020002])
	(rule_in_condition [ATHENA_GlycemicControl_Class1020003]))

([ATHENA_GlycemicControl_Class1020002] of  Parameterized_String

	(label "Blocked increase Glyburide due to Cr older than 1 year")
	(multivalued_variables [ATHENA_GlycemicControl_Class980003])
	(value "We would consider an increase in the glyburide dosage, however the patient's last creatinine lab is older than one year. Last creatinine: ?value (?date)"))

([ATHENA_GlycemicControl_Class1020003] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class80026]
		[ATHENA_GlycemicControl_Class460000]
		[ATHENA_GlycemicControl_Class1000000])
	(label "Age >=65 and presence of creatinine older than 1 year")
	(operator AND))

([ATHENA_GlycemicControl_Class1020218] of  Structured_Query

	(label "Anaphylaxis with glimepiride")
	(type Adverse_Reaction)
	(where_restriction
		[ATHENA_GlycemicControl_Class690001]
		[ATHENA_GlycemicControl_Class1020219]))

([ATHENA_GlycemicControl_Class1020219] of  Comparison_Filter

	(attribute [substance])
	(label "substance eq glimepiride")
	(operator eq)
	(value_expression [GLIMEPIRIDE]))

([ATHENA_GlycemicControl_Class1020221] of  Query_Result_Criterion

	(label "Anaphylaxis as ADR to glimepiride")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class1020218]))

([ATHENA_GlycemicControl_Class1030000] of  Join_Filter

	(attribute_comparisons
		[eon2_Class100002]
		[eon2_Class100003])
	(label "has DM guideline drug usage bad drug partner")
	(query [ATHENA_GlycemicControl_Class1030001]))

([ATHENA_GlycemicControl_Class1030001] of  Structured_Query

	(label "DM Drug usage where a bad partner is current med")
	(type Drug_Usage)
	(where_restriction
		[ATHENA_GlycemicControlAlt_Class20627]
		[eon2_Class80002]))

([ATHENA_GlycemicControl_Class1030002] of  Join_Filter

	(attribute_comparisons
		[eon2_Class120001]
		[ATHENA_GlycemicControl_Class840126])
	(label "is bad drug partner (per DM Drug Usage) of a med")
	(query [ATHENA_GlycemicControl_Class1040255]))

([ATHENA_GlycemicControl_Class1030120] of  PAL_Criterion

	(case_variable "$patient_id")
	(label "there exist bad drug partners involving any med")
	(PAL_constraint [ATHENA_GlycemicControl_Class1020000]))

([ATHENA_GlycemicControl_Class1030421] of  Collateral_Action

	(actions
		[ATHENA_GlycemicControl_Class1030422]
		[ATHENA_GlycemicControl_Class1030423])
	(mood Blocked_Increase))

([ATHENA_GlycemicControl_Class1030422] of  Conditional_On_Screen_Message

	(label "No GFR for increase Metformin")
	(message "We normally recommend an increase in dosage of Metformin, but cannot do so because there is no eGFR available")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class510000]))

([ATHENA_GlycemicControl_Class1030423] of  Parameterized_Message

	(label "Old GFR for increase Metformin")
	(message_type Primary_Recommendation)
	(parameterized_message [ATHENA_GlycemicControl_Class1030424])
	(rule_in_condition [ATHENA_GlycemicControl_Class1030632]))

([ATHENA_GlycemicControl_Class1030424] of  Parameterized_String

	(label "Parameterized: Old GFR for increase Metformin")
	(multivalued_variables [ATHENA_GlycemicControl_Class1030425])
	(value "\\We would normally recommend increasing the dose of metformin but cannot do so because the patient's eGFR is old.. Last eGFR: ?value (?date)"))

([ATHENA_GlycemicControl_Class1030425] of  Variable_ValueSet

	(derivation_expression [ATHENA_GlycemicControl_Class980018])
	(label "Query for most recent GFR and date")
	(property_values_to_get
		[ATHENA_GlycemicControl_Class980005]
		[ATHENA_GlycemicControl_Class980017]))

([ATHENA_GlycemicControl_Class1030632] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class530008]
		[ATHENA_GlycemicControl_Class1030633]
		[ATHENA_GlycemicControl_Class1400000])
	(label "Presence of eGFR older than one year")
	(operator AND))

([ATHENA_GlycemicControl_Class1030633] of  Presence_Criterion

	(domain_term eGFR)
	(entry_type Numeric_Entry)
	(label "Presence of eGFR")
	(presence TRUE))

([ATHENA_GlycemicControl_Class1033535] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1010004]
		[ATHENA_GlycemicControl_Class510000])
	(label "Absence of egfr and creatinine")
	(operator AND))

([ATHENA_GlycemicControl_Class1040000] of  Presence_Criterion

	(domain_term DM-Type2)
	(entry_type Note_Entry)
	(label "Presence of DM-II")
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class1040002] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1040003]
		[library_Class110013])
	(label "Poor renal function  30 days and Abs Biguanide")
	(operator AND))

([ATHENA_GlycemicControl_Class1040003] of  Presence_Criterion

	(domain_term BIGUANIDE)
	(entry_type Medication)
	(label "Abs Biguanide")
	(mood Authorized)
	(presence FALSE))

([ATHENA_GlycemicControl_Class1040255] of  Structured_Query

	(label "DM drug usage of a med, and that has a bad partner")
	(type Drug_Usage)
	(where_restriction
		[eon2_Class80002]
		[eon2_Class110003]
		[ATHENA_GlycemicControlAlt_Class20627]))

([ATHENA_GlycemicControl_Class1040918] of  N_aryFilter

	(filters
		[ATHENA_GlycemicControl_Class1030000]
		[ATHENA_GlycemicControl_Class1030002])
	(label "involved in glycemic-control bad partners")
	(operator OR))

([ATHENA_GlycemicControl_Class1050000] of  Supporting_Material

	(label "DoD/VA 2010 DM Guidelines"))

([ATHENA_GlycemicControl_Class1050001] of  Supporting_Material

	(label "DoD/VA 2017 DM Guidelines"))

([ATHENA_GlycemicControl_Class1050573] of  PAL_Query

	(case_variable "$patient_id")
	(key_slot [drug_name])
	(label "query for drugs not a max dose ORG")
	(PAL_query [ATHENA_GlycemicControl_Class1050574]))

([ATHENA_GlycemicControl_Class1050574] of  PAL-QUERY

	(%3APAL-NAME "query for drugs not a max dose ORG")
	(%3APAL-RANGE "(defrange ?drug_usage :FRAME Drug_Usage)\n(defrange ?med :FRAME Medication)\n(defrange ?condition :FRAME Note_Entry)\n(defrange ?problem :FRAME Note_Entry)\n(defrange ?contraindication :FRAME Medical_Conditions_Metaclass Absolute_Contraindications)\n(defrange ?derived_contraindication :FRAME Diagnostic_Term_Metaclass Absolute_Contraindications)\n(defrange ?complication :FRAME Medical_Conditions_Metaclass Complication_Factor)\n(defrange ?guidelineDrug :FRAME Guideline_Drug)\n(defrange ?rangeMapping :FRAME Range_Mapping_Entry)\n(defrange ?bad_partner_med :FRAME Medication )\n(defrange ?drug_class :FRAME Medications_Metaclass Drug_Partners_To_Avoid)")
	(%3APAL-STATEMENT "(findall  ?med\n          (and \n               (patient_id ?med $patient_id)\n               (is-class (drug_name ?med))\n               (or (not (own-slot-not-null mood ?med ))\n                   (mood ?med Authorized)) \n               (exists ?guidelineDrug\n                       (and (= (coerce-to-class (drug_name ?med)) (generic_drug ?guidelineDrug))\n                            (exists ?rangeMapping (and (dose_level_ranges ?guidelineDrug ?rangeMapping)\n                                                       (= (abstract_value ?rangeMapping) (coerce-to-class \"High_Dose(high/low)\"))\n                                                       (< (daily_dose ?med) (lower_limit ?rangeMapping))  )))\n                       			      )\n               (not (exists ?drug_usage \n                            (and (subclass-of (coerce-to-class (drug_name ?med))\n                                              (Drug_Class_Name ?drug_usage))\n                                 (or (exists ?contraindication \n                                             (and (Absolute_Contraindications ?drug_usage ?contraindication)\n                                                  (exists ?condition \n                                                          (and (patient_id ?condition $patient_id)(is-class (domain_term ?condition))\n                                                               (equal-or-subclass-of (coerce-to-class (domain_term ?condition))\n                                                                                     ?contraindication)))))\n                                     (exists ?bad_partner_med (and (patient_id ?bad_partner_med $patient_id)\n                                                                   (is-class (drug_name ?bad_partner_med))\n                                                                   (or (not (own-slot-not-null mood ?bad_partner_med ))\n                                                                       (mood ?bad_partner_med Authorized)) \n                                                                   (exists ?drug_class (and (Drug_Partners_To_Avoid ?drug_usage ?drug_class)\n                                                                                            (equal-or-subclass-of (coerce-to-class (drug_name ?bad_partner_med))\n                                                                                                                  ?drug_class)))))                             	                   \n                                     (exists ?complication (and (Complication_Factor ?drug_usage ?complication)\n                                                                (exists ?problem\n                                                                        (and (patient_id ?problem $patient_id)\n                                                                             (is-class (domain_term ?problem))                                                                                                     \n                                                                             (equal-or-subclass-of (coerce-to-class (domain_term ?problem))        ?complication)))))\n                                     (exists  ?derived_contraindication \n                                              (and (Absolute_Contraindications ?drug_usage ?derived_contraindication)\n                                                   (is-derivable ?derived_contraindication))))))))\n)"))

([ATHENA_GlycemicControl_Class1060000] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class850006]
		[ATHENA_GlycemicControl_Class1060199]
		[ATHENA_GlycemicControl_Class1220004]
		[ATHENA_GlycemicControl_Class1220006]
		[ATHENA_GlycemicControl_Class1220009]
		[ATHENA_GlycemicControl_Class1220011]
		[ATHENA_GlycemicControl_Class1220013]
		[ATHENA_DM_GlycemicControl_Dashboard_Class20597])
	(label "dBad Drug partner DM drug")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class1390000]))

([ATHENA_GlycemicControl_Class1060001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210014]
		[ATHENA_GlycemicControl_Class230038]
		[ATHENA_GlycemicControl_Class990000])
	(label "NOT at target and no contra and Pres bad drug partner DM med")
	(operator AND))

([ATHENA_GlycemicControl_Class1060002] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class550006])
	(%3ATO [ATHENA_GlycemicControl_Class1060000]))

([ATHENA_GlycemicControl_Class1060003] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class540041])
	(%3ATO [ATHENA_GlycemicControl_Class1060000]))

([ATHENA_GlycemicControl_Class1060004] of  Numeric_Term_Criterion

	(aggregation_operator count)
	(entry_type Medication)
	(label "count SU 2nd gen gt 1")
	(numeric_domain_term SULFONYLUREAS_2NDGEN)
	(operator %3E)
	(value 1.0))

([ATHENA_GlycemicControl_Class1060199] of  Conditional_On_Screen_Message

	(label "Patient is on two sulfonylureas msg")
	(message "Patient has active prescriptions of two sulfonylureas.  Please stop one.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class1060004]))

([ATHENA_GlycemicControl_Class1070000] of  Structured_Query

	(label "StrucQ for Saxagliptin daily dose >  2.5")
	(type Medication)
	(where_restriction
		[ATHENA_GlycemicControl_Class1070001]
		[ATHENA_GlycemicControl_Class1070002]))

([ATHENA_GlycemicControl_Class1070001] of  Comparison_Filter

	(attribute [drug_name])
	(label "drug eq Saxagliptin")
	(operator eq)
	(value_expression [Saxagliptin]))

([ATHENA_GlycemicControl_Class1070002] of  Comparison_Filter

	(attribute [daily_dose])
	(label "daily dose > 2.5")
	(operator %3E)
	(value_expression [KB_063842_Class7]))

([ATHENA_GlycemicControl_Class1070003] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class780001]
		[ATHENA_GlycemicControl_Class1070004])
	(label "eGFR <45 and Saxagliptin daily dose>2.5")
	(operator AND))

([ATHENA_GlycemicControl_Class1070004] of  Query_Result_Criterion

	(label "query for Saxagliptin daily dose >  2.5")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class1070000]))

([ATHENA_GlycemicControl_Class1070005] of  Guideline_Drug

	(Absolute_Contraindications
		Pancreatitis
		ADR+anaphylaxis+to+DPP4+inhibitor
		ADR+angioedema+to+DPP4+inhibitor)
	(additional_ADR_check DIPEPTIDYL_PEPTIDASE-4_INHIBITOR)
	(collateral_actions
		[ATHENA_GlycemicControl_Class1090635]
		[ATHENA_GlycemicControl_Class1100006]
		[ATHENA_GlycemicControl_Class1100005]
		[ATHENA_GlycemicControl_Class730017]
		[ATHENA_GlycemicControl_Class730030])
	(Do_Not_Intensify_Conditions Absence+of+eGFR+in+past+year)
	(Do_Not_Start_Conditions Absence+of+eGFR+in+past+month)
	(dose_level_ranges
		[ATHENA_GlycemicControl_Class1070006]
		[ATHENA_GlycemicControl_Class1070007])
	(Drug_Class_Name Saxagliptin)
	(Drug_Partners_To_Avoid
		Alogliptin
		Linagliptin
		SITAGLIPTIN
		Vildagliptin
		Glucagon_like_peptide_1_agonist)
	(drug_usage [ATHENA_GlycemicControl_Class1070005])
	(generic_drug Saxagliptin)
	(increase_dose_ceiling 4.9)
	(is_second-line_drug_for DM-Type2)
	(label "Saxagliptin")
	(max_recommended_dose 5.1)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(Relative_Contraindications
		CCS-7.2.11.1
		Heart_failure_N
		CCS-7.2.11
		eGFR%3C45+most+recent+any+time+frame)
	(starting_dose 2.5))

([ATHENA_GlycemicControl_Class1070006] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 2.5)
	(upper_limit 4.9))

([ATHENA_GlycemicControl_Class1070007] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 4.9)
	(upper_limit 5.1))

([ATHENA_GlycemicControl_Class1070180] of  On_Screen_Message

	(label "Msg Start insulin")
	(message "If patient has severe hyperglycemia or excessive symptoms, consider starting insulin.")
	(message_type Primary_Recommendation)
	(rule_in_condition [criterion_INSTANCE_00001]))

([ATHENA_GlycemicControl_Class1070181] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class1070180])
	(label "Msg start Insulin")
	(rule_in [criterion_INSTANCE_00001]))

([ATHENA_GlycemicControl_Class1070182] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class1070181]))

([ATHENA_GlycemicControl_Class1070925] of  Variable

	(derivation_expression [ATHENA_GlycemicControl_Class1300421])
	(label "PatientChar query for drugs not at max dose")
	(string_name "query for drugs not at max dose"))

([ATHENA_GlycemicControl_Class1080000] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class1080001])
	(label "Shared Decision Making Action")
	(rule_in [criterion_INSTANCE_00001]))

([ATHENA_GlycemicControl_Class1080001] of  On_Screen_Message

	(label "Shared Decision Making Msg")
	(message "The DoD/VA Guidelines strongly recommends the shared decision making process, where the patient and family in conjunction with the provider come to an agreement about a plan of care and treatment.  Additional information available <a href=\"http://@AUTOPMWEBSERVER@/DM\nVADoD_DM_CPG_2017.pdf#page=23\"> here</a>.")
	(message_type Primary_Recommendation))

([ATHENA_GlycemicControl_Class1080002] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class1080003])
	(label "Set target HbA1c 2017")
	(rule_in [ATHENA_GlycemicControl_Instance_10032]))

([ATHENA_GlycemicControl_Class1080003] of  On_Screen_Message

	(label "Set target HbA1c 2017")
	(message "Although the VA performance measure is to attain an HbA1c<=9%, this is usually not the true target for an individual patient. The  <a href=\"http://@AUTOPMWEBSERVER@/DM/\nVADoD_DM_CPG_2017.pdf#page=35\"> Table 2 from VA 2017 DM Guidelines </a> can be used as a reference to decide an individual patient’s target.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class1080004] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class1080005]
		[ATHENA_GlycemicControl_Class1170843])
	(label "dNo Incr dose choice"))

([ATHENA_GlycemicControl_Class1080005] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class1150008])
	(followed_by [ATHENA_GlycemicControl_Class540003])
	(label "dNo incr dose")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class1080007]))

([ATHENA_GlycemicControl_Class1080006] of  Presence_Criterion

	(domain_term Non_Insulin_Related_Glucose_Reg_Agents)
	(entry_type Medication)
	(label "Absence of DM med rec incr")
	(mood Recommend_Increase)
	(presence FALSE))

([ATHENA_GlycemicControl_Class1080007] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1080006]
		[ATHENA_GlycemicControl_Class1080008]
		[ATHENA_GlycemicControl_Class230038])
	(label "Absence DM med rec inc and incr blocked")
	(operator AND))

([ATHENA_GlycemicControl_Class1080008] of  Presence_Criterion

	(domain_term Non_Insulin_Related_Glucose_Reg_Agents)
	(entry_type Medication)
	(label "Absence of DM med incr blocked")
	(mood Blocked_Increase)
	(presence FALSE))

([ATHENA_GlycemicControl_Class1080009] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class230035])
	(%3ATO [ATHENA_GlycemicControl_Class1080004]))

([ATHENA_GlycemicControl_Class1080010] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class1080004])
	(%3ATO [ATHENA_GlycemicControl_Class1080005]))

([ATHENA_GlycemicControl_Class1080012] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class1080005])
	(%3ATO [ATHENA_GlycemicControl_Class540003]))

([ATHENA_GlycemicControl_Class1080202] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "eGFR >=30 past month")
	(numeric_domain_term eGFR)
	(operator %3E%3D)
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 30.0))

([ATHENA_GlycemicControl_Class1080203] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1080202]
		[ATHENA_GlycemicControl_Class780001])
	(label "30<=eGFR<45 past month")
	(operator AND))

([ATHENA_GlycemicControl_Class1080204] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class80023]
		[ATHENA_GlycemicControl_Class1080205])
	(label "eGFR <30 OR eGFR>=45")
	(operator OR))

([ATHENA_GlycemicControl_Class1080205] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "eGFR>>=45 past year")
	(numeric_domain_term eGFR)
	(operator %3E%3D)
	(valid_window [ATHENA_DM_Eye_Instance_30019])
	(value 45.0))

([ATHENA_GlycemicControl_Class1080206] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 1.25)
	(upper_limit 2.5))

([ATHENA_GlycemicControl_Class1080207] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 2.5)
	(upper_limit 2.6))

([ATHENA_GlycemicControl_Class1090000] of  Structured_Query

	(label "find angioedema as ADR to DPP4 inhibitor")
	(type Adverse_Reaction)
	(where_restriction
		[library_Class130002]
		[ATHENA_GlycemicControl_Class1090638]))

([ATHENA_GlycemicControl_Class1090001] of  Query_Result_Criterion

	(label "angioedema as ADR to DPP4 inhibitor")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class1090000]))

([ATHENA_GlycemicControl_Class1090003] of  Conditional_On_Screen_Message

	(label "DPP4 saxagkuotun missing eGFR past month")
	(message "Saxagliptin could not be evaluated because there is no GFR measurement in the last month")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class400001]))

([ATHENA_GlycemicControl_Class1090004] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class1080002]))

([ATHENA_GlycemicControl_Class1090005] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class1080000]))

([ATHENA_GlycemicControl_Class1090424] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class1090425])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class1090425] of  On_Screen_Message

	(label "Metformin XL")
	(message "Consider Metformin XL if patient has GI symptoms or if patient has difficulty tolerating Metformin.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class1090635] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class1090636])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class1090636] of  On_Screen_Message

	(label "Sax dose adjustment")
	(message "Saxagliptin requires dosage adjustment for renal impairment and if taken concurrently with a strong CYP3A4/5 inhibitor")
	(message_type Primary_Recommendation))

([ATHENA_GlycemicControl_Class1090637] of  Structured_Query

	(label "find anaphylaxis as ADR to DPP4 Inhibitor")
	(type Adverse_Reaction)
	(where_restriction
		[ATHENA_GlycemicControl_Class690001]
		[ATHENA_GlycemicControl_Class1090638]))

([ATHENA_GlycemicControl_Class1090638] of  Comparison_Filter

	(attribute [substance])
	(label "substance is subclass of DPP4")
	(operator subclass_of)
	(value_expression [DIPEPTIDYL_PEPTIDASE-4_INHIBITOR]))

([ATHENA_GlycemicControl_Class1090639] of  Query_Result_Criterion

	(label "anaphylaxis as ADR to DPP4 inhibitor")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class1090637]))

([ATHENA_GlycemicControl_Class1090641] of  Presence_Criterion

	(domain_term Saxagliptin)
	(entry_type Medication)
	(label "Absence of Sax rec add")
	(mood Recommend_Add)
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class1090642] of  Presence_Criterion

	(domain_term Saxagliptin)
	(entry_type Medication)
	(label "Absence of Sax blocked add")
	(mood Blocked_Add)
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class1090644] of  Presence_Criterion

	(domain_term Oral_Hypoglycemic_Agent)
	(entry_type Medication)
	(label "Absence of oral hypoglycemic agent rec add")
	(mood Recommend_Add)
	(presence FALSE))

([ATHENA_GlycemicControl_Class1090645] of  Presence_Criterion

	(domain_term Oral_Hypoglycemic_Agent)
	(entry_type Medication)
	(label "Absence of oral hypglycemic agent blocked add")
	(mood Blocked_Add)
	(presence FALSE))

([ATHENA_GlycemicControl_Class1090646] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1090644]
		[ATHENA_GlycemicControl_Class1090645])
	(label "Absence of oral hypoglycemic agent rec add AND blocked add")
	(operator AND))

([ATHENA_GlycemicControl_Class110000] of  Conditional_Goal

	(criterion_to_achieve [ATHENA_GlycemicControl_Class270601])
	(label "Absence of target HbA1c, set dashboard target (HbA1c<=9 OR Glycohemoglobin<=11)")
	(selection_criterion [ATHENA_GlycemicControl_Instance_10032]))

([ATHENA_GlycemicControl_Class1100000] of  Comparison_Filter

	(attribute [drug_name])
	(label "drug name eq Empagliflozin")
	(operator eq)
	(value_expression [Empagliflozin]))

([ATHENA_GlycemicControl_Class1100001] of  Comparison_Filter

	(attribute [drug_name])
	(label "drug name eq glipizide XL")
	(operator eq)
	(value_expression [GLIPIZIDE_XL]))

([ATHENA_GlycemicControl_Class1100002] of  Comparison_Filter

	(attribute [drug_name])
	(label "drug name is subclass of Biguanide")
	(operator subclass_of)
	(value_expression [BIGUANIDE]))

([ATHENA_GlycemicControl_Class1100003] of  N_aryFilter

	(filters
		[ATHENA_GlycemicControl_Class880001]
		[ATHENA_GlycemicControl_Class1100001]
		[ATHENA_GlycemicControl_Class1070001]
		[ATHENA_GlycemicControl_Class1100000]
		[ATHENA_GlycemicControl_Class1100002]
		[ATHENA_GlycemicControl_Class1210000])
	(label "drug name is MF, MFXL, glip, glipXL, Saxa, empa, pio")
	(operator OR))

([ATHENA_GlycemicControl_Class1100004] of  Conditional_On_Screen_Message

	(label "DPP4 saxagliptin missing eGFR past year")
	(message "Saxagliptin could not be evaluated because there is no GFR measurement in the last year.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class530008]))

([ATHENA_GlycemicControl_Class1100005] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class1090003])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class1100006] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class1100004])
	(mood Blocked_Increase))

([ATHENA_GlycemicControl_Class1100007] of  Conditional_On_Screen_Message

	(label "ALERT:  on MF and 30<=eGFR<45")
	(message "Patient's eGFR is now betwen 30 and 45.  Please assess the risks and benefits of continuing treatment.  We recommend monitoring eGFR every 3-4 months.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class1120002]))

([ATHENA_GlycemicControl_Class110003] of  PAL_Criterion

	(case_variable "$patient_id")
	(label "Metformin contraindicated")
	(PAL_constraint [ATHENA_GlycemicControl_Class120008]))

([ATHENA_GlycemicControl_Class110004] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class5])
	(%3ATO [ATHENA_GlycemicControl_Class90036]))

([ATHENA_GlycemicControl_Class110005] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class5])
	(%3ATO [ATHENA_GlycemicControl_Class100006]))

([ATHENA_GlycemicControl_Class110006] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class90000]
		[ATHENA_GlycemicControl_Class120001]
		[ATHENA_GlycemicControl_Class120323]
		[ATHENA_GlycemicControl_Class210133]
		[ATHENA_GlycemicControl_Class210136])
	(label "metformin not contraindicated or glipizine contraindicated or Sulfonylurea 2nd gen being used OR presence of contraindication to active med")
	(operator OR))

([ATHENA_GlycemicControl_Class1110000] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class1110001])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class1110001] of  On_Screen_Message

	(label "TZD CYP2C8 warning")
	(message "Caution when prescribing in presence of an inhibitor of CYP2C8 (e.g. gemfibrozil) or an inducer of CYP2C8 (e.g. rifampin)")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class1110002] of  Guideline_Drug

	(Absolute_Contraindications
		Pres+Emp+and+eGFR%3C45+past+year
		Abs+Empa+and+eGFR%3C45+past+30+days
		ADR+anaphylaxis+to+SGLT2+inhibitor)
	(additional_ADR_check
		Canagliflozin
		Dapagliflozin)
	(collateral_actions
		[ATHENA_GlycemicControl_Class1330000]
		[ATHENA_GlycemicControl_Class1330002])
	(Do_Not_Intensify_Conditions Absence+of+eGFR+in+past+year)
	(Do_Not_Start_Conditions Absence+of+eGFR+in+past+month)
	(dose_level_ranges
		[ATHENA_GlycemicControl_Class1110003]
		[ATHENA_GlycemicControl_Class1120004]
		[ATHENA_GlycemicControl_Class1120005])
	(Drug_Class_Name Empagliflozin)
	(Drug_Partners_To_Avoid
		Canagliflozin
		Dapagliflozin)
	(drug_usage [ATHENA_GlycemicControl_Class1110002])
	(generic_drug Empagliflozin)
	(increase_dose_ceiling 24.9)
	(is_second-line_drug_for DM-Type2)
	(label "Empagliflozin")
	(max_recommended_dose 25.1)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(Relative_Indications CVD_DM)
	(starting_dose 10.0))

([ATHENA_GlycemicControl_Class1110003] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 9.9)
	(upper_limit 24.0))

([ATHENA_GlycemicControl_Class1110004] of  Comparison_Filter

	(attribute [drug_name])
	(label "drug name is subclass of TZD")
	(operator subclass_of)
	(value_expression [THIAZOLIDINEDIONES]))

([ATHENA_GlycemicControl_Class1110005] of  N_aryFilter

	(filters [ATHENA_GlycemicControl_Class1100003])
	(label "NOT drug name is MF, MFXL, glip, glipXL, Saxa, empa, pio")
	(operator NOT))

([ATHENA_GlycemicControl_Class1110006] of  Structured_Query

	(attribute [drug_name])
	(label "Encoded DM meds")
	(type Medication)
	(where_restriction [ATHENA_GlycemicControl_Class1100003]))

([ATHENA_GlycemicControl_Class1110007] of  Structured_Query

	(attribute [drug_name])
	(label "Not encoded DM meds")
	(type Medication)
	(where_restriction [ATHENA_GlycemicControl_Class1110496]))

([ATHENA_GlycemicControl_Class1110008] of  Variable

	(derivation_expression [ATHENA_GlycemicControl_Class1110006])
	(label "PatientChar Encoded DM drug")
	(string_name "?Encoded_DM_drug"))

([ATHENA_GlycemicControl_Class1110248] of  Variable

	(derivation_expression [ATHENA_GlycemicControl_Class1110007])
	(label "PatientChar ?Not_Encoded_DM_drug")
	(string_name "?Not_Encoded_DM_drug"))

([ATHENA_GlycemicControl_Class1110495] of  Comparison_Filter

	(attribute [drug_name])
	(label "drug is non-insulin DM med")
	(operator subclass_of)
	(value_expression [Non_Insulin_Related_Glucose_Reg_Agents]))

([ATHENA_GlycemicControl_Class1110496] of  N_aryFilter

	(filters
		[ATHENA_GlycemicControl_Class1110005]
		[ATHENA_GlycemicControl_Class1110495])
	(label "DM med and not encoded")
	(operator AND))

([ATHENA_GlycemicControl_Class1120000] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "eGFR >=30 past year")
	(numeric_domain_term eGFR)
	(operator %3E%3D)
	(valid_window [ATHENA_DM_Eye_Instance_30019])
	(value 30.0))

([ATHENA_GlycemicControl_Class1120001] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "eGFR<45 past year")
	(numeric_domain_term eGFR)
	(operator %3C)
	(valid_window [ATHENA_DM_Eye_Instance_30019])
	(value 45.0))

([ATHENA_GlycemicControl_Class1120002] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1120000]
		[ATHENA_GlycemicControl_Class1120001])
	(label "30<=eGFR<45 past year")
	(operator AND))

([ATHENA_GlycemicControl_Class1120004] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 24.1)
	(upper_limit 25.1))

([ATHENA_GlycemicControl_Class1120005] of  Range_Mapping_Entry
)

([ATHENA_GlycemicControl_Class1130000] of  On_Screen_Message

	(label "Msg No recs; Link to other DM drugs")
	(message "Cannot recommend metformin, glipizide, pioglitazone, saxagliptin or, if CVD present, empaglifozin.  Please consider other <a href=\"http://@AUTOPMWEBSERVER@/DM/\nVADoD_DM_CPG_2017.pdf#page=83\"> drugs from Appendix B of the VA 2017 DM Guidelines </a> .")
	(message_type Primary_Recommendation)
	(rule_in_condition [criterion_INSTANCE_00001]))

([ATHENA_GlycemicControl_Class1130002] of  On_Screen_Message

	(label "Msg Drug not at max dose but cannot increase dose")
	(message "Drug is not at max dose but cannot increase dose.")
	(message_type Recommendation)
	(rule_in_condition [criterion_INSTANCE_00001]))

([ATHENA_GlycemicControl_Class1130006] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "eGFR<30 most recent any time frame")
	(numeric_domain_term eGFR)
	(operator %3C)
	(value 30.0))

([ATHENA_GlycemicControl_Class1130007] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "eGFR<60 past month")
	(numeric_domain_term eGFR)
	(operator %3C)
	(valid_window [time%3AINSTANCE_2])
	(value 60.0))

([ATHENA_GlycemicControl_Class1130008] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1120000]
		[ATHENA_GlycemicControl_Class1130009])
	(label "30<=eGFR<60 past year")
	(operator AND))

([ATHENA_GlycemicControl_Class1130009] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "eGFR < 60 past year")
	(numeric_domain_term eGFR)
	(operator %3C)
	(valid_window [ATHENA_DM_Eye_Instance_30019])
	(value 60.0))

([ATHENA_GlycemicControl_Class1130011] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "egfr<45 most recent any time frame")
	(numeric_domain_term eGFR)
	(operator %3C)
	(value 45.0))

([ATHENA_GlycemicControl_Class1140000] of  Action_Choice

	(followed_by [ATHENA_GlycemicControl_Class1140010])
	(label "Can NOT make recs")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class1380001]))

([ATHENA_GlycemicControl_Class1140001] of  Query_Result_Criterion

	(label "Query for not encoded DM meds")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class1110007]))

([ATHENA_GlycemicControl_Class1140002] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class540040]
		[ATHENA_GlycemicControl_Class230008])
	(label "Can Intensify or Sub"))

([ATHENA_GlycemicControl_Class1140003] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class540041])
	(%3ATO [ATHENA_GlycemicControl_Class1160262]))

([ATHENA_GlycemicControl_Class1140004] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class1160262])
	(%3ATO [ATHENA_GlycemicControl_Class1140002]))

([ATHENA_GlycemicControl_Class1140005] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class1140002])
	(%3ATO [ATHENA_GlycemicControl_Class540040]))

([ATHENA_GlycemicControl_Class1140007] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class550006])
	(%3ATO [ATHENA_GlycemicControl_Class1160262]))

([ATHENA_GlycemicControl_Class1140009] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class540041])
	(%3ATO [ATHENA_GlycemicControl_Class1140000]))

([ATHENA_GlycemicControl_Class1140010] of  Choice_Step

	(branches [ATHENA_GlycemicControl_Class1140011])
	(label "Can Not Intensify or Sub"))

([ATHENA_GlycemicControl_Class1140011] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class810214])
	(label "On DM med not encoded")
	(strict_rule_in_condition [criterion_INSTANCE_00001]))

([ATHENA_GlycemicControl_Class1140013] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class1140010])
	(%3ATO [ATHENA_GlycemicControl_Class1140011]))

([ATHENA_GlycemicControl_Class1140014] of  On_Screen_Message

	(label "Msg Patient on DM drug not encoded.")
	(message "Patient is on a drug that we have not evaluated.  We therefore cannot make recommendations.  Please consult <a href=\"http://@AUTOPMWEBSERVER@/DM/\nVADoD_DM_CPG_2017.pdf#page=83\">  Appendix B of the VA 2017 DM Guidelines </a> . for recommendations.")
	(message_type Primary_Recommendation)
	(rule_in_condition [criterion_INSTANCE_00001]))

([ATHENA_GlycemicControl_Class1140222] of  Presence_Criterion

	(domain_term Empagliflozin)
	(entry_type Medication)
	(label "Abs of Empaglifozin")
	(mood Authorized)
	(presence FALSE))

([ATHENA_GlycemicControl_Class1140223] of  Presence_Criterion

	(domain_term Empagliflozin)
	(entry_type Medication)
	(label "Pres of Empaglifozin")
	(mood Authorized)
	(presence TRUE))

([ATHENA_GlycemicControl_Class1140224] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "eGFR<30 past month")
	(numeric_domain_term eGFR)
	(operator %3C)
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 30.0))

([ATHENA_GlycemicControl_Class1140225] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1140222]
		[ATHENA_GlycemicControl_Class1140224])
	(label "Abs Empglifozin and eGFR<30 past month")
	(operator AND))

([ATHENA_GlycemicControl_Class1140228] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1140223]
		[ATHENA_GlycemicControl_Class80023])
	(label "Pres Empglifozin and eGFR<30 past year")
	(operator AND))

([ATHENA_GlycemicControl_Class1140229] of  Evaluate_Start_Activity

	(activity_class "Medication")
	(alternatives [ATHENA_GlycemicControl_Class1110002])
	(fine-grain_priority 1000)
	(label "Initiate empa")
	(recommendation_basis [is_second-line_drug_for])
	(rule_in_condition [ATHENA_GlycemicControl_Class1140230])
	(therapeutic_goal [ATHENA_GlycemicControl_Class610454]))

([ATHENA_GlycemicControl_Class1140230] of  Presence_Criterion

	(domain_term CVD_DM)
	(entry_type Note_Entry)
	(label "Presence of CVD_DM")
	(presence TRUE))

([ATHENA_GlycemicControl_Class1140231] of  Evaluate_Substitution_Activity

	(activity_class "Medication")
	(activity_spec Drug_Usage)
	(activity_spec_key [Drug_Class_Name])
	(activity_to_stop [ATHENA_GlycemicControl_Class760000])
	(alternatives [ATHENA_GlycemicControl_Class1110002])
	(fine-grain_priority 1000)
	(label "dEvaluate sub Empa")
	(recommendation_basis [is_second-line_drug_for])
	(rule_in_condition [ATHENA_GlycemicControl_Class1180001]))

([ATHENA_GlycemicControl_Class1150000] of  Conditional_On_Screen_Message

	(label "empa + egfr<45")
	(message "Empagliflozin should be discontinued in patients with eGFR persistently less than 45.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class1150001]))

([ATHENA_GlycemicControl_Class1150001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1140223]
		[ATHENA_GlycemicControl_Class1120001])
	(label "Pres empa and eGFR<45 past year")
	(operator AND))

([ATHENA_GlycemicControl_Class1150002] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class1150000])
	(mood Authorized))

([ATHENA_GlycemicControl_Class1150003] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class300001]
		[ATHENA_GlycemicControl_Class80023])
	(label "Pres glyburide and eGFR<30 past year")
	(operator AND))

([ATHENA_GlycemicControl_Class1150004] of  Presence_Criterion

	(domain_term GLYBURIDE)
	(entry_type Medication)
	(label "Abs glyburide")
	(mood Authorized)
	(presence FALSE))

([ATHENA_GlycemicControl_Class1150005] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1150004]
		[ATHENA_GlycemicControl_Class1140224])
	(label "Abs glyb and eGFR<30 past month")
	(operator AND))

([ATHENA_GlycemicControl_Class1150008] of  Parameterized_Message

	(label "Param msg for drug not at max dose")
	(message_type Recommendation)
	(parameterized_message [ATHENA_GlycemicControl_Class1150009])
	(rule_in_condition [ATHENA_GlycemicControl_Class1260000]))

([ATHENA_GlycemicControl_Class1150009] of  Parameterized_String

	(label "drug not at max dose")
	(value "Patient is on a DM drug ?notMaxDose that is not at the maximum dose, but we canoot increase dose.  Evaluating adding drug.")
	(variables [ATHENA_GlycemicControl_Class1150010]))

([ATHENA_GlycemicControl_Class1150010] of  Variable

	(derivation_expression [ATHENA_GlycemicControl_Class1070925])
	(label "?notMaxDose")
	(string_name "?notMaxDose"))

([ATHENA_GlycemicControl_Class1150234] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 2.5)
	(upper_limit 20.0))

([ATHENA_GlycemicControl_Class1160000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1140222]
		[ATHENA_GlycemicControl_Class780001])
	(label "Abs Empa and eGFR<45 past month")
	(operator AND))

([ATHENA_GlycemicControl_Class1160001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1140223]
		[ATHENA_GlycemicControl_Class1120001])
	(label "Pres Emp and eGFR<45 past year")
	(operator AND))

([ATHENA_GlycemicControl_Class1160004] of  Presence_Criterion

	(domain_term Dialysis)
	(entry_type Procedure)
	(label "Pres dialysis")
	(presence TRUE))

([ATHENA_GlycemicControl_Class1160006] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "HbA1c>10 past year")
	(numeric_domain_term HbA1C)
	(operator %3E)
	(valid_window [ATHENA_DM_Eye_Instance_30019])
	(value 10.0))

([ATHENA_GlycemicControl_Class1160007] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "HbA1c<7 past year")
	(numeric_domain_term HbA1C)
	(operator %3C)
	(valid_window [ATHENA_DM_Eye_Instance_30019])
	(value 7.0))

([ATHENA_GlycemicControl_Class1160008] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1160007]
		[ATHENA_GlycemicControl_Class1160006])
	(label "HbA1c<7 or HbA1c>10 past year")
	(operator OR))

([ATHENA_GlycemicControl_Class1160262] of  Action_Choice

	(followed_by [ATHENA_GlycemicControl_Class1140002])
	(label "Can make recs")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class1380000]))

([ATHENA_GlycemicControl_Class1160263] of  Query_Result_Criterion

	(label "Query for Encoded DM meds")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class1110006]))

([ATHENA_GlycemicControl_Class1170000] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class1170001])
	(mood Authorized))

([ATHENA_GlycemicControl_Class1170001] of  Conditional_On_Screen_Message

	(label "on TZD with HF")
	(message "ALERT:  Patient has dx of HF, but appears to be tolerating TZD.  Caution is advised.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class1170005]))

([ATHENA_GlycemicControl_Class1170002] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1170003]
		[ATHENA_GlycemicControl_Class1170004])
	(label "Pres CHF or HF PM")
	(operator OR))

([ATHENA_GlycemicControl_Class1170003] of  Presence_Criterion

	(domain_term CCS-7.2.11.1)
	(entry_type Note_Entry)
	(label "Pres Congestive HF")
	(presence TRUE))

([ATHENA_GlycemicControl_Class1170004] of  Presence_Criterion

	(domain_term Heart_failure_N)
	(entry_type Note_Entry)
	(label "Pres HF PM")
	(presence TRUE))

([ATHENA_GlycemicControl_Class1170005] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class120324]
		[ATHENA_GlycemicControl_Class1170002])
	(label "on TZD and Pres HF")
	(operator AND))

([ATHENA_GlycemicControl_Class1170006] of  On_Screen_Message

	(label "Follow up in 3 months if less than 3 drugs")
	(message "Follow up in 3 months.")
	(message_type Follow_Up)
	(rule_in_condition [ATHENA_GlycemicControl_Class1300001]))

([ATHENA_GlycemicControl_Class1170007] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class800002])
	(label "NOT (2 non-insuling agents and rec add new agent)")
	(operator NOT))

([ATHENA_GlycemicControl_Class1170839] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class800003]
		[ATHENA_GlycemicControl_Class1170006]
		[ATHENA_DM_GlycemicControl_Dashboard_Class60000])
	(label "Msg follow up 3 months")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class540000]))

([ATHENA_GlycemicControl_Class1170841] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class540000]
		[ATHENA_GlycemicControl_Class800007])
	(label "Pres non-insulin agent rec add or add")
	(operator OR))

([ATHENA_GlycemicControl_Class1170842] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class580148])
	(%3ATO [ATHENA_GlycemicControl_Class1170839]))

([ATHENA_GlycemicControl_Class1170843] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class210036]
		[ATHENA_DM_GlycemicControl_Dashboard_Class77592])
	(label "Msg follow up 3 months incr dose")
	(strict_rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class77594]))

([ATHENA_GlycemicControl_Class1170844] of  Presence_Criterion

	(domain_term Non_Insulin_Related_Glucose_Reg_Agents)
	(entry_type Medication)
	(label "Pres non-insulin agent rec incr")
	(mood Recommend_Increase)
	(presence TRUE))

([ATHENA_GlycemicControl_Class1170845] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class1080004])
	(%3ATO [ATHENA_GlycemicControl_Class1170843]))

([ATHENA_GlycemicControl_Class1171282] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class1140000])
	(%3ATO [ATHENA_GlycemicControl_Class1140010]))

([ATHENA_GlycemicControl_Class1180000] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class230008])
	(%3ATO [ATHENA_GlycemicControl_Class720168]))

([ATHENA_GlycemicControl_Class1180001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1140230]
		[ATHENA_GlycemicControl_Class1140222])
	(label "Abs of Empa and Pres CVD_DM")
	(operator AND))

([ATHENA_GlycemicControl_Class1181526] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 20.0)
	(upper_limit 20.2))

([ATHENA_GlycemicControl_Class1181527] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 2.5)
	(upper_limit 19.9))

([ATHENA_GlycemicControl_Class1181956] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class210036]
		[ATHENA_DM_GlycemicControl_Dashboard_Class60000])
	(label "Follow up msg sub")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class540024]))

([ATHENA_GlycemicControl_Class1181957] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class720168])
	(%3ATO [ATHENA_GlycemicControl_Class1181956]))

([ATHENA_GlycemicControl_Class1190000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210014]
		[ATHENA_GlycemicControl_Class1000007])
	(label "NOT at target and Absence of bad drug partner")
	(operator AND))

([ATHENA_GlycemicControl_Class1190001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210131]
		[ATHENA_GlycemicControl_Class230038])
	(label "drug at max dose and not contraindicated")
	(operator AND))

([ATHENA_GlycemicControl_Class1190002] of  Structured_Query

	(attribute [drug_name])
	(label "drug not contraindicated - do not use")
	(type Medication)
	(where_restriction [eon2_Class80006]))

([ATHENA_GlycemicControl_Class1190003] of  Query_Result_Criterion

	(label "query for not contraindicated med - do not use")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class1190002]))

([ATHENA_GlycemicControl_Class120000] of  Management_Diagram

	(label "Glycemic Control Dashboard")
	(steps
		[ATHENA_GlycemicControl_Class130001]
		[ATHENA_GlycemicControl_Class130002]
		[ATHENA_GlycemicControl_Instance_10018]
		[ATHENA_GlycemicControl_Class130006]
		[ATHENA_GlycemicControl_Class5]
		[ATHENA_GlycemicControl_Instance_50008]
		[ATHENA_GlycemicControl_Class130003]
		[ATHENA_GlycemicControl_Class7]
		[ATHENA_GlycemicControl_Class22]
		[ATHENA_GlycemicControl_Instance_130784]
		[ATHENA_GlycemicControl_Class130008]
		[ATHENA_GlycemicControl_Class130010]
		[ATHENA_GlycemicControl_Class8]
		[ATHENA_GlycemicControl_Class130012]
		[ATHENA_GlycemicControl_Class9]
		[ATHENA_GlycemicControl_Class150003]
		[ATHENA_GlycemicControl_Class150002]
		[ATHENA_GlycemicControl_Class150004]
		[ATHENA_GlycemicControl_Class150015]
		[ATHENA_GlycemicControl_Class200001]
		[ATHENA_GlycemicControl_Class200000]
		[ATHENA_GlycemicControl_Class200292])
	(transitions
		[ATHENA_GlycemicControl_Class130014]
		[ATHENA_GlycemicControl_Class130015]
		[ATHENA_GlycemicControl_Class130017]
		[ATHENA_GlycemicControl_Class130021]
		[ATHENA_GlycemicControl_Class130023]
		[ATHENA_GlycemicControl_Class130025]
		[ATHENA_GlycemicControl_Class130034]
		[ATHENA_GlycemicControl_Class130035]
		[ATHENA_GlycemicControl_Class130036]
		[ATHENA_GlycemicControl_Class130037]
		[ATHENA_GlycemicControl_Class130042]
		[ATHENA_GlycemicControl_Class130043]
		[ATHENA_GlycemicControl_Class130044]
		[ATHENA_GlycemicControl_Class130048]
		[ATHENA_GlycemicControl_Class150005]
		[ATHENA_GlycemicControl_Class150007]
		[ATHENA_GlycemicControl_Class150008]
		[ATHENA_GlycemicControl_Class150009]
		[ATHENA_GlycemicControl_Class150011]
		[ATHENA_GlycemicControl_Class150012]
		[ATHENA_GlycemicControl_Class150013]
		[ATHENA_GlycemicControl_Class150017]
		[ATHENA_GlycemicControl_Class150018]
		[ATHENA_GlycemicControl_Class150019]
		[ATHENA_GlycemicControl_Class200002]
		[ATHENA_GlycemicControl_Class200004]
		[ATHENA_GlycemicControl_Class200005]
		[ATHENA_GlycemicControl_Class200006]
		[ATHENA_GlycemicControl_Class200007]
		[ATHENA_GlycemicControl_Class200149]
		[ATHENA_GlycemicControl_Class200293]
		[ATHENA_GlycemicControl_Class200294]
		[ATHENA_GlycemicControl_Class200295]))

([ATHENA_GlycemicControl_Class1200000] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class1170001])
	(label "On TZD and Pres HF msg")
	(rule_in [ATHENA_GlycemicControl_Class1170005]))

([ATHENA_GlycemicControl_Class1200001] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class1200000]))

([ATHENA_GlycemicControl_Class120001] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class110003])
	(label "Metformin NOT contraindicated")
	(operator NOT))

([ATHENA_GlycemicControl_Class120002] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class120006])
	(label "Add TZD, Metformin and Glipizide contraindicated")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Instance_130679])
	(strict_rule_out_condition [ATHENA_GlycemicControl_Class120003]))

([ATHENA_GlycemicControl_Class120003] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class120001]
		[ATHENA_GlycemicControl_Class120004]
		[ATHENA_GlycemicControl_Class120005]
		[ATHENA_GlycemicControl_Class120324]
		[KB_987250_Class2])
	(label "TZD contraindicated OR Glipizide NOT contraindicated OR metformin NOT contraindicated OR TZD being used OR there exists a contraindicated active drug")
	(operator OR))

([ATHENA_GlycemicControl_Class120004] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class90000])
	(label "Glipizide NOT contraindicated")
	(operator NOT))

([ATHENA_GlycemicControl_Class120005] of  PAL_Criterion

	(case_variable "$patient_id")
	(label "TZD contraindicated")
	(PAL_constraint [ATHENA_GlycemicControl_Class120009]))

([ATHENA_GlycemicControl_Class120006] of  Start_Activity

	(activity [ATHENA_GlycemicControl_Instance_50026])
	(label "Add TZD"))

([ATHENA_GlycemicControl_Class120007] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class5])
	(%3ATO [ATHENA_GlycemicControl_Class120002]))

([ATHENA_GlycemicControl_Class120008] of  %3APAL-CONSTRAINT

	(%3APAL-NAME "Metformin contraindicated")
	(%3APAL-RANGE "(defrange ?condition :FRAME Note_Entry)\n(defrange ?problem :FRAME Medical_Conditions_Metaclass)\n(defrange ?derived_problem :FRAME Diagnostic_Term_Metaclass)\n(defrange ?drug_usage :FRAME Drug_Usage)")
	(%3APAL-STATEMENT "(forall ?drug_usage\n        (=> (Drug_Class_Name ?drug_usage BIGUANIDE)\n            (or (exists ?condition \n                        (and (patient_id ?condition $patient_id)\n                             (exists ?problem \n                                     (and (Absolute_Contraindications ?drug_usage ?problem)\n                                          (is-class (domain_term ?condition))\n                                          (or (= (coerce-to-class (domain_term ?condition)) ?problem )\n                                              (equal-or-subclass-of (coerce-to-class (domain_term ?condition)) ?problem )) \n                                     ))))\n                (exists  ?derived_problem \n                         (and (Absolute_Contraindications ?drug_usage ?derived_problem)\n                              (is-derivable ?derived_problem))))\n        )\n)"))

([ATHENA_GlycemicControl_Class120009] of  %3APAL-CONSTRAINT

	(%3APAL-NAME "TZD contraindicated")
	(%3APAL-RANGE "(defrange ?condition :FRAME Note_Entry)\n(defrange ?problem :FRAME Medical_Conditions_Metaclass)\n(defrange ?derived_problem :FRAME Diagnostic_Term_Metaclass)\n(defrange ?drug_usage :FRAME Drug_Usage)")
	(%3APAL-STATEMENT "(forall ?drug_usage\n        (=> (Drug_Class_Name ?drug_usage THIAZOLIDINEDIONES)\n            (or (exists ?condition \n                        (and (patient_id ?condition $patient_id)\n                             (exists ?problem \n                                     (and (Absolute_Contraindications ?drug_usage ?problem)\n                                          (isa-classname (domain_term ?condition))\n                                          (or (= (coerce-to-class (domain_term ?condition)) ?problem )\n                                              (subclass-of (coerce-to-class (domain_term ?condition)) ?problem )) \n                                     ))))\n                (exists  ?derived_problem \n                         (and (Absolute_Contraindications ?drug_usage ?derived_problem)\n                              (is-derivable ?derived_problem))))\n        )\n)"))

([ATHENA_GlycemicControl_Class120319] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class8])
	(%3ATO [ATHENA_GlycemicControl_Instance_50008]))

([ATHENA_GlycemicControl_Class120321] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class110003]
		[ATHENA_GlycemicControl_Class120322]
		[KB_987250_Class2])
	(label "Metformin contraindicated or being used OR there is a contraindicated active drug")
	(operator OR))

([ATHENA_GlycemicControl_Class120322] of  Presence_Criterion

	(domain_term BIGUANIDE)
	(entry_type Medication)
	(label "Biguanide being used")
	(mood Authorized)
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class120323] of  Presence_Criterion

	(domain_term SULFONYLUREAS_2NDGEN)
	(entry_type Medication)
	(label "Sulfonylurea 2nd generation being used or contraindicated")
	(mood Authorized)
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class120324] of  Presence_Criterion

	(domain_term THIAZOLIDINEDIONES)
	(entry_type Medication)
	(label "TZD being used")
	(mood Actual)
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class120325] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Instance_130309])
	(%3ATO [ATHENA_GlycemicControl_Class90036]))

([ATHENA_GlycemicControl_Class120326] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Instance_130309])
	(%3ATO [ATHENA_GlycemicControl_Class100006]))

([ATHENA_GlycemicControl_Class120327] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Instance_130309])
	(%3ATO [ATHENA_GlycemicControl_Class120002]))

([ATHENA_GlycemicControl_Class120328] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class8])
	(%3ATO [ATHENA_GlycemicControl_Class90036]))

([ATHENA_GlycemicControl_Class120329] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class8])
	(%3ATO [ATHENA_GlycemicControl_Class100006]))

([ATHENA_GlycemicControl_Class120330] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class8])
	(%3ATO [ATHENA_GlycemicControl_Class120002]))

([ATHENA_GlycemicControl_Class1210000] of  Comparison_Filter

	(attribute [drug_name])
	(label "drug eq pio")
	(operator eq)
	(value_expression [PIOGLITAZONE]))

([ATHENA_GlycemicControl_Class1210001] of  Action_Choice

	(actions [KB_308520_Class2])
	(followed_by [ATHENA_GlycemicControl_Class1210003])
	(label "Rec 1st line")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class140001]))

([ATHENA_GlycemicControl_Class1210002] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class540028])
	(%3ATO [ATHENA_GlycemicControl_Class1210001]))

([ATHENA_GlycemicControl_Class1210003] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class1210005]
		[ATHENA_GlycemicControl_Class1210012])
	(label "No MF"))

([ATHENA_GlycemicControl_Class1210004] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class1210001])
	(%3ATO [ATHENA_GlycemicControl_Class1210003]))

([ATHENA_GlycemicControl_Class1210005] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class1210006]
		[ATHENA_GlycemicControl_Class1140229])
	(followed_by [ATHENA_GlycemicControl_Class1210009])
	(label "No meds Rec rest")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class1210007]))

([ATHENA_GlycemicControl_Class1210006] of  Evaluate_Start_Activity

	(activity_class "Medication")
	(alternatives
		[ATHENA_GlycemicControl_Class60000]
		[ATHENA_GlycemicControl_Class1070005]
		[ATHENA_GlycemicControl_Instance_50026])
	(fine-grain_priority 1000)
	(label "Initiate glip, Saxa, TZD")
	(recommendation_basis [is_second-line_drug_for])
	(therapeutic_goal [ATHENA_GlycemicControl_Class610454]))

([ATHENA_GlycemicControl_Class1210007] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class960005]
		[ATHENA_GlycemicControl_Class600010])
	(label "Abs biguanide rec add and blocked add")
	(operator AND))

([ATHENA_GlycemicControl_Class1210008] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class1210003])
	(%3ATO [ATHENA_GlycemicControl_Class1210005]))

([ATHENA_GlycemicControl_Class1210009] of  Choice_Step

	(branches
		[ATHENA_DM_GlycemicControl_Dashboard_Class60002]
		[ATHENA_GlycemicControl_Class540037])
	(label "No meds, No recs"))

([ATHENA_GlycemicControl_Class1210010] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class1210005])
	(%3ATO [ATHENA_GlycemicControl_Class1210009]))

([ATHENA_GlycemicControl_Class1210011] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class1210009])
	(%3ATO [ATHENA_GlycemicControl_Class540037]))

([ATHENA_GlycemicControl_Class1210012] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class210036])
	(label "MF rec F/U")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class1210013]))

([ATHENA_GlycemicControl_Class1210013] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class1210007])
	(label "Pres biguanide rec add OR Pres biguanide blocked add")
	(operator NOT))

([ATHENA_GlycemicControl_Class1210014] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class1210003])
	(%3ATO [ATHENA_GlycemicControl_Class1210012]))

([ATHENA_GlycemicControl_Class1210016] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class540023])
	(%3ATO [ATHENA_GlycemicControl_Class580148]))

([ATHENA_GlycemicControl_Class1220000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1040003]
		[ATHENA_GlycemicControl_Class1080203])
	(label "Abs Biguanide and 30<=eGFR<45 in past month")
	(operator AND))

([ATHENA_GlycemicControl_Class1220001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class60010]
		[ATHENA_GlycemicControl_Class1120002])
	(label "Pres biguanide and 30<=3GFR<45 past year")
	(operator AND))

([ATHENA_GlycemicControl_Class1220004] of  Conditional_On_Screen_Message

	(label "Patient on two Biguanide")
	(message "Patient has active prescriptions of 2 biguanides (Metformin and Metformin Extended Release).  Please stop one.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class1220005]))

([ATHENA_GlycemicControl_Class1220005] of  Numeric_Term_Criterion

	(aggregation_operator count)
	(entry_type Medication)
	(label "count Biguanide gt 1")
	(numeric_domain_term BIGUANIDE)
	(operator %3E)
	(value 1.0))

([ATHENA_GlycemicControl_Class1220006] of  Conditional_On_Screen_Message

	(label "Pres glip and glipXL")
	(message "Patient has active prescription of glipizide and glipizide XL.  Plese stop one.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class1220007]))

([ATHENA_GlycemicControl_Class1220007] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1000006]
		[ATHENA_GlycemicControl_Class1220008])
	(label "Pres glip and glipXL")
	(operator AND))

([ATHENA_GlycemicControl_Class1220008] of  Presence_Criterion

	(domain_term GLIPIZIDE_XL)
	(entry_type Medication)
	(label "Pres glipXL")
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class1220009] of  Conditional_On_Screen_Message

	(label "count TZD gt 1")
	(message "Patient ihas active prescription of two TZDs.  Please stop one.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class1220010]))

([ATHENA_GlycemicControl_Class1220010] of  Numeric_Term_Criterion

	(aggregation_operator count)
	(entry_type Medication)
	(label "count TZD gt 1")
	(numeric_domain_term THIAZOLIDINEDIONES)
	(operator %3E)
	(value 1.0))

([ATHENA_GlycemicControl_Class1220011] of  Conditional_On_Screen_Message

	(label "count SGLT2 inhibitors gt 1")
	(message "Patient has active prescriptions of two SGLT2 inhibitors.  Plese stop one.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class1220012]))

([ATHENA_GlycemicControl_Class1220012] of  Numeric_Term_Criterion

	(aggregation_operator count)
	(entry_type Medication)
	(label "count SGLT2 inhibitors gt 1")
	(numeric_domain_term SGLT2_Inhibitor)
	(operator %3E)
	(value 1.0))

([ATHENA_GlycemicControl_Class1220013] of  Conditional_On_Screen_Message

	(label "count DPP4 inhibitor gt 1")
	(message "Patient has active prescriptions of two DPP4 inhibitors.  Please stop one.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class1220014]))

([ATHENA_GlycemicControl_Class1220014] of  Numeric_Term_Criterion

	(aggregation_operator count)
	(entry_type Medication)
	(label "count DPP4 inhibitors gt 1")
	(numeric_domain_term DIPEPTIDYL_PEPTIDASE-4_INHIBITOR)
	(operator %3E)
	(value 1.0))

([ATHENA_GlycemicControl_Class1230000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1230001]
		[ATHENA_GlycemicControl_Class360003])
	(label "Pres of DM-1 and Abs of DM-2")
	(operator AND))

([ATHENA_GlycemicControl_Class1230001] of  Presence_Criterion

	(domain_term Diabetes-Mellitus-Type1)
	(entry_type Note_Entry)
	(label "Pres of DM-1")
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class1230002] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class1230000])
	(label "NOT (Pres of DM-1 and Abs of DM-2)")
	(operator NOT))

([ATHENA_GlycemicControl_Class1240000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1130009]
		[ATHENA_GlycemicControl_Class1080205])
	(label "45<=eGFR<60 past year")
	(operator AND))

([ATHENA_GlycemicControl_Class1240001] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "eGFR>=45 past month")
	(numeric_domain_term eGFR)
	(operator %3E%3D)
	(valid_window [time%3AINSTANCE_2])
	(value 45.0))

([ATHENA_GlycemicControl_Class1240002] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1240001]
		[ATHENA_GlycemicControl_Class1130007])
	(label "45<=eGFR<60 past month")
	(operator AND))

([ATHENA_GlycemicControl_Class1240003] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class60010]
		[ATHENA_GlycemicControl_Class1240000])
	(label "Pres of Biguanide and 45<=eGFR<60 past year")
	(operator AND))

([ATHENA_GlycemicControl_Class1240004] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1040003]
		[ATHENA_GlycemicControl_Class1240002])
	(label "Abs Biguanide and 45<=eGFR<60 past 30 days")
	(operator AND))

([ATHENA_GlycemicControl_Class1250000] of  Variable

	(derivation_expression [ATHENA_GlycemicControl_Class1060004])
	(label "PatientChar count SU gt 1")
	(string_name "coutn SU gt 1"))

([ATHENA_GlycemicControl_Class1251109] of  Variable

	(derivation_expression [ATHENA_GlycemicControl_Class1220007])
	(label "PatientChar Pres of glip and glipXL")
	(string_name "Pres of glip and glipXL"))

([ATHENA_GlycemicControl_Class1260000] of  Numeric_Term_Criterion

	(aggregation_operator count)
	(entry_type Medication)
	(label "1 or 2 non-insulin agent")
	(numeric_domain_term Non_Insulin_Related_Glucose_Reg_Agents)
	(operator %3C%3D)
	(status "active")
	(value 2.0))

([ATHENA_GlycemicControl_Class1260001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210005]
		[ATHENA_GlycemicControl_Class1270001]
		[ATHENA_GlycemicControl_Class1300004])
	(label "1 or 2 non-insulin agents & Abs insulin & Pres HbA1c or GlycHem")
	(operator AND))

([ATHENA_GlycemicControl_Class1260002] of  Scenario

	(consultation_template [ATHENA_GlycemicControl_Class780000])
	(followed_by [ATHENA_GlycemicControl_Class550006])
	(label "Scenario on One or Two encoded drugs or 3 encoded not max dose not insulin")
	(new_encounter TRUE)
	(precondition [ATHENA_DM_GlycemicControl_Dashboard_Class90345]))

([ATHENA_GlycemicControl_Class1260003] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class1260002])
	(%3ATO [ATHENA_GlycemicControl_Class550006]))

([ATHENA_GlycemicControl_Class1270000] of  Numeric_Term_Criterion

	(aggregation_operator count)
	(entry_type Medication)
	(label "gt 0 non-insuline agent")
	(numeric_domain_term Non_Insulin_Related_Glucose_Reg_Agents)
	(operator %3E)
	(status "active")
	(value 0.0))

([ATHENA_GlycemicControl_Class1270001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1260000]
		[ATHENA_GlycemicControl_Class1270000])
	(label "1 or 2 non-insulin agent gt 0")
	(operator AND))

([ATHENA_GlycemicControl_Class1280000] of  Presence_Criterion

	(domain_term insulin_syringe)
	(entry_type Medication)
	(label "Absence insulin syringe")
	(presence FALSE))

([ATHENA_GlycemicControl_Class1290000] of  Structured_Query

	(attribute [guideline_drugs])
	(label "Guideline Drugs of DM guideline")
	(type Management_Guideline)
	(where_restriction [ATHENA_GlycemicControlAlt_Class20629]))

([ATHENA_GlycemicControl_Class1290002] of  Comparison_Filter

	(label "Guideline Drug a member of Glycemic Control Guideline Drug")
	(operator member_of)
	(value_expression [ATHENA_GlycemicControl_Class1290000]))

([ATHENA_GlycemicControl_Class130000] of  Drug_Usage

	(Absolute_Contraindications
		hypoglycemia
		HbA1c_GT_9
		Absence_of_insulin_defined_concept
		HbA1c%3C6
		Gastroparesis)
	(Drug_Class_Name Pramlintide)
	(label "AMYLIN_ANALOGS")
	(Relative_Indications DM-Type2))

([ATHENA_GlycemicControl_Class1300000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class240037]
		[ATHENA_GlycemicControl_Class540000])
	(label "2 non-insulin agents and rec add drug")
	(operator AND))

([ATHENA_GlycemicControl_Class1300001] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class1300000])
	(label "NOT (2 non-insulin agents and rec add drug)")
	(operator NOT))

([ATHENA_GlycemicControl_Class1300002] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class670000])
	(%3ATO [ATHENA_GlycemicControl_Class680002]))

([ATHENA_GlycemicControl_Class1300004] of  N_ary_Criterion

	(criteria
		[ATHENA_DM_Eye_Instance_80028]
		[ATHENA_GlycemicControl_Class1280000])
	(label "Absence of insulin and insulin syringe")
	(operator AND))

([ATHENA_GlycemicControl_Class1300005] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class1300004])
	(label "Presence of insulin or insulin syringe")
	(operator NOT))

([ATHENA_GlycemicControl_Class130001] of  Scenario

	(consultation_template [ATHENA_GlycemicControl_Class160000])
	(followed_by [ATHENA_GlycemicControl_Class130002])
	(label "No HbA1c")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Instance_10019]))

([ATHENA_GlycemicControl_Class130002] of  Choice_Step

	(branches [ATHENA_GlycemicControl_Instance_10018])
	(label "Lack of lab HbA1c"))

([ATHENA_GlycemicControl_Class130003] of  Scenario

	(consultation_template [ATHENA_GlycemicControl_Class60011])
	(followed_by [ATHENA_GlycemicControl_Class7])
	(label "Monotherapy with oral agent II")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Class130004]))

([ATHENA_GlycemicControl_Class130004] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_120204]
		[ATHENA_DM_Eye_Instance_80028]
		[ATHENA_GlycemicControl_Instance_10002])
	(label "1 oral agent & presence of HbA1c & Absence of insulin")
	(operator AND))

([ATHENA_GlycemicControl_Class130005] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Instance_50008]
		[ATHENA_GlycemicControl_Class22]
		[ATHENA_GlycemicControl_Instance_70010]
		[ATHENA_GlycemicControl_Instance_130311])
	(label "DM - Oral Agents II"))

([ATHENA_GlycemicControl_Class130006] of  Scenario

	(consultation_template [ATHENA_GlycemicControl_Class80002])
	(followed_by [ATHENA_GlycemicControl_Class5])
	(label "Nonpharmacologic Therapy II")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Class130007]))

([ATHENA_GlycemicControl_Class130007] of  N_ary_Criterion

	(criteria
		[KB_308520_Class16]
		[ATHENA_GlycemicControl_Instance_10002])
	(label "Absence of pharmacologic treatment & presence of HbA1c")
	(operator AND))

([ATHENA_GlycemicControl_Class130008] of  Scenario

	(consultation_template [ATHENA_GlycemicControl_Class60011])
	(followed_by [ATHENA_GlycemicControl_Class7])
	(label "Combination therapy w/ oral agents II")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Class130009]))

([ATHENA_GlycemicControl_Class130009] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_100070]
		[ATHENA_GlycemicControl_Instance_10002]
		[ATHENA_DM_Eye_Instance_80028])
	(label ">1 oral agents and presence of HbA1c")
	(operator AND))

([ATHENA_GlycemicControl_Class130010] of  Scenario

	(consultation_template [ATHENA_GlycemicControl_Class60011])
	(followed_by [ATHENA_GlycemicControl_Class8])
	(label "Combination oral agensts/insulin therapy II")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Class130011]))

([ATHENA_GlycemicControl_Class130011] of  N_ary_Criterion

	(criteria
		[KB_308520_Class3]
		[KB_362799_Class1]
		[ATHENA_GlycemicControl_Instance_10002])
	(label "Oral agent and insul and HbA1c")
	(operator AND))

([ATHENA_GlycemicControl_Class130012] of  Scenario

	(consultation_template [ATHENA_GlycemicControl_Class80002])
	(followed_by [ATHENA_GlycemicControl_Class9])
	(label "Insulin therapy only II")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Class130013]))

([ATHENA_GlycemicControl_Class130013] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_10002]
		[ATHENA_GlycemicControl_Instance_50003]
		[KB_362799_Class1])
	(label "Insulin therapy and presence of HbA1c")
	(operator AND))

([ATHENA_GlycemicControl_Class130014] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class130001])
	(%3ATO [ATHENA_GlycemicControl_Class130002]))

([ATHENA_GlycemicControl_Class130015] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class130002])
	(%3ATO [ATHENA_GlycemicControl_Instance_10018]))

([ATHENA_GlycemicControl_Class130017] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class130006])
	(%3ATO [ATHENA_GlycemicControl_Class5]))

([ATHENA_GlycemicControl_Class130018] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class5])
	(%3ATO [ATHENA_GlycemicControl_Class90036]))

([ATHENA_GlycemicControl_Class130019] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class5])
	(%3ATO [ATHENA_GlycemicControl_Class100006]))

([ATHENA_GlycemicControl_Class130020] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class5])
	(%3ATO [ATHENA_GlycemicControl_Class120002]))

([ATHENA_GlycemicControl_Class130021] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class5])
	(%3ATO [ATHENA_GlycemicControl_Instance_50008]))

([ATHENA_GlycemicControl_Class130022] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class5])
	(%3ATO [ATHENA_GlycemicControl_Instance_70010]))

([ATHENA_GlycemicControl_Class130023] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class130003])
	(%3ATO [ATHENA_GlycemicControl_Class7]))

([ATHENA_GlycemicControl_Class130025] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class7])
	(%3ATO [ATHENA_GlycemicControl_Instance_50008]))

([ATHENA_GlycemicControl_Class130026] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class7])
	(%3ATO [ATHENA_GlycemicControl_Instance_70010]))

([ATHENA_GlycemicControl_Class130027] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class7])
	(%3ATO [ATHENA_GlycemicControl_Instance_130311]))

([ATHENA_GlycemicControl_Class130028] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Instance_130311])
	(%3ATO [ATHENA_GlycemicControl_Instance_130309]))

([ATHENA_GlycemicControl_Class130029] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Instance_130309])
	(%3ATO [ATHENA_GlycemicControl_Class21]))

([ATHENA_GlycemicControl_Class130030] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Instance_130309])
	(%3ATO [ATHENA_GlycemicControl_Class100006]))

([ATHENA_GlycemicControl_Class130031] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Instance_130309])
	(%3ATO [ATHENA_GlycemicControl_Class90036]))

([ATHENA_GlycemicControl_Class130032] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Instance_130309])
	(%3ATO [ATHENA_GlycemicControl_Class120002]))

([ATHENA_GlycemicControl_Class130033] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Instance_130309])
	(%3ATO [ATHENA_GlycemicControl_Instance_130784]))

([ATHENA_GlycemicControl_Class130034] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class130008])
	(%3ATO [ATHENA_GlycemicControl_Class7]))

([ATHENA_GlycemicControl_Class130035] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class130010])
	(%3ATO [ATHENA_GlycemicControl_Class8]))

([ATHENA_GlycemicControl_Class130036] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class8])
	(%3ATO [ATHENA_GlycemicControl_Instance_50008]))

([ATHENA_GlycemicControl_Class130037] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class8])
	(%3ATO [ATHENA_GlycemicControl_Class22]))

([ATHENA_GlycemicControl_Class130038] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class8])
	(%3ATO [ATHENA_GlycemicControl_Instance_70010]))

([ATHENA_GlycemicControl_Class130039] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class8])
	(%3ATO [ATHENA_GlycemicControl_Class90036]))

([ATHENA_GlycemicControl_Class130040] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class8])
	(%3ATO [ATHENA_GlycemicControl_Class100006]))

([ATHENA_GlycemicControl_Class130041] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class8])
	(%3ATO [ATHENA_GlycemicControl_Class120002]))

([ATHENA_GlycemicControl_Class1300419] of  Structured_Query

	(label "query medications  whose daily dose > max recommended dose as specified in guideline")
	(type Medication)
	(where_restriction [ATHENA_GlycemicControl_Class1300420]))

([ATHENA_GlycemicControl_Class130042] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class8])
	(%3ATO [ATHENA_GlycemicControl_Instance_130784]))

([ATHENA_GlycemicControl_Class1300420] of  Join_Filter

	(attribute_comparisons
		[library_Class170002]
		[library_Class170004])
	(label "guideline drugs (in DM guideline) whose max recommended dose < daily dose")
	(query [ATHENA_GlycemicControl_Class1290000]))

([ATHENA_GlycemicControl_Class1300421] of  Structured_Query

	(attribute [drug_name])
	(label "drug name of meds not at max dose (according to DM guideline), not contraindicated or has complication or bad partner")
	(type Medication)
	(where_restriction
		[eon2_Class80006]
		[eon2_Class80013]
		[eon2_Class110000]
		[ATHENA_GlycemicControl_Class1300422]))

([ATHENA_GlycemicControl_Class1300422] of  Join_Filter

	(attribute_comparisons
		[eon2_Class80011]
		[eon2_Class80012])
	(label "not at max dose according to DM guideline")
	(query [ATHENA_GlycemicControl_Class1290000]))

([ATHENA_GlycemicControl_Class1300423] of  Query_Result_Criterion

	(label "There exists active med whose daily dose > max recommended dose according to DM guideline")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class1300419]))

([ATHENA_GlycemicControl_Class1300424] of  Query_Result_Criterion

	(label "there exists non-contraindicated meds not at max level according to DM guideline")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class1300421]))

([ATHENA_GlycemicControl_Class1300425] of  Parameterized_Message

	(label "(Structured Query, with DM guideline, Active meds whose daily dose are greater than max recommended dose")
	(message_type Recommendation)
	(parameterized_message [ATHENA_GlycemicControl_Class1300426])
	(rule_in_condition [ATHENA_GlycemicControl_Class1300423]))

([ATHENA_GlycemicControl_Class1300426] of  Parameterized_String

	(label "The medication ?drugName has prescribed daily dose (?dailyDose) greater than the DM-guideline maximum recommended dose.")
	(multivalued_variables [ATHENA_GlycemicControl_Class1300427])
	(value "ALERT:  The medication ?drugName has prescribed daily dose (?dailyDose) greater than the maximum recommended dose.  Recommendations are given as if the drug is at its maximum dose."))

([ATHENA_GlycemicControl_Class1300427] of  Variable_ValueSet

	(derivation_expression [ATHENA_GlycemicControl_Class1300419])
	(label "drug name and max dose")
	(property_values_to_get
		[eon2_Class20001]
		[library_Class190002]))

([ATHENA_GlycemicControl_Class130043] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class130012])
	(%3ATO [ATHENA_GlycemicControl_Class9]))

([ATHENA_GlycemicControl_Class130044] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class9])
	(%3ATO [ATHENA_GlycemicControl_Instance_50008]))

([ATHENA_GlycemicControl_Class130045] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class9])
	(%3ATO [ATHENA_GlycemicControl_Class90036]))

([ATHENA_GlycemicControl_Class130046] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class9])
	(%3ATO [ATHENA_GlycemicControl_Class120002]))

([ATHENA_GlycemicControl_Class130047] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class9])
	(%3ATO [ATHENA_GlycemicControl_Class100006]))

([ATHENA_GlycemicControl_Class130048] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class7])
	(%3ATO [ATHENA_GlycemicControl_Class22]))

([ATHENA_GlycemicControl_Class130049] of  Management_Guideline

	(alternative_goals [ATHENA_GlycemicControl_Class610454])
	(clinical_algorithm [ATHENA_GlycemicControl_Class530001])
	(drug_usages
		[ATHENA_GlycemicControl_Instance_50004]
		[ATHENA_GlycemicControl_Class60000]
		[ATHENA_GlycemicControl_Instance_50026]
		[ATHENA_GlycemicControl_Class1070005]
		[ATHENA_GlycemicControl_Class1110002])
	(eligibility_criteria
		[ATHENA_GlycemicControl_Class330000]
		[KB_308520_Class9]
		[ATHENA_GlycemicControl_Class1230002])
	(goal
		[ATHENA_GlycemicControl_Class280001]
		[ATHENA_GlycemicControl_Class280002]
		[ATHENA_GlycemicControl_Class310001])
	(guideline_drugs
		[ATHENA_GlycemicControl_Instance_80004]
		[ATHENA_GlycemicControl_Class70001]
		[ATHENA_GlycemicControl_Instance_80009]
		[ATHENA_GlycemicControl_Instance_80010]
		[ATHENA_GlycemicControl_Instance_80012]
		[ATHENA_GlycemicControl_Class1070005]
		[ATHENA_GlycemicControl_Class1110002])
	(label "ATHENA DM:  Glycemic Control Dashboard")
	(references [ATHENA_GlycemicControl_Class1050001]))

([ATHENA_GlycemicControl_Class130050] of  N_ary_Criterion

	(criteria
		[ATHENA_DM_Eye_Instance_40003]
		[KB_362799_Class1]
		[ATHENA_GlycemicControl_Class130051])
	(label "Presence of diabetes or insulin or other DM drugs")
	(operator OR))

([ATHENA_GlycemicControl_Class130051] of  Presence_Criterion

	(domain_term Blood_Glucose_Regulation_Agent)
	(entry_type Medication)
	(label "Presence of Blood Glucose Regulation Agent")
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class130052] of  N_ary_Criterion

	(criteria [library_Class60016])
	(label "Not pregnant in past 12,")
	(operator NOT))

([ATHENA_GlycemicControl_Class130115] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class80003])
	(%3ATO [ATHENA_GlycemicControl_Class80004]))

([ATHENA_GlycemicControl_Class130196] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class9])
	(%3ATO [ATHENA_GlycemicControl_Class120002]))

([ATHENA_GlycemicControl_Class130197] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class9])
	(%3ATO [ATHENA_GlycemicControl_Class120002]))

([ATHENA_GlycemicControl_Class130198] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class9])
	(%3ATO [ATHENA_GlycemicControl_Class100006]))

([ATHENA_GlycemicControl_Class130199] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class9])
	(%3ATO [ATHENA_GlycemicControl_Class90036]))

([ATHENA_GlycemicControl_Class1310000] of  Structured_Query

	(label "find anaphylaxis as ADR to sulfa drugs")
	(type Adverse_Reaction)
	(where_restriction
		[ATHENA_GlycemicControl_Class690001]
		[ATHENA_GlycemicControl_Class1310001]))

([ATHENA_GlycemicControl_Class1310001] of  Comparison_Filter

	(attribute [substance])
	(label "substance eq sulfa drug")
	(operator eq)
	(value_expression [Sulfa_drugs_noSU]))

([ATHENA_GlycemicControl_Class1310004] of  Query_Result_Criterion

	(label "anaphylaxis as ADR to sulfa drugs")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class1310000]))

([ATHENA_GlycemicControl_Class1310075] of  Parameterized_Message

	(label "Param msg duplicate drug")
	(message_type Recommendation)
	(parameterized_message [ATHENA_GlycemicControl_Class1310076])
	(rule_in_condition [library_Class160000]))

([ATHENA_GlycemicControl_Class1310076] of  Parameterized_String

	(label "Param string for dup drug")
	(value "Patient has 2 active prescriptions for the drug ?dup_drug . The doses have been summed.")
	(variables [ATHENA_GlycemicControl_Class1310078]))

([ATHENA_GlycemicControl_Class1310077] of  Variable

	(derivation_expression [library_Class150000])
	(label "?dup_drug")
	(string_name "?dup_drug"))

([ATHENA_GlycemicControl_Class1310078] of  Variable

	(derivation_expression [library_Class150000])
	(label "PatientChar duplicated drug")
	(string_name "?dup_drug"))

([ATHENA_GlycemicControl_Class1310314] of  Query_Result_Criterion

	(label "Presence of duplicate GL drug med")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class1310315]))

([ATHENA_GlycemicControl_Class1310315] of  Structured_Query

	(attribute [value])
	(label "query for drug name of duplicated GL drug")
	(type Note_Entry)
	(where_restriction
		[library_Class160001]
		[ATHENA_GlycemicControl_Class1330492]))

([ATHENA_GlycemicControl_Class1310316] of  Variable

	(derivation_expression [ATHENA_GlycemicControl_Class1310315])
	(label "?dup_GL_drug")
	(string_name "?dup_GL_drug"))

([ATHENA_GlycemicControl_Class1310317] of  Variable

	(derivation_expression [ATHENA_GlycemicControl_Class1310315])
	(label "PatientChar duplicated GL drug")
	(string_name "?dup_GL_drug"))

([ATHENA_GlycemicControl_Class1312258] of  Join_Filter

	(attribute_comparisons
		[library_Class160001]
		[ATHENA_GlycemicControl_Class880001])
	(label "duplicate and GL drug DO NOT USE")
	(query [ATHENA_GlycemicControl_Class1290000]))

([ATHENA_GlycemicControl_Class1312626] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class1320009])
	(label "Duplicate drug message")
	(rule_in [library_Class160000]))

([ATHENA_GlycemicControl_Class1312627] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class1312626]))

([ATHENA_GlycemicControl_Class1314938] of  Qualitative_Constant

	(label "GLIPIZIDE")
	(value "GLIPIZIDE"))

([ATHENA_GlycemicControl_Class1320000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class500003]
		[ATHENA_GlycemicControl_Class500004])
	(label "Absence of AST or ALT in past year")
	(operator OR))

([ATHENA_GlycemicControl_Class1320002] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "eGFR>=30 in past 30 days")
	(numeric_domain_term eGFR)
	(operator %3E%3D)
	(valid_window [time%3AINSTANCE_2])
	(value 30.0))

([ATHENA_GlycemicControl_Class1320003] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "eGFR < 45 within past 30 days")
	(numeric_domain_term eGFR)
	(operator %3C)
	(valid_window [time%3AINSTANCE_2])
	(value 45.0))

([ATHENA_GlycemicControl_Class1320004] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1320003]
		[ATHENA_GlycemicControl_Class1320002])
	(label "30<=eGFR<45 past 30 days")
	(operator AND))

([ATHENA_GlycemicControl_Class1320006] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "eGFR<45 past 30 days")
	(numeric_domain_term eGFR)
	(operator %3C)
	(valid_window [time%3AINSTANCE_2])
	(value 45.0))

([ATHENA_GlycemicControl_Class1320007] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1140222]
		[ATHENA_GlycemicControl_Class1320003])
	(label "Abs Empa and eGFR<45 past 30 days")
	(operator AND))

([ATHENA_GlycemicControl_Class1320009] of  Parameterized_Message

	(label "Param msg duplicate GL drug")
	(message_type Recommendation)
	(parameterized_message [ATHENA_GlycemicControl_Class1320010])
	(rule_in_condition [ATHENA_GlycemicControl_Class1310314]))

([ATHENA_GlycemicControl_Class1320010] of  Parameterized_String

	(label "Param string for dup GL drug")
	(value "Patient has 2 active prescriptions for the drug ?dup_GL_drug . The doses have been summed.")
	(variables [ATHENA_GlycemicControl_Class1310316]))

([ATHENA_GlycemicControl_Class1320490] of  Structured_Query

	(label "find angioedema ADR to SU or sulfa drugs")
	(type Adverse_Reaction)
	(where_restriction
		[ATHENA_GlycemicControl_Class1320491]
		[ATHENA_GlycemicControl_Class1320492]))

([ATHENA_GlycemicControl_Class1320491] of  Comparison_Filter

	(attribute [domain_term])
	(label "domain term is angioedema")
	(operator eq)
	(value_expression [angioedema]))

([ATHENA_GlycemicControl_Class1320492] of  N_aryFilter

	(filters
		[ATHENA_GlycemicControl_Class1310001]
		[ATHENA_GlycemicControl_Class700006]
		[ATHENA_GlycemicControl_Class670434]
		[ATHENA_GlycemicControl_Class1020219]
		[ATHENA_GlycemicControl_Class740001])
	(label "substance eq SU or sulfa")
	(operator OR))

([ATHENA_GlycemicControl_Class1320494] of  Query_Result_Criterion

	(label "angioedema as ADR to sulfa or SU")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class1320490]))

([ATHENA_GlycemicControl_Class1330000] of  Collateral_Action

	(actions
		[ATHENA_GlycemicControl_Class1330001]
		[ATHENA_GlycemicControl_Class410005])
	(mood Blocked_Increase))

([ATHENA_GlycemicControl_Class1330001] of  Conditional_On_Screen_Message

	(label "empa missing GFR")
	(message "Empagliflozin could not be evaluated because there is no GFR measurement in the last year.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class530008]))

([ATHENA_GlycemicControl_Class1330002] of  Collateral_Action

	(actions
		[ATHENA_GlycemicControl_Class1330003]
		[ATHENA_GlycemicControl_Class730001])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class1330003] of  Conditional_On_Screen_Message

	(label "empa missing GFR past 30 days")
	(message "Empa could not be evaluated because there is no GFR measurement in the past 30 days.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class400001]))

([ATHENA_GlycemicControl_Class1330004] of  Collateral_Action

	(actions
		[ATHENA_GlycemicControl_Class1330005]
		[ATHENA_GlycemicControl_Class730010]
		[ATHENA_GlycemicControl_Class730011])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class1330005] of  Conditional_On_Screen_Message

	(label "TZD missing AST or ALT")
	(message "Pioglitazone could not be evaluated because there is no AST or ALT measurement in the last year.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class1320000]))

([ATHENA_GlycemicControl_Class1330006] of  Collateral_Action

	(actions
		[ATHENA_GlycemicControl_Class1330005]
		[ATHENA_GlycemicControl_Class730010]
		[ATHENA_GlycemicControl_Class730011])
	(mood Blocked_Increase))

([ATHENA_GlycemicControl_Class1330492] of  Comparison_Filter

	(attribute [value])
	(label "value is encoded med")
	(operator member_of)
	(value_expression [ATHENA_GlycemicControl_Class1110006]))

([ATHENA_GlycemicControl_Class1340000] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "bicarb<24 in past year")
	(numeric_domain_term Bicarbonate)
	(operator %3C)
	(valid_window [ATHENA_DM_Eye_Instance_30019])
	(value 24.0))

([ATHENA_GlycemicControl_Class1350000] of  Structured_Query

	(label "ADR renal failure or impairment to MF or MF_ER")
	(type Adverse_Reaction)
	(where_restriction
		[ATHENA_GlycemicControl_Class1350001]
		[ATHENA_GlycemicControl_Class1350005]))

([ATHENA_GlycemicControl_Class1350001] of  N_aryFilter

	(filters
		[ATHENA_GlycemicControl_Class1350002]
		[ATHENA_GlycemicControl_Class1350003])
	(label "renal failure or impairment")
	(operator OR))

([ATHENA_GlycemicControl_Class1350002] of  Comparison_Filter

	(attribute [domain_term])
	(label "domain eq renalFailure")
	(operator eq)
	(value_expression [renalFailure]))

([ATHENA_GlycemicControl_Class1350003] of  Comparison_Filter

	(attribute [domain_term])
	(label "domain eq renalImpairment")
	(operator eq)
	(value_expression [renalImpairment]))

([ATHENA_GlycemicControl_Class1350004] of  Comparison_Filter

	(attribute [substance])
	(label "substance eq MF")
	(operator eq)
	(value_expression [METFORMIN]))

([ATHENA_GlycemicControl_Class1350005] of  N_aryFilter

	(filters
		[ATHENA_GlycemicControl_Class1350004]
		[ATHENA_GlycemicControl_Class1350006])
	(label "substance eq MF or MF_ER")
	(operator OR))

([ATHENA_GlycemicControl_Class1350006] of  Comparison_Filter

	(attribute [substance])
	(label "substance eq MF_ER")
	(operator eq)
	(value_expression [METFORMIN_ER]))

([ATHENA_GlycemicControl_Class1350008] of  Query_Result_Criterion

	(label "ADR renal failure or impairment to MF or MF_ER")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class1350000]))

([ATHENA_GlycemicControl_Class1350009] of  Structured_Query

	(label "ADR acidosis to MF or MF_ER")
	(type Adverse_Reaction)
	(where_restriction
		[ATHENA_GlycemicControl_Class1350005]
		[ATHENA_GlycemicControl_Class1350010]))

([ATHENA_GlycemicControl_Class1350010] of  Comparison_Filter

	(attribute [domain_term])
	(label "domain term eq acidosis")
	(operator eq)
	(value_expression [ACIDOSIS]))

([ATHENA_GlycemicControl_Class1350011] of  Query_Result_Criterion

	(label "ADR acidosis to MF or MF_ER")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class1350009]))

([ATHENA_GlycemicControl_Class1350013] of  Structured_Query

	(label "ADR of thrombocytopenia to pio or rosi")
	(type Adverse_Reaction)
	(where_restriction
		[ATHENA_GlycemicControl_Class1350014]
		[ATHENA_GlycemicControl_Class1350017]))

([ATHENA_GlycemicControl_Class1350014] of  N_aryFilter

	(filters
		[ATHENA_GlycemicControl_Class1350015]
		[ATHENA_GlycemicControl_Class1350016])
	(label "substance eq pio or rosi")
	(operator OR))

([ATHENA_GlycemicControl_Class1350015] of  Comparison_Filter

	(attribute [substance])
	(label "substance eq pio")
	(operator eq)
	(value_expression [PIOGLITAZONE]))

([ATHENA_GlycemicControl_Class1350016] of  Comparison_Filter

	(attribute [substance])
	(label "substance eq rosi")
	(operator eq)
	(value_expression [ROSIGLITAZONE]))

([ATHENA_GlycemicControl_Class1350017] of  Comparison_Filter

	(attribute [domain_term])
	(label "domain tem eq thrombocytopenia")
	(operator eq)
	(value_expression [Thrombocytopenia]))

([ATHENA_GlycemicControl_Class1350018] of  Query_Result_Criterion

	(label "ADR of thrombocytopenia to pio or rosi")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class1350013]))

([ATHENA_GlycemicControl_Class1350020] of  Structured_Query

	(label "ADR cardiac arrest or coma or thrombocytopenia or renal failure or renal impairment to glip, glyb, glim, first gen SU, sulfa")
	(type Adverse_Reaction)
	(where_restriction
		[ATHENA_GlycemicControl_Class1350021]
		[ATHENA_GlycemicControl_Class1350025]))

([ATHENA_GlycemicControl_Class1350021] of  N_aryFilter

	(filters
		[ATHENA_GlycemicControl_Class1350022]
		[ATHENA_GlycemicControl_Class1350023]
		[ATHENA_GlycemicControl_Class1350017]
		[ATHENA_GlycemicControl_Class1350002]
		[ATHENA_GlycemicControl_Class1350003])
	(label "domain term eq cardiac arrest or comoa or thrombocyto or renal fail impair")
	(operator OR))

([ATHENA_GlycemicControl_Class1350022] of  Comparison_Filter

	(attribute [domain_term])
	(label "domain term eq cardiac arrest")
	(operator eq)
	(value_expression [cardiac+arrest]))

([ATHENA_GlycemicControl_Class1350023] of  Comparison_Filter

	(attribute [domain_term])
	(label "domain term eq coma")
	(operator eq)
	(value_expression [COMA]))

([ATHENA_GlycemicControl_Class1350025] of  N_aryFilter

	(filters
		[ATHENA_GlycemicControl_Class700004]
		[ATHENA_GlycemicControl_Class700005]
		[ATHENA_GlycemicControl_Class710001]
		[ATHENA_GlycemicControl_Class690000]
		[ATHENA_GlycemicControl_Class1310001]
		[ATHENA_GlycemicControl_Class740001])
	(label "substance eq glip glyb glim SU sulfa")
	(operator OR))

([ATHENA_GlycemicControl_Class1350026] of  Query_Result_Criterion

	(label "ADR cardiac arrest or coma or thrombocytopenia or renal failure or renal impairment to glip, glyb, glim, first gen SU, sulfa")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class1350020]))

([ATHENA_GlycemicControl_Class1350028] of  Structured_Query

	(label "ADR SJS to glip glyb glim SU sulfa")
	(type Adverse_Reaction)
	(where_restriction
		[ATHENA_GlycemicControl_Class690002]
		[ATHENA_GlycemicControl_Class1350025]))

([ATHENA_GlycemicControl_Class1350030] of  Query_Result_Criterion

	(label "ADR SJS to glip glyb glim SU sulfa")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class1350028]))

([ATHENA_GlycemicControl_Class1360000] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class470003])
	(%3ATO [ATHENA_GlycemicControl_Class240016]))

([ATHENA_GlycemicControl_Class1370000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_10006]
		[ATHENA_GlycemicControl_Class1370001])
	(label "7<=HbA1c<=9")
	(operator AND))

([ATHENA_GlycemicControl_Class1370001] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "HbA1c>=7")
	(numeric_domain_term HbA1C)
	(operator %3E%3D)
	(valid_window [ATHENA_DM_Eye_Instance_30019])
	(value 7.0))

([ATHENA_GlycemicControl_Class1370002] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class170000]
		[ATHENA_GlycemicControl_Class1370003])
	(label "9<=GlycoHem<=11")
	(operator AND))

([ATHENA_GlycemicControl_Class1370003] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "GlycoHem >=9")
	(numeric_domain_term Glycosylated_Hemoglobin)
	(operator %3E%3D)
	(valid_window [ATHENA_DM_Eye_Instance_30019])
	(value 9.0))

([ATHENA_GlycemicControl_Class1380000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210014]
		[ATHENA_GlycemicControl_Class1160263]
		[ATHENA_GlycemicControl_Class800000]
		[ATHENA_GlycemicControl_Class1000007])
	(label "NOT at target and Query for encoded DM drugs and Abs non-encoded DM drugs")
	(operator AND))

([ATHENA_GlycemicControl_Class1380001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210014]
		[ATHENA_GlycemicControl_Class1140001]
		[ATHENA_GlycemicControl_Class1000007])
	(label "Not at target and Query for non encoded DM meds")
	(operator AND))

([ATHENA_GlycemicControl_Class1390000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class990000]
		[ATHENA_GlycemicControl_Class230038])
	(label "no contra and Pres bad drug partner DM med")
	(operator AND))

([ATHENA_GlycemicControl_Class14] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class3])
	(%3ATO [ATHENA_GlycemicControl_Class9]))

([ATHENA_GlycemicControl_Class140000] of  Goal_Criterion

	(guideline_entity [ATHENA_GlycemicControl_Class130049])
	(label "dashboard goal satisfied"))

([ATHENA_GlycemicControl_Class1400000] of  Numeric_Term_Criterion

	(entry_type Numeric_Entry)
	(label "eGFR>=45 no time frame")
	(numeric_domain_term eGFR)
	(operator %3E%3D)
	(value 45.0))

([ATHENA_GlycemicControl_Class1400001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class400001]
		[ATHENA_GlycemicControl_Class1030633]
		[ATHENA_GlycemicControl_Class1400000])
	(label "Absence of eGF in past 30 days, Pres eGF; eGFR>=45")
	(operator AND))

([ATHENA_GlycemicControl_Class140001] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class140000])
	(label "dashboard goal not satisfied")
	(operator NOT))

([ATHENA_GlycemicControl_Class140002] of  Drug_Usage

	(additional_ADR_check
		Dulaglutide
		Liraglutide)
	(collateral_actions
		[ATHENA_GlycemicControl_Class210051]
		[ATHENA_GlycemicControl_Class490000]
		[ATHENA_GlycemicControl_Class600005]
		[ATHENA_GlycemicControl_Class730017])
	(Do_Not_Intensify_Conditions Absence+of+eGFR+in+past+year)
	(Do_Not_Start_Conditions Absence+of+eGFR+in+past+month)
	(Drug_Class_Name Glucagon_like_peptide_1_agonist)
	(formulary_preferred_drug_in_class [ATHENA_GlycemicControl_Class340003])
	(label "Exenatide")
	(Relative_Contraindications
		Pancreatitis
		Poor_renal_function)
	(Relative_Indications DM-Type2))

([ATHENA_GlycemicControl_Class140003] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "creatinine clearance < 30")
	(numeric_domain_term Creatinine_Clearance)
	(operator %3C)
	(value 30.0))

([ATHENA_GlycemicControl_Class140315] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class8])
	(%3ATO [ATHENA_GlycemicControl_Class22]))

([ATHENA_GlycemicControl_Class1410000] of  Parameterized_Message

	(label "Param msg Old LOW eGFR for add MF")
	(message_type Primary_Recommendation)
	(parameterized_message [ATHENA_GlycemicControl_Class1410001])
	(rule_in_condition [ATHENA_GlycemicControl_Class1410002]))

([ATHENA_GlycemicControl_Class1410001] of  Parameterized_String

	(label "MF missing eGFR past month last LOW")
	(multivalued_variables [ATHENA_GlycemicControl_Class980016])
	(value "We cannot recommend starting metformin when eGFR is less than 45 or older than 30 days.  Last eGFR is ?value ?date."))

([ATHENA_GlycemicControl_Class1410002] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1030633]
		[ATHENA_GlycemicControl_Class1410003]
		[ATHENA_GlycemicControl_Class400001])
	(label "Abs eGFR past 30 days, Pres eGFR; egfr<45")
	(operator AND))

([ATHENA_GlycemicControl_Class1410003] of  Numeric_Term_Criterion

	(entry_type Numeric_Entry)
	(label "egfr<45 no time frame")
	(numeric_domain_term eGFR)
	(operator %3C)
	(value 45.0))

([ATHENA_GlycemicControl_Class1420000] of  Parameterized_Message

	(label "Old eGFR LOW for incr MF")
	(message_type Primary_Recommendation)
	(parameterized_message [ATHENA_GlycemicControl_Class1420001])
	(rule_in_condition [ATHENA_GlycemicControl_Class1420002]))

([ATHENA_GlycemicControl_Class1420001] of  Parameterized_String

	(label "Old LOW eGFR incr MF")
	(multivalued_variables [ATHENA_GlycemicControl_Class1030425])
	(value "We cannot recommend increasing the dose of metformin when eGFR is less than 45 and older than a year.  Last eGFR is ?value ?date."))

([ATHENA_GlycemicControl_Class1420002] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class530008]
		[ATHENA_GlycemicControl_Class1030633]
		[ATHENA_GlycemicControl_Class1410003])
	(label "Abs eGFR past 12 mo; Pres eGFR; eGFR<45")
	(operator AND))

([ATHENA_GlycemicControl_Class150000] of  Presence_Criterion

	(domain_term CBC)
	(entry_type Numeric_Entry)
	(label "Absence of CBC in past 12 mo")
	(period [library_Class60017])
	(presence FALSE))

([ATHENA_GlycemicControl_Class150001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class60010]
		[ATHENA_GlycemicControl_Class150000])
	(label "On metformin and absence of CBC in last 12 mo")
	(operator AND))

([ATHENA_GlycemicControl_Class150002] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class80000])
	(label "Add metformin d")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class140001])
	(strict_rule_out_condition [ATHENA_GlycemicControl_Class210135]))

([ATHENA_GlycemicControl_Class150003] of  Action_Choice

	(followed_by [ATHENA_GlycemicControl_Class200001])
	(label "Intensify drug treatment d")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class180000]))

([ATHENA_GlycemicControl_Class150004] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class120006])
	(label "Add TZD, Metformin and Glipizide contraindicated d")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class140001])
	(strict_rule_out_condition [ATHENA_GlycemicControl_Class120003]))

([ATHENA_GlycemicControl_Class150005] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class7])
	(%3ATO [ATHENA_GlycemicControl_Class150003]))

([ATHENA_GlycemicControl_Class150006] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class150003])
	(%3ATO [ATHENA_GlycemicControl_Instance_130309]))

([ATHENA_GlycemicControl_Class150007] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class9])
	(%3ATO [ATHENA_GlycemicControl_Class150002]))

([ATHENA_GlycemicControl_Class150008] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class5])
	(%3ATO [ATHENA_GlycemicControl_Class150002]))

([ATHENA_GlycemicControl_Class150009] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class8])
	(%3ATO [ATHENA_GlycemicControl_Class150002]))

([ATHENA_GlycemicControl_Class150010] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Instance_130309])
	(%3ATO [ATHENA_GlycemicControl_Class150002]))

([ATHENA_GlycemicControl_Class150011] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class9])
	(%3ATO [ATHENA_GlycemicControl_Class150004]))

([ATHENA_GlycemicControl_Class150012] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class5])
	(%3ATO [ATHENA_GlycemicControl_Class150004]))

([ATHENA_GlycemicControl_Class150013] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class8])
	(%3ATO [ATHENA_GlycemicControl_Class150004]))

([ATHENA_GlycemicControl_Class150014] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Instance_130309])
	(%3ATO [ATHENA_GlycemicControl_Class150004]))

([ATHENA_GlycemicControl_Class150015] of  Action_Choice

	(actions [KB_390055_Class2])
	(label "Metformin contraindicated; add Glipizide d")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class140001])
	(strict_rule_out_condition [ATHENA_GlycemicControl_Class110006]))

([ATHENA_GlycemicControl_Class150016] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Instance_130309])
	(%3ATO [ATHENA_GlycemicControl_Class150015]))

([ATHENA_GlycemicControl_Class150017] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class8])
	(%3ATO [ATHENA_GlycemicControl_Class150015]))

([ATHENA_GlycemicControl_Class150018] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class5])
	(%3ATO [ATHENA_GlycemicControl_Class150015]))

([ATHENA_GlycemicControl_Class150019] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class9])
	(%3ATO [ATHENA_GlycemicControl_Class150015]))

([ATHENA_GlycemicControl_Class150020] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class150023])
	(label "Add ACE/ARB message")
	(rule_in [ATHENA_GlycemicControl_Class150022]))

([ATHENA_GlycemicControl_Class150021] of  Presence_Criterion

	(domain_term Angiotensin_II_receptor_blockers)
	(entry_type Medication)
	(label "Absence of ARB")
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class150022] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class80018]
		[ATHENA_GlycemicControl_Class150021])
	(label "Absence of ACE inhibitor or ARB")
	(operator OR))

([ATHENA_GlycemicControl_Class150023] of  On_Screen_Message

	(label "Absence of ACEI/ARB message")
	(message "Many DM practitioners add ACE inhibitorsor ARBs  to patient’s regimen regardless of kidney function.")
	(message_type Recommendation)
	(references
		[ATHENA_GlycemicControl_Class80009]
		[ATHENA_GlycemicControl_Class150024]))

([ATHENA_GlycemicControl_Class150024] of  Supporting_Material

	(label "VISN21 dashboard PM"))

([ATHENA_GlycemicControl_Class150025] of  Consultation_Selection

	(%3AFROM [KB_707783_Class4])
	(%3ATO [ATHENA_GlycemicControl_Class150020]))

([ATHENA_GlycemicControl_Class150026] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class80003])
	(%3ATO [ATHENA_GlycemicControl_Class150020]))

([ATHENA_GlycemicControl_Class150027] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class480000])
	(label "Set target_HbA1c")
	(rule_in [ATHENA_GlycemicControl_Instance_10032]))

([ATHENA_GlycemicControl_Class150028] of  On_Screen_Message

	(label "Set target HbA1c old")
	(message "Some patients need tighter control of their HbA1c.  Consider setting an alternate target HbA1c; initial target ranges can be found in VA DM Guidelines")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class150029] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class80003])
	(%3ATO [ATHENA_GlycemicControl_Class150027]))

([ATHENA_GlycemicControl_Class150030] of  Consultation_Selection

	(%3AFROM [KB_707783_Class4])
	(%3ATO [ATHENA_GlycemicControl_Class150027]))

([ATHENA_GlycemicControl_Class150031] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class150033])
	(label "Metformin check serum creatinine")
	(rule_in [ATHENA_GlycemicControl_Class60010]))

([ATHENA_GlycemicControl_Class150033] of  Conditional_On_Screen_Message

	(label "On metformin check serum creatinine")
	(message "It is recommended that patients on Metformin have a serum creatinine checked at least every 12 months")
	(message_type Recommendation)
	(references [ATHENA_GlycemicControl_Class150024])
	(rule_in_condition [ATHENA_GlycemicControl_Class150034]))

([ATHENA_GlycemicControl_Class150034] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class120322]
		[ATHENA_GlycemicControl_Class460000])
	(label "On metformin and absence of serum creatinine")
	(operator AND))

([ATHENA_GlycemicControl_Class150035] of  Presence_Criterion

	(domain_term Creatinine)
	(entry_type Numeric_Entry)
	(label "Absence of creatinine lab in past month")
	(period [time%3AINSTANCE_2])
	(presence FALSE))

([ATHENA_GlycemicControl_Class150036] of  Consultation_Selection

	(%3AFROM [KB_707783_Class4])
	(%3ATO [ATHENA_GlycemicControl_Class150031]))

([ATHENA_GlycemicControl_Class160000] of  Consultation_Guideline

	(first_step [ATHENA_GlycemicControl_Class160001])
	(label "No lab consultation template")
	(steps
		[ATHENA_GlycemicControl_Class160001]
		[ATHENA_GlycemicControl_Class150027])
	(transitions
		[ATHENA_GlycemicControl_Class170003]
		[ATHENA_GlycemicControl_Class170004]))

([ATHENA_GlycemicControl_Class160001] of  Consultation_Branch_Step

	(branches [ATHENA_GlycemicControl_Class150027])
	(label "No lab consultation template")
	(selection_method all_of))

([ATHENA_GlycemicControl_Class160002] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class160003])
	(label "On metformin check CBC")
	(rule_in [ATHENA_GlycemicControl_Class150001]))

([ATHENA_GlycemicControl_Class160003] of  Conditional_On_Screen_Message

	(label "On metformin check CBC")
	(message "It is recommended that patients on Metformin have CBC measured  at least every 12 months")
	(message_type Recommendation)
	(references [ATHENA_GlycemicControl_Class150024])
	(rule_in_condition [ATHENA_GlycemicControl_Class150001]))

([ATHENA_GlycemicControl_Class160004] of  Consultation_Selection

	(%3AFROM [KB_707783_Class4])
	(%3ATO [ATHENA_GlycemicControl_Class160002]))

([ATHENA_GlycemicControl_Class17] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class5])
	(%3ATO [ATHENA_GlycemicControl_Class0]))

([ATHENA_GlycemicControl_Class170000] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "Glycohemoglobin<=11")
	(numeric_domain_term Glycosylated_Hemoglobin)
	(operator %3C%3D)
	(valid_window [library_Class60017])
	(value 11.0))

([ATHENA_GlycemicControl_Class170001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_10006]
		[ATHENA_GlycemicControl_Class170000])
	(label "HbA1c<=9 OR Glycohemoglobin<=11")
	(operator OR))

([ATHENA_GlycemicControl_Class170003] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class160001])
	(%3ATO [ATHENA_GlycemicControl_Class150027]))

([ATHENA_GlycemicControl_Class170004] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class160001])
	(%3ATO [ATHENA_GlycemicControl_Class150027]))

([ATHENA_GlycemicControl_Class170506] of  N_ary_Criterion

	(criteria [KB_987250_Class2])
	(label "NOT presence of contraindication")
	(operator NOT))

([ATHENA_GlycemicControl_Class170507] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_130679]
		[ATHENA_GlycemicControl_Class170506])
	(label "goal not satisfied and not presence of contraindication")
	(operator AND)
	(%3ADOCUMENTATION "added 5/16/13"))

([ATHENA_GlycemicControl_Class180000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class170506]
		[ATHENA_GlycemicControl_Class140001])
	(label "dashboard goal not satisfied and not presence of contraindication")
	(operator AND))

([ATHENA_GlycemicControl_Class180050] of  Conditional_Goal

	(criterion_to_achieve [ATHENA_GlycemicControl_Instance_10006])
	(label "Absence of target HbA1c, set dashboard target HbA1c<=9")
	(selection_criterion [ATHENA_GlycemicControl_Class270741]))

([ATHENA_GlycemicControl_Class180126] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class170506]
		[KB_794798_Class0])
	(label "HbA1c <= target and not presence of contraindication")
	(operator AND))

([ATHENA_GlycemicControl_Class190000] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 500.0)
	(upper_limit 2459.0))

([ATHENA_GlycemicControl_Class2] of  Scenario

	(consultation_template [ATHENA_GlycemicControl_Class60011])
	(followed_by [ATHENA_GlycemicControl_Class7])
	(label "Combination therapy w/ oral agents")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Instance_120201]))

([ATHENA_GlycemicControl_Class20000] of  Evaluate_Increase_Activity_Intensity

	(activities_to_modify [ATHENA_GlycemicControl_Class1300421])
	(activity_class "Medication")
	(activity_spec Guideline_Drug)
	(activity_spec_candidate [ATHENA_GlycemicControl_Class1290000])
	(activity_spec_key [generic_drug])
	(attribute "daily_dose")
	(fine-grain_priority 1000)
	(label "consider increasing dose of drugs"))

([ATHENA_GlycemicControl_Class200000] of  Action_Choice

	(actions [KB_390055_Class3])
	(label "Add insulin d")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class180000])
	(strict_rule_out_condition [ATHENA_GlycemicControl_Class210267]))

([ATHENA_GlycemicControl_Class200001] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Instance_130784]
		[ATHENA_GlycemicControl_Class150015]
		[ATHENA_GlycemicControl_Class150002]
		[ATHENA_GlycemicControl_Class150004]
		[ATHENA_GlycemicControl_Class200000])
	(label "Intensify choices d"))

([ATHENA_GlycemicControl_Class200002] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class150003])
	(%3ATO [ATHENA_GlycemicControl_Class200001]))

([ATHENA_GlycemicControl_Class200003] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class200001])
	(%3ATO [ATHENA_GlycemicControl_Class21]))

([ATHENA_GlycemicControl_Class200004] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class200001])
	(%3ATO [ATHENA_GlycemicControl_Instance_130784]))

([ATHENA_GlycemicControl_Class200005] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class200001])
	(%3ATO [ATHENA_GlycemicControl_Class150015]))

([ATHENA_GlycemicControl_Class200006] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class200001])
	(%3ATO [ATHENA_GlycemicControl_Class150002]))

([ATHENA_GlycemicControl_Class200007] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class200001])
	(%3ATO [ATHENA_GlycemicControl_Class150004]))

([ATHENA_GlycemicControl_Class20001] of  %3APAL-CONSTRAINT

	(%3APAL-NAME "there exist drugs not at max dose")
	(%3APAL-RANGE "(defrange ?drug_usage :FRAME Drug_Usage)\n(defrange ?med :FRAME Medication)\n(defrange ?condition :FRAME Note_Entry)\n(defrange ?problem :FRAME Note_Entry)\n(defrange ?contraindication :FRAME Medical_Conditions_Metaclass Absolute_Contraindications)\n(defrange ?derived_contraindication :FRAME Diagnostic_Term_Metaclass Absolute_Contraindications)\n(defrange ?complication :FRAME Medical_Conditions_Metaclass Complication_Factor)\n(defrange ?guidelineDrug :FRAME Guideline_Drug)\n(defrange ?rangeMapping :FRAME Range_Mapping_Entry)\n(defrange ?bad_partner_med :FRAME Medication )\n(defrange ?drug_class :FRAME Medications_Metaclass Drug_Partners_To_Avoid)")
	(%3APAL-STATEMENT "(exists  ?med\n         (and \n              (patient_id ?med $patient_id)\n              (is-class (drug_name ?med))\n              (or (not (own-slot-not-null mood ?med ))\n                  (mood ?med Authorized)) \n              (exists ?guidelineDrug\n                      (and (= (coerce-to-class (drug_name ?med)) (generic_drug ?guidelineDrug))\n                           (exists ?rangeMapping (and (dose_level_ranges ?guidelineDrug ?rangeMapping)\n                                                      (= (abstract_value ?rangeMapping) (coerce-to-class \"High_Dose(high/low)\"))\n                                                      (< (daily_dose ?med) (lower_limit ?rangeMapping))  )))\n                      			      )\n              (not (exists ?drug_usage \n                           (and (drug_usages (coerce-to-instance \"ATHENA_GlycemicControl_Class130049\") ?drug_usage)\n                                (subclass-of (coerce-to-class (drug_name ?med))\n                                             (Drug_Class_Name ?drug_usage))\n                                (or (exists ?contraindication \n                                            (and (Absolute_Contraindications ?drug_usage ?contraindication)\n                                                 (exists ?condition \n                                                         (and (patient_id ?condition $patient_id)(is-class (domain_term ?condition))\n                                                              (equal-or-subclass-of (coerce-to-class (domain_term ?condition))\n                                                                                    ?contraindication)))))\n                                    (exists ?bad_partner_med (and (patient_id ?bad_partner_med $patient_id)\n                                                                  (is-class (drug_name ?bad_partner_med))\n                                                                  (or (not (own-slot-not-null mood ?bad_partner_med ))\n                                                                      (mood ?bad_partner_med Authorized)) \n                                                                  (exists ?drug_class (and (Drug_Partners_To_Avoid ?drug_usage ?drug_class)\n                                                                                           (equal-or-subclass-of (coerce-to-class (drug_name ?bad_partner_med))\n                                                                                                                 ?drug_class)))))                             	                   \n                                    (exists ?complication (and (Complication_Factor ?drug_usage ?complication)\n                                                               (exists ?problem\n                                                                       (and (patient_id ?problem $patient_id)\n                                                                            (is-class (domain_term ?problem))                                                                                                     \n                                                                            (equal-or-subclass-of (coerce-to-class (domain_term ?problem))        ?complication)))))\n                                    (exists  ?derived_contraindication \n                                             (and (Absolute_Contraindications ?drug_usage ?derived_contraindication)\n                                                  (is-derivable ?derived_contraindication))))))))\n)"))

([ATHENA_GlycemicControl_Class20002] of  PAL_Query

	(case_variable "$patient_id")
	(key_slot [drug_name])
	(label "query for drugs not a max dose")
	(PAL_query [ATHENA_GlycemicControl_Class20003]))

([ATHENA_GlycemicControl_Class20003] of  PAL-QUERY

	(%3APAL-NAME "query for drugs not a max dose (DM-specific)")
	(%3APAL-RANGE "(defrange ?drug_usage :FRAME Drug_Usage)\n(defrange ?med :FRAME Medication)\n(defrange ?condition :FRAME Note_Entry)\n(defrange ?problem :FRAME Note_Entry)\n(defrange ?contraindication :FRAME Medical_Conditions_Metaclass Absolute_Contraindications)\n(defrange ?derived_contraindication :FRAME Diagnostic_Term_Metaclass Absolute_Contraindications)\n(defrange ?complication :FRAME Medical_Conditions_Metaclass Complication_Factor)\n(defrange ?guidelineDrug :FRAME Guideline_Drug)\n(defrange ?rangeMapping :FRAME Range_Mapping_Entry)\n(defrange ?bad_partner_med :FRAME Medication )\n(defrange ?drug_class :FRAME Medications_Metaclass Drug_Partners_To_Avoid)")
	(%3APAL-STATEMENT "(findall  ?med\n          (and \n               (patient_id ?med $patient_id)\n               (is-class (drug_name ?med))\n               (or (not (own-slot-not-null mood ?med ))\n                   (mood ?med Authorized)) \n               (exists ?guidelineDrug\n                       (and (= (coerce-to-class (drug_name ?med)) (generic_drug ?guidelineDrug))\n                            (exists ?rangeMapping (and (dose_level_ranges ?guidelineDrug ?rangeMapping)\n                                                       (= (abstract_value ?rangeMapping) (coerce-to-class \"High_Dose(high/low)\"))\n                                                       (< (daily_dose ?med) (lower_limit ?rangeMapping))  )))\n                       			      )\n               (not (exists ?drug_usage \n                            (and (drug_usages (coerce-to-instance \"ATHENA_GlycemicControl_Class130049\") ?drug_usage)\n                                 (equal-or-subclass-of (coerce-to-class (drug_name ?med))\n                                                       (Drug_Class_Name ?drug_usage))\n                                 (or (exists ?contraindication \n                                             (and (Absolute_Contraindications ?drug_usage ?contraindication)\n                                                  (exists ?condition \n                                                          (and (patient_id ?condition $patient_id)(is-class (domain_term ?condition))\n                                                               (equal-or-subclass-of (coerce-to-class (domain_term ?condition))\n                                                                                     ?contraindication)))))\n                                     (exists ?bad_partner_med (and (patient_id ?bad_partner_med $patient_id)\n                                                                   (is-class (drug_name ?bad_partner_med))\n                                                                   (or (not (own-slot-not-null mood ?bad_partner_med ))\n                                                                       (mood ?bad_partner_med Authorized)) \n                                                                   (exists ?drug_class (and (Drug_Partners_To_Avoid ?drug_usage ?drug_class)\n                                                                                            (equal-or-subclass-of (coerce-to-class (drug_name ?bad_partner_med))\n                                                                                                                  ?drug_class)))))                             	                   \n                                     (exists ?complication (and (Complication_Factor ?drug_usage ?complication)\n                                                                (exists ?problem\n                                                                        (and (patient_id ?problem $patient_id)\n                                                                             (is-class (domain_term ?problem))                                                                                                     \n                                                                             (equal-or-subclass-of (coerce-to-class (domain_term ?problem))        ?complication)))))\n                                     (exists  ?derived_contraindication \n                                              (and (Absolute_Contraindications ?drug_usage ?derived_contraindication)\n                                                   (is-derivable ?derived_contraindication))))))))\n)"))

([ATHENA_GlycemicControl_Class200149] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class200001])
	(%3ATO [ATHENA_GlycemicControl_Class200000]))

([ATHENA_GlycemicControl_Class200292] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Instance_90005])
	(label "HbA1c controlled d")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class200296])
	(strict_rule_out_condition [ATHENA_GlycemicControl_Instance_10005]))

([ATHENA_GlycemicControl_Class200293] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class7])
	(%3ATO [ATHENA_GlycemicControl_Class200292]))

([ATHENA_GlycemicControl_Class200294] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class8])
	(%3ATO [ATHENA_GlycemicControl_Class200292]))

([ATHENA_GlycemicControl_Class200295] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class5])
	(%3ATO [ATHENA_GlycemicControl_Class200292]))

([ATHENA_GlycemicControl_Class200296] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class140000]
		[ATHENA_GlycemicControl_Class170506])
	(label "dashboard goal satisfied and not presence of contraindication")
	(operator AND))

([ATHENA_GlycemicControl_Class21] of  Action_Choice

	(actions [KB_390055_Class3])
	(label "Add insulin")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Instance_90002])
	(strict_rule_out_condition [KB_987250_Class2]))

([ATHENA_GlycemicControl_Class210000] of  Scenario

	(consultation_template [ATHENA_GlycemicControl_Class780000])
	(followed_by [ATHENA_GlycemicControl_Class540028])
	(label "Scenario:Nonpharmacologic Therapy")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Class210012]))

([ATHENA_GlycemicControl_Class210001] of  Presence_Criterion

	(domain_term Diabetes-Mellitus-Type1)
	(entry_type Note_Entry)
	(label "Absence of DM Type 1")
	(presence FALSE))

([ATHENA_GlycemicControl_Class210002] of  Presence_Criterion

	(domain_term HbA1C)
	(entry_type Numeric_Entry)
	(label "Presence of HbA1c in past 12 months")
	(period [library_Class60017])
	(presence TRUE))

([ATHENA_GlycemicControl_Class210003] of  Presence_Criterion

	(domain_term Glycosylated_Hemoglobin)
	(entry_type Numeric_Entry)
	(label "Presence of Glycosylated Hem in last 12 months")
	(period [library_Class60017])
	(presence TRUE))

([ATHENA_GlycemicControl_Class210004] of  Presence_Criterion

	(domain_term Glycosylated_Hemoglobin)
	(entry_type Numeric_Entry)
	(label "Absence of Glycosylated Hem in last 12 months")
	(period [library_Class60017])
	(presence FALSE))

([ATHENA_GlycemicControl_Class210005] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210002]
		[ATHENA_GlycemicControl_Class210003])
	(label "Presence of HbA1c or GlycoHem in past 12 months")
	(operator OR))

([ATHENA_GlycemicControl_Class210006] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210005]
		[ATHENA_GlycemicControl_Class210001])
	(label "Presence of HbA1c or GlycoHem in past 12 months and not DM Type 1")
	(operator AND))

([ATHENA_GlycemicControl_Class210007] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "HbA1c>=6")
	(numeric_domain_term HbA1C)
	(operator %3E%3D)
	(value 6.0))

([ATHENA_GlycemicControl_Class210008] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_10006]
		[ATHENA_GlycemicControl_Class210007])
	(label "6 <= HbA1c <=9")
	(operator AND))

([ATHENA_GlycemicControl_Class210009] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "Glycohemoglobin>=8")
	(numeric_domain_term Glycosylated_Hemoglobin)
	(operator %3E%3D)
	(value 8.0))

([ATHENA_GlycemicControl_Class210010] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class170000]
		[ATHENA_GlycemicControl_Class210009])
	(label "8<= GlycoHem <=11")
	(operator AND))

([ATHENA_GlycemicControl_Class210011] of  Presence_Criterion

	(domain_term Blood_Glucose_Regulation_Agent)
	(entry_type Medication)
	(label "Absence of Blood Glucose Regulation Agent")
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class210012] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210011]
		[ATHENA_GlycemicControl_Class210005]
		[ATHENA_GlycemicControl_Class1300004])
	(label "Presence of HbA1c or Glyc and Absence Glucose Regulation Agents")
	(operator AND))

([ATHENA_GlycemicControl_Class210013] of  Numeric_Term_Criterion

	(entry_type Numeric_Entry)
	(label "GlycoHemoglobin > 11")
	(numeric_domain_term Glycosylated_Hemoglobin)
	(operator %3E)
	(value 11.0))

([ATHENA_GlycemicControl_Class210014] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_10005]
		[ATHENA_GlycemicControl_Class210013])
	(label "HbA1c >9 or GlycoHem > 11")
	(operator OR))

([ATHENA_GlycemicControl_Class210015] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class210017])
	(label "dHbA1c or GlycoHem controlled")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class170001]))

([ATHENA_GlycemicControl_Class210016] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1370000]
		[ATHENA_GlycemicControl_Class1370002])
	(label "7<=HbA1c<=9 OR 9<=GlycoHem<=11")
	(operator OR))

([ATHENA_GlycemicControl_Class210017] of  On_Screen_Message

	(display_location Summary)
	(label "HbA1c <= 9")
	(message "Latest HbA1c <=9, meets dashboard goal. Congratulations! CDS does not give recommendations for HbA1c values between 7 and 9.")
	(message_type Primary_Recommendation))

([ATHENA_GlycemicControl_Class210018] of  On_Screen_Message

	(label "Severe hyperglycemia message")
	(message "If patient has severe hyperglycemia or excessive symptoms, consider starting insulin and a referral to Diabetic Management Team.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Instance_50003]))

([ATHENA_GlycemicControl_Class210019] of  Management_Diagram

	(label "Glycemic Control Dashboard II")
	(steps
		[ATHENA_GlycemicControl_Class210000]
		[ATHENA_GlycemicControl_Class210015]
		[ATHENA_GlycemicControl_Class210020]
		[ATHENA_GlycemicControl_Class210026]
		[ATHENA_GlycemicControl_Class210024]
		[ATHENA_GlycemicControl_Class210028]
		[ATHENA_GlycemicControl_Class210029]
		[ATHENA_GlycemicControl_Class210037]
		[ATHENA_GlycemicControl_Class210040]
		[ATHENA_GlycemicControl_Class210038]
		[ATHENA_GlycemicControl_Class210044]
		[ATHENA_GlycemicControl_Class210045]
		[ATHENA_GlycemicControl_Class220004]
		[ATHENA_GlycemicControl_Class220006]
		[ATHENA_GlycemicControl_Class230000]
		[ATHENA_GlycemicControl_Class230004]
		[ATHENA_GlycemicControl_Class230011]
		[ATHENA_GlycemicControl_Class230017]
		[ATHENA_GlycemicControl_Class230024]
		[ATHENA_GlycemicControl_Class230022]
		[ATHENA_GlycemicControl_Class230035]
		[ATHENA_GlycemicControl_Class230036]
		[ATHENA_GlycemicControl_Class230039]
		[ATHENA_GlycemicControl_Class240016]
		[ATHENA_GlycemicControl_Class240018]
		[ATHENA_GlycemicControl_Class240019]
		[ATHENA_GlycemicControl_Class240026]
		[ATHENA_GlycemicControl_Class240028]
		[ATHENA_GlycemicControl_Class240031]
		[ATHENA_GlycemicControl_Class240033]
		[ATHENA_GlycemicControl_Class240039]
		[ATHENA_GlycemicControl_Class240043]
		[ATHENA_GlycemicControl_Class240048]
		[ATHENA_GlycemicControl_Class240051]
		[ATHENA_GlycemicControl_Class240053]
		[ATHENA_GlycemicControl_Class240057]
		[ATHENA_GlycemicControl_Class240058]
		[ATHENA_GlycemicControl_Class240062]
		[ATHENA_GlycemicControl_Class230008]
		[ATHENA_GlycemicControl_Class270002]
		[ATHENA_GlycemicControl_Class270003]
		[ATHENA_GlycemicControl_Class470002]
		[ATHENA_GlycemicControl_Class470003]
		[ATHENA_GlycemicControl_Class470006])
	(transitions
		[ATHENA_GlycemicControl_Class210030]
		[ATHENA_GlycemicControl_Class210031]
		[ATHENA_GlycemicControl_Class210032]
		[ATHENA_GlycemicControl_Class210033]
		[ATHENA_GlycemicControl_Class210034]
		[ATHENA_GlycemicControl_Class210035]
		[ATHENA_GlycemicControl_Class210042]
		[ATHENA_GlycemicControl_Class210047]
		[ATHENA_GlycemicControl_Class210048]
		[ATHENA_GlycemicControl_Class220007]
		[ATHENA_GlycemicControl_Class230006]
		[ATHENA_GlycemicControl_Class230007]
		[ATHENA_GlycemicControl_Class240000]
		[ATHENA_GlycemicControl_Class240001]
		[ATHENA_GlycemicControl_Class240002]
		[ATHENA_GlycemicControl_Class240003]
		[ATHENA_GlycemicControl_Class240004]
		[ATHENA_GlycemicControl_Class240005]
		[ATHENA_GlycemicControl_Class240006]
		[ATHENA_GlycemicControl_Class240007]
		[ATHENA_GlycemicControl_Class240017]
		[ATHENA_GlycemicControl_Class240020]
		[ATHENA_GlycemicControl_Class240022]
		[ATHENA_GlycemicControl_Class240024]
		[ATHENA_GlycemicControl_Class240025]
		[ATHENA_GlycemicControl_Class240027]
		[ATHENA_GlycemicControl_Class240029]
		[ATHENA_GlycemicControl_Class240030]
		[ATHENA_GlycemicControl_Class240035]
		[ATHENA_GlycemicControl_Class240036]
		[ATHENA_GlycemicControl_Class240049]
		[ATHENA_GlycemicControl_Class240050]
		[ATHENA_GlycemicControl_Class240054]
		[ATHENA_GlycemicControl_Class240056]
		[ATHENA_GlycemicControl_Class240059]
		[ATHENA_GlycemicControl_Class240060]
		[ATHENA_GlycemicControl_Class240061]
		[ATHENA_GlycemicControl_Class240064]
		[ATHENA_GlycemicControl_Class240065]
		[ATHENA_GlycemicControl_Class260016]
		[ATHENA_GlycemicControl_Class260017]
		[ATHENA_GlycemicControl_Class260018]
		[ATHENA_GlycemicControl_Class270004]
		[ATHENA_GlycemicControl_Class270005]
		[ATHENA_GlycemicControl_Class330009]
		[ATHENA_GlycemicControl_Class330010]
		[ATHENA_GlycemicControl_Class470004]
		[ATHENA_GlycemicControl_Class470005]
		[ATHENA_GlycemicControl_Class470009]
		[ATHENA_GlycemicControl_Class470010]))

([ATHENA_GlycemicControl_Class210020] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class210018])
	(followed_by [ATHENA_GlycemicControl_Class210029])
	(label "dAdd one non-insulin drug")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class210014]))

([ATHENA_GlycemicControl_Class210021] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControlAlt_Class1]
		[ATHENA_GlycemicControl_Class780511])
	(label "MF contraindicated and SU contraindicated")
	(operator AND))

([ATHENA_GlycemicControl_Class210022] of  %3APAL-CONSTRAINT

	(%3APAL-NAME "SU contraindicated")
	(%3APAL-RANGE "(defrange ?condition :FRAME Note_Entry)\n(defrange ?problem :FRAME Medical_Conditions_Metaclass)\n(defrange ?derived_problem :FRAME Diagnostic_Term_Metaclass)\n(defrange ?drug_usage :FRAME Drug_Usage)")
	(%3APAL-STATEMENT "(forall ?drug_usage\n        (=>(or (Drug_Class_Name ?drug_usage GLIPIZIDE)\n               (Drug_Class_Name ?drug_usage GLYBURIDE)\n               (Drug_Class_Name ?drug_usage GLIMEPRIDE))\n               (or (exists ?condition \n                           (and (patient_id ?condition $patient_id)\n                                (exists ?problem \n                                        (and (Absolute_Contraindications ?drug_usage ?problem)\n                                             (isa-classname (domain_term ?condition))\n                                             (or (= (coerce-to-class (domain_term ?condition)) ?problem )\n                                                 (subclass-of (coerce-to-class (domain_term ?condition)) ?problem )) \n                                        ))))\n                   (exists  ?derived_problem \n                            (and (Absolute_Contraindications ?drug_usage ?derived_problem)\n                                 (is-derivable ?derived_problem))))\n        )\n)"))

([ATHENA_GlycemicControl_Class210023] of  PAL_Criterion

	(case_variable "$patient_id")
	(label "SU contraindicated")
	(PAL_constraint [ATHENA_GlycemicControl_Class210022]))

([ATHENA_GlycemicControl_Class210024] of  Action_Choice

	(actions
		[KB_390055_Class3]
		[ATHENA_GlycemicControl_Class210025]
		[ATHENA_GlycemicControl_Class210036])
	(label "dMF and SU contraindicated, Add insulin, Add alternatives")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class230028])
	(strict_rule_out_condition [ATHENA_GlycemicControl_Class1300424]))

([ATHENA_GlycemicControl_Class210025] of  Evaluate_Start_Activity

	(activity_class "Medication")
	(alternatives
		[ATHENA_GlycemicControl_Instance_50026]
		[ATHENA_GlycemicControl_Class90051]
		[ATHENA_GlycemicControl_Class140002]
		[ATHENA_GlycemicControl_Class770000]
		[ATHENA_GlycemicControl_Class340013]
		[ATHENA_GlycemicControl_Instance_50027])
	(fine-grain_priority 1000)
	(label "Evaluate start alternative therapy (not MF not SU not Sax)")
	(subsidiary_message "Consider these alternative therapies if insulin is refused")
	(therapeutic_goal [ATHENA_GlycemicControl_Class610454]))

([ATHENA_GlycemicControl_Class210026] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Instance_50005]
		[ATHENA_GlycemicControl_Class210036])
	(label "dFirst Line Oral Therapy")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class210027]))

([ATHENA_GlycemicControl_Class210027] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class210021])
	(label "NOT (MF contraindicated and SU contraindicated)")
	(operator NOT))

([ATHENA_GlycemicControl_Class210028] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class210015]
		[ATHENA_GlycemicControl_Class210020])
	(label "dNonPharm Choices"))

([ATHENA_GlycemicControl_Class210029] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class210026]
		[ATHENA_GlycemicControl_Class210024])
	(label "dOne Drug Choices"))

([ATHENA_GlycemicControl_Class210030] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210000])
	(%3ATO [ATHENA_GlycemicControl_Class210028]))

([ATHENA_GlycemicControl_Class210031] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210028])
	(%3ATO [ATHENA_GlycemicControl_Class210015]))

([ATHENA_GlycemicControl_Class210032] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210028])
	(%3ATO [ATHENA_GlycemicControl_Class210020]))

([ATHENA_GlycemicControl_Class210033] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210020])
	(%3ATO [ATHENA_GlycemicControl_Class210029]))

([ATHENA_GlycemicControl_Class210034] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210029])
	(%3ATO [ATHENA_GlycemicControl_Class210026]))

([ATHENA_GlycemicControl_Class210035] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210029])
	(%3ATO [ATHENA_GlycemicControl_Class210024]))

([ATHENA_GlycemicControl_Class210036] of  On_Screen_Message

	(label "Follow up in 3 months")
	(message "Follow up in 3 months")
	(message_type Follow_Up)
	(rule_in_condition [criterion_INSTANCE_00001]))

([ATHENA_GlycemicControl_Class210037] of  Scenario

	(followed_by [ATHENA_GlycemicControl_Class210040])
	(label "Scenario:No HbA1c No GlycoHem in last 12 months")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Class210039]))

([ATHENA_GlycemicControl_Class210038] of  Scenario

	(followed_by [ATHENA_GlycemicControl_Class210044])
	(label "Scenario:DM Type I")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Class360004]))

([ATHENA_GlycemicControl_Class210039] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210004]
		[ATHENA_GlycemicControl_Instance_10020]
		[ATHENA_GlycemicControl_Class1300004])
	(label "No HbA1c No GlycHem in past year")
	(operator AND))

([ATHENA_GlycemicControl_Class210040] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class230000]
		[ATHENA_GlycemicControl_Class230004])
	(label "dOrder Labs"))

([ATHENA_GlycemicControl_Class210041] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Instance_50000])
	(label "dOrder HbA1c or GlycoHem labs now")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class210039]))

([ATHENA_GlycemicControl_Class210042] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210037])
	(%3ATO [ATHENA_GlycemicControl_Class210040]))

([ATHENA_GlycemicControl_Class210043] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210040])
	(%3ATO [ATHENA_GlycemicControl_Class210041]))

([ATHENA_GlycemicControl_Class210044] of  Choice_Step

	(branches [ATHENA_GlycemicControl_Class210045])
	(label "DM-I out of scope"))

([ATHENA_GlycemicControl_Class210045] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class210046])
	(label "dDM-I out of scope msg")
	(strict_rule_in_condition [ATHENA_DM_Eye_Instance_100022]))

([ATHENA_GlycemicControl_Class210046] of  On_Screen_Message

	(label "dDM Type I out of scope message")
	(message "Recommendations for DM Type I is out of scope of this CDS")
	(message_type Primary_Recommendation))

([ATHENA_GlycemicControl_Class210047] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210038])
	(%3ATO [ATHENA_GlycemicControl_Class210044]))

([ATHENA_GlycemicControl_Class210048] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210044])
	(%3ATO [ATHENA_GlycemicControl_Class210045]))

([ATHENA_GlycemicControl_Class210049] of  On_Screen_Message

	(label "Consider if insulin refused")
	(message "Consider this alternative therapy if insulin is refused.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class210051] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class210049])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class210052] of  N_ary_Criterion

	(criteria
		[KB_987250_Class2]
		[ATHENA_GlycemicControl_Class80018]
		[ATHENA_GlycemicControl_Class150021]
		[ATHENA_GlycemicControl_Class210053])
	(label "Presence of contraindicated drug that is not ACE ARB aspirin")
	(operator AND))

([ATHENA_GlycemicControl_Class210053] of  Presence_Criterion

	(domain_term aspirin)
	(entry_type Medication)
	(label "Absence of aspirin")
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class210130] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class140001]
		[ATHENA_GlycemicControl_Class210131])
	(label "dashboard goal not satisfied and drug at max dose and absence of MF")
	(operator AND))

([ATHENA_GlycemicControl_Class210131] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class1300424])
	(label "drug at max dose")
	(operator NOT))

([ATHENA_GlycemicControl_Class210132] of  Presence_Criterion

	(domain_term BIGUANIDE)
	(entry_type Medication)
	(label "Absence of metformin")
	(mood Authorized)
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class210133] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210134]
		[ATHENA_GlycemicControl_Class1300424])
	(label "Presence of oral hypoglycemic agent not at max doxe")
	(operator AND))

([ATHENA_GlycemicControl_Class210134] of  Presence_Criterion

	(domain_term Oral_Hypoglycemic_Agent)
	(entry_type Medication)
	(label "Presence of oral hypoglycemic agent")
	(mood Authorized)
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class210135] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class90021]
		[ATHENA_GlycemicControl_Class120322]
		[ATHENA_GlycemicControl_Class210133]
		[ATHENA_GlycemicControl_Class210136])
	(label "Criteria to rule out MF")
	(operator OR))

([ATHENA_GlycemicControl_Class210136] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210134]
		[KB_987250_Class2])
	(label "Presence of contraindication to active presc oral hypoglycemic agent")
	(operator AND))

([ATHENA_GlycemicControl_Class210267] of  N_ary_Criterion

	(criteria
		[KB_987250_Class2]
		[ATHENA_GlycemicControl_Class1300424])
	(label "Presence of contranindication OR drug not at max dose")
	(operator OR))

([ATHENA_GlycemicControl_Class210399] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class210400]))

([ATHENA_GlycemicControl_Class210400] of  Conditional_On_Screen_Message

	(label "Check serum creatiine if on metformin")
	(message "Check serum creatinine yearly if on metformin")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class90019]))

([ATHENA_GlycemicControl_Class22] of  Action_Choice

	(actions [KB_390055_Class9])
	(label "Substitute")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class780510]))

([ATHENA_GlycemicControl_Class220000] of  On_Screen_Message

	(label "Refer to Diabetes Management Team msg")
	(message "Refer to Diabetes Care Management Team")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class220001] of  On_Screen_Message

	(label "Night-time use of insulin")
	(message "Preference for night-time use of insulin")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class220002] of  Numeric_Term_Criterion

	(aggregation_operator count)
	(entry_type Medication)
	(label "1 non-insulin agent")
	(numeric_domain_term Non_Insulin_Related_Glucose_Reg_Agents)
	(operator %3D)
	(status "active")
	(value 1.0))

([ATHENA_GlycemicControl_Class220003] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class220002]
		[ATHENA_DM_Eye_Instance_80028]
		[ATHENA_GlycemicControl_Class210005])
	(label "1 non-insulin agent &  presence of HbA1c or Glyco")
	(operator AND))

([ATHENA_GlycemicControl_Class220004] of  Scenario

	(consultation_template [ATHENA_GlycemicControl_Class250001])
	(followed_by [ATHENA_GlycemicControl_Class220006])
	(label "dOn one drug  not insulin")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Class220003]))

([ATHENA_GlycemicControl_Class220006] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class230036]
		[ATHENA_GlycemicControl_Class240016]
		[ATHENA_GlycemicControl_Class210015]
		[ATHENA_GlycemicControl_Class230008])
	(label "dOn One Drug"))

([ATHENA_GlycemicControl_Class220007] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class220004])
	(%3ATO [ATHENA_GlycemicControl_Class220006]))

([ATHENA_GlycemicControl_Class230000] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Instance_50000]
		[ATHENA_GlycemicControl_Class310002])
	(label "dOrder HbA1c lab now")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class230003]))

([ATHENA_GlycemicControl_Class230001] of  Presence_Criterion

	(domain_term Glycosylated_Hemoglobin)
	(entry_type Numeric_Entry)
	(label "Absence of GlycoHem")
	(period [time%3AINSTANCE_4])
	(presence FALSE))

([ATHENA_GlycemicControl_Class230002] of  Presence_Criterion

	(domain_term Glycosylated_Hemoglobin)
	(entry_type Numeric_Entry)
	(label "Presence of GlycoHem")
	(period [time%3AINSTANCE_4])
	(presence TRUE))

([ATHENA_GlycemicControl_Class230003] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class230001]
		[ATHENA_GlycemicControl_Instance_10020])
	(label "Absence of HbA1c in past year and Absence of GlycoHem")
	(operator AND))

([ATHENA_GlycemicControl_Class230004] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class230005])
	(label "dOrder GlycoHem now")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class230002]))

([ATHENA_GlycemicControl_Class230005] of  Order_TestProcedure

	(label "Glycosylated Hemoglobin")
	(test_or_procedure Glycosylated_Hemoglobin)
	(when [ATHENA_DM_Eye_Instance_100018]))

([ATHENA_GlycemicControl_Class230006] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210040])
	(%3ATO [ATHENA_GlycemicControl_Class230004]))

([ATHENA_GlycemicControl_Class230007] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210040])
	(%3ATO [ATHENA_GlycemicControl_Class230000]))

([ATHENA_GlycemicControl_Class230008] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class260007]
		[ATHENA_GlycemicControl_Class1140231])
	(followed_by [ATHENA_GlycemicControl_Class720168])
	(label "dSubstitute")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class850009]))

([ATHENA_GlycemicControl_Class230009] of  %3APAL-CONSTRAINT

	(%3APAL-NAME "Non Insulin Hypoglycemic Agent contraindicated")
	(%3APAL-RANGE "(defrange ?current_med :FRAME Medication)\n(defrange ?problem :FRAME Note_Entry)\n(defrange ?problem1 :FRAME Note_Entry)\n(defrange ?med_class :FRAME Drug_Usage)\n(defrange ?contraindication :FRAME Medical_Conditions_Metaclass Absolute_Contraindications)\n(defrange ?derived_contraindication :FRAME Diagnostic_Term_Metaclass)\n(defrange ?complication :FRAME Medical_Conditions_Metaclass Complication_Factor)\n(defrange ?derived_complication :FRAME Diagnostic_Term_Metaclass)")
	(%3APAL-STATEMENT "(exists ?current_med \n        (and (or (not (own-slot-not-null mood ?current_med ))\n                 (mood ?current_med Authorized)) \n             (patient_id ?current_med $patient_id)\n             (is-class (drug_name ?current_med))\n             (exists ?med_class\n                     (and (equal-or-subclass-of (coerce-to-class (drug_name ?current_med)) (Drug_Class_Name ?med_class))\n                          (or (subclass-of  (Drug_Class_Name ?med_class) Injectable_hypoglycemic_agent_not_insulin)\n                              (subclass-of  (Drug_Class_Name ?med_class) Oral_Hypoglycemic_Agent))\n                          (not (exists ?complication \n                                       (and  (Complication_Factor ?med_class ?complication)\n                                             (exists ?problem1 \n                                                     (and (patient_id ?problem1 $patient_id)\n                                                          (is-class (domain_term ?problem1) )\n                                                          (equal-or-subclass-of  (coerce-to-class (domain_term ?problem1))\n                                                                                 ?complication))))))\n                          (not (exists ?derived_complication\n                                       (and (Complication_Factor ?med_class ?derived_complication)\n                                            (is-derivable ?derived_complication))))\n                          (or (exists ?contraindication \n                                      (and  (Absolute_Contraindications ?med_class ?contraindication)\n                                            (exists ?problem \n                                                    (and (patient_id ?problem $patient_id)\n                                                         (is-class (domain_term ?problem) )\n                                                         (equal-or-subclass-of  (coerce-to-class (domain_term ?problem))\n                                                                                ?contraindication)))))\n                              (exists ?derived_contraindication\n                                      (and (Absolute_Contraindications ?med_class ?derived_contraindication)\n                                           (is-derivable ?derived_contraindication))))\n                     ))))\n\n"))

([ATHENA_GlycemicControl_Class230010] of  PAL_Criterion

	(case_variable "$patient_id")
	(label "Non Insulin Hypoglycemic Agent contraindicated")
	(PAL_constraint [ATHENA_GlycemicControl_Class230009]))

([ATHENA_GlycemicControl_Class230011] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class230016]
		[ATHENA_GlycemicControl_Class210036])
	(label "dOn MF, add Glip or Gly")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class230018])
	(strict_rule_out_condition [ATHENA_GlycemicControl_Class1300424]))

([ATHENA_GlycemicControl_Class230012] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class90000])
	(label "NOT Glipizide contraindicated")
	(operator NOT))

([ATHENA_GlycemicControl_Class230013] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class90006])
	(label "NOT glyburide contraindicated")
	(operator NOT))

([ATHENA_GlycemicControl_Class230014] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class230012]
		[ATHENA_GlycemicControl_Class230013])
	(label "NOT glipizide contraindicated and NOT glyburide contraindicated")
	(operator AND))

([ATHENA_GlycemicControl_Class230015] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class230012]
		[ATHENA_GlycemicControl_Class230013])
	(label "NOT glipizide contraindicated or NOT glyburide contraindicated")
	(operator OR))

([ATHENA_GlycemicControl_Class230016] of  Evaluate_Start_Activity

	(activity_class "Medication")
	(alternatives
		[ATHENA_GlycemicControl_Class60000]
		[ATHENA_GlycemicControl_Class70000])
	(fine-grain_priority 1000)
	(label "Evaluate start glip or glyb"))

([ATHENA_GlycemicControl_Class230017] of  Action_Choice

	(actions
		[KB_308520_Class2]
		[ATHENA_GlycemicControl_Class210036])
	(label "dOn Glip or Gly, add MF")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class230019])
	(strict_rule_out_condition [ATHENA_GlycemicControl_Class1300424]))

([ATHENA_GlycemicControl_Class230018] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class230015]
		[ATHENA_GlycemicControl_Class90019])
	(label "On MF & (NOT glip contra or NOT glyb contra)")
	(operator AND))

([ATHENA_GlycemicControl_Class230019] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class120001]
		[ATHENA_GlycemicControl_Class230020])
	(label "On SU, MF not contra")
	(operator AND))

([ATHENA_GlycemicControl_Class230020] of  Presence_Criterion

	(domain_term SULFONYLUREAS_2NDGEN)
	(entry_type Medication)
	(label "Presence of SU")
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class230021] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class90019]
		[ATHENA_GlycemicControl_Class90000]
		[ATHENA_GlycemicControl_Class90006])
	(label "On MF and Glip contra and Glyb contra")
	(operator AND))

([ATHENA_GlycemicControl_Class230022] of  Action_Choice

	(actions
		[KB_390055_Class3]
		[ATHENA_GlycemicControl_Class210025]
		[ATHENA_GlycemicControl_Class210036])
	(label "dOn MF, Glip contra and Glyb contra, add insulin or add alternative")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class230021])
	(strict_rule_out_condition [ATHENA_GlycemicControl_Class1300424]))

([ATHENA_GlycemicControl_Class230024] of  Action_Choice

	(actions
		[KB_390055_Class3]
		[ATHENA_GlycemicControl_Class210025]
		[ATHENA_GlycemicControl_Class230026]
		[ATHENA_GlycemicControl_Class210036])
	(label "dOn Glip or Glyb, MF contra, add insulin or add alternative")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class230025])
	(strict_rule_out_condition [ATHENA_GlycemicControl_Class1300424]))

([ATHENA_GlycemicControl_Class230025] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class230020]
		[ATHENA_GlycemicControl_Class110003])
	(label "On SU, MF contra")
	(operator AND))

([ATHENA_GlycemicControl_Class230026] of  Conditional_On_Screen_Message

	(label "Start insulin msg in presence of SU")
	(message "If adding Insulin in the presence of SU, titrate SU down while titrating insulin up.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class230020]))

([ATHENA_GlycemicControl_Class230028] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210014]
		[ATHENA_GlycemicControl_Class110003]
		[ATHENA_GlycemicControl_Class90000]
		[ATHENA_GlycemicControl_Class90006])
	(label "NOT at dtarget & MF contra & glip contra & glyb contra")
	(operator AND))

([ATHENA_GlycemicControl_Class230029] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class220006])
	(%3ATO [ATHENA_GlycemicControl_Class230008]))

([ATHENA_GlycemicControl_Class230035] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class20000])
	(followed_by [ATHENA_GlycemicControl_Class1080004])
	(label "dIncrease dose")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class1300424]))

([ATHENA_GlycemicControl_Class230036] of  Action_Choice

	(followed_by [ATHENA_GlycemicControl_Class230039])
	(label "dIntensify")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class230037]))

([ATHENA_GlycemicControl_Class230037] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210014]
		[ATHENA_GlycemicControl_Class230038])
	(label "NOT at dtarget and no contraindication to current med")
	(operator AND))

([ATHENA_GlycemicControl_Class230038] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class780508])
	(label "NOT contraindication to non insulin agent")
	(operator NOT))

([ATHENA_GlycemicControl_Class230039] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class230035]
		[ATHENA_GlycemicControl_Class230011]
		[ATHENA_GlycemicControl_Class230017]
		[ATHENA_GlycemicControl_Class230024]
		[ATHENA_GlycemicControl_Class230022]
		[ATHENA_GlycemicControl_Class210024])
	(label "dIntensify choices"))

([ATHENA_GlycemicControl_Class240000] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class220006])
	(%3ATO [ATHENA_GlycemicControl_Class230036]))

([ATHENA_GlycemicControl_Class240001] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class230036])
	(%3ATO [ATHENA_GlycemicControl_Class230039]))

([ATHENA_GlycemicControl_Class240002] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class230039])
	(%3ATO [ATHENA_GlycemicControl_Class230035]))

([ATHENA_GlycemicControl_Class240003] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class230039])
	(%3ATO [ATHENA_GlycemicControl_Class230011]))

([ATHENA_GlycemicControl_Class240004] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class230039])
	(%3ATO [ATHENA_GlycemicControl_Class230017]))

([ATHENA_GlycemicControl_Class240005] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class230039])
	(%3ATO [ATHENA_GlycemicControl_Class230024]))

([ATHENA_GlycemicControl_Class240006] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class230039])
	(%3ATO [ATHENA_GlycemicControl_Class230022]))

([ATHENA_GlycemicControl_Class240007] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class230039])
	(%3ATO [ATHENA_GlycemicControl_Class210024]))

([ATHENA_GlycemicControl_Class240009] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "HbA1c<7")
	(numeric_domain_term HbA1C)
	(operator %3C)
	(value 7.0))

([ATHENA_GlycemicControl_Class240010] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "Glycohemoglobin<9")
	(numeric_domain_term Glycosylated_Hemoglobin)
	(operator %3C)
	(value 9.0))

([ATHENA_GlycemicControl_Class240011] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class240009]
		[ATHENA_GlycemicControl_Class240010])
	(label "HbA1c<7 OR Glycohem<9")
	(operator OR))

([ATHENA_GlycemicControl_Class240012] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class240013])
	(label "dAlert:  low HbA1c or low Glycohem")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class240011]))

([ATHENA_GlycemicControl_Class240013] of  On_Screen_Message

	(label "dAlert lor HbA1c or Glycohem")
	(message "ALERT:  patient has low HbA1c or low GlycoHemoglobin, at high risk for cardiovascular event and hypoglycemia.")
	(message_type Primary_Recommendation)
	(references [ATHENA_GlycemicControl_Class240014]))

([ATHENA_GlycemicControl_Class240014] of  Supporting_Material

	(label "Dr. Michael Ashcraft"))

([ATHENA_GlycemicControl_Class240015] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class170506]
		[ATHENA_GlycemicControl_Class240011])
	(label "(HbA1c<6 or Glycohem<8) AND not presence of contraindication")
	(operator AND))

([ATHENA_GlycemicControl_Class240016] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class240013])
	(label "dLow HbA1c Alert")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class240011]))

([ATHENA_GlycemicControl_Class240017] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class220006])
	(%3ATO [ATHENA_GlycemicControl_Class240016]))

([ATHENA_GlycemicControl_Class240018] of  Scenario

	(consultation_template [ATHENA_GlycemicControl_Class250001])
	(followed_by [ATHENA_GlycemicControl_Class550006])
	(label "dOn Two drugs not insulin")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Class240038]))

([ATHENA_GlycemicControl_Class240019] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class240016]
		[ATHENA_GlycemicControl_Class210015]
		[ATHENA_GlycemicControl_Class240026]
		[ATHENA_GlycemicControl_Class230008])
	(label "dTwo drug choices"))

([ATHENA_GlycemicControl_Class240020] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240018])
	(%3ATO [ATHENA_GlycemicControl_Class240019]))

([ATHENA_GlycemicControl_Class240021] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240019])
	(%3ATO [ATHENA_GlycemicControl_Class230008]))

([ATHENA_GlycemicControl_Class240022] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240019])
	(%3ATO [ATHENA_GlycemicControl_Class240016]))

([ATHENA_GlycemicControl_Class240024] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class220006])
	(%3ATO [ATHENA_GlycemicControl_Class210015]))

([ATHENA_GlycemicControl_Class240025] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240019])
	(%3ATO [ATHENA_GlycemicControl_Class210015]))

([ATHENA_GlycemicControl_Class240026] of  Action_Choice

	(followed_by [ATHENA_GlycemicControl_Class240028])
	(label "dIntensify 2 drugs")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class230037]))

([ATHENA_GlycemicControl_Class240027] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240019])
	(%3ATO [ATHENA_GlycemicControl_Class240026]))

([ATHENA_GlycemicControl_Class240028] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class230035]
		[ATHENA_GlycemicControl_Class240031]
		[ATHENA_GlycemicControl_Class240033])
	(label "dIntensify two drug choices"))

([ATHENA_GlycemicControl_Class240029] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240026])
	(%3ATO [ATHENA_GlycemicControl_Class240028]))

([ATHENA_GlycemicControl_Class240030] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240028])
	(%3ATO [ATHENA_GlycemicControl_Class230035]))

([ATHENA_GlycemicControl_Class240031] of  Action_Choice

	(actions
		[KB_390055_Class3]
		[ATHENA_GlycemicControl_Class210025]
		[ATHENA_GlycemicControl_Class230026]
		[ATHENA_GlycemicControl_Class240034]
		[ATHENA_GlycemicControl_Class210036])
	(label "dOn SU add insulin or add alternative, refer")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class230020])
	(strict_rule_out_condition [ATHENA_GlycemicControl_Class1300424]))

([ATHENA_GlycemicControl_Class240033] of  Action_Choice

	(actions
		[KB_390055_Class3]
		[ATHENA_GlycemicControl_Class210025]
		[ATHENA_GlycemicControl_Class240034]
		[ATHENA_GlycemicControl_Class210036])
	(label "dNot on SU, add insulin or add alternative, refer")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class90030])
	(strict_rule_out_condition [ATHENA_GlycemicControl_Class1300424]))

([ATHENA_GlycemicControl_Class240034] of  Referral

	(label "Refer to endocrinologist")
	(rule_in_condition [criterion_INSTANCE_00001])
	(who_to endocrinologist))

([ATHENA_GlycemicControl_Class240035] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240028])
	(%3ATO [ATHENA_GlycemicControl_Class240031]))

([ATHENA_GlycemicControl_Class240036] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240028])
	(%3ATO [ATHENA_GlycemicControl_Class240033]))

([ATHENA_GlycemicControl_Class240037] of  Numeric_Term_Criterion

	(aggregation_operator count)
	(entry_type Medication)
	(label "2 non-insulin agent")
	(numeric_domain_term Non_Insulin_Related_Glucose_Reg_Agents)
	(operator %3D)
	(status "active")
	(value 2.0))

([ATHENA_GlycemicControl_Class240038] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class240037]
		[ATHENA_DM_Eye_Instance_80028]
		[ATHENA_GlycemicControl_Class210005])
	(label "2 non-insulin agent &  presence of HbA1c or Glyco & Not Type 1")
	(operator AND))

([ATHENA_GlycemicControl_Class240039] of  Scenario

	(followed_by [ATHENA_GlycemicControl_Class240048])
	(label "dInsulin only")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Class460003]))

([ATHENA_GlycemicControl_Class240040] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210006]
		[KB_362799_Class1]
		[ATHENA_GlycemicControl_Class240041])
	(label "Presence of insulin & not other agents & presence of HbA1c or Glyco & Not Type 1")
	(operator AND))

([ATHENA_GlycemicControl_Class240041] of  Presence_Criterion

	(domain_term Non_Insulin_Related_Glucose_Reg_Agents)
	(entry_type Medication)
	(label "Absence of non-insulin related glucose regulation agents")
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class240042] of  Choice_Step

	(branches [ATHENA_GlycemicControl_Class240043])
	(label "Insulin only out of scope"))

([ATHENA_GlycemicControl_Class240043] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class240044]
		[ATHENA_GlycemicControl_Class240034]
		[ATHENA_GlycemicControl_Class240045])
	(label "dInsulin only out of scope")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class240040]))

([ATHENA_GlycemicControl_Class240044] of  On_Screen_Message

	(label "Insulin only management out of scope")
	(message "Management of insulin is beyond scope of this system.")
	(message_type Primary_Recommendation)
	(rule_in_condition [criterion_INSTANCE_00001]))

([ATHENA_GlycemicControl_Class240045] of  Referral

	(label "Refer to DM care team")
	(rule_in_condition [criterion_INSTANCE_00001])
	(who_to DM_care_team))

([ATHENA_GlycemicControl_Class240048] of  Choice_Step

	(branches [ATHENA_GlycemicControl_Class240043])
	(label "dInsulin only out of scope"))

([ATHENA_GlycemicControl_Class240049] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240039])
	(%3ATO [ATHENA_GlycemicControl_Class240048]))

([ATHENA_GlycemicControl_Class240050] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240048])
	(%3ATO [ATHENA_GlycemicControl_Class240043]))

([ATHENA_GlycemicControl_Class240051] of  Scenario

	(consultation_template [ATHENA_GlycemicControl_Class250001])
	(followed_by [ATHENA_GlycemicControl_Class240053])
	(label "dOn insulin + one non-insulin drug")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Class240052]))

([ATHENA_GlycemicControl_Class240052] of  N_ary_Criterion

	(criteria
		[KB_362799_Class1]
		[ATHENA_GlycemicControl_Class220002]
		[ATHENA_GlycemicControl_Class210005])
	(label "Insulin & 1 other agents & presence of HbA1c or Glyco")
	(operator AND))

([ATHENA_GlycemicControl_Class240053] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class240057]
		[ATHENA_GlycemicControl_Class210015]
		[ATHENA_GlycemicControl_Class230008]
		[ATHENA_GlycemicControl_Class240016])
	(label "dOn insulin + 1 non-insulin agent"))

([ATHENA_GlycemicControl_Class240054] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240051])
	(%3ATO [ATHENA_GlycemicControl_Class240053]))

([ATHENA_GlycemicControl_Class240055] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240053])
	(%3ATO [ATHENA_GlycemicControl_Class230008]))

([ATHENA_GlycemicControl_Class240056] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240053])
	(%3ATO [ATHENA_GlycemicControl_Class240016]))

([ATHENA_GlycemicControl_Class240057] of  Action_Choice

	(followed_by [ATHENA_GlycemicControl_Class240058])
	(label "dIntensify when on insulin")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class230037]))

([ATHENA_GlycemicControl_Class240058] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class240062]
		[ATHENA_GlycemicControl_Class230035])
	(label "dIntensify when on insulin choices"))

([ATHENA_GlycemicControl_Class240059] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240053])
	(%3ATO [ATHENA_GlycemicControl_Class240057]))

([ATHENA_GlycemicControl_Class240060] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240057])
	(%3ATO [ATHENA_GlycemicControl_Class240058]))

([ATHENA_GlycemicControl_Class240061] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240058])
	(%3ATO [ATHENA_GlycemicControl_Class230035]))

([ATHENA_GlycemicControl_Class240062] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class240034])
	(label "dOral drug at max dose, refer")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class210131]))

([ATHENA_GlycemicControl_Class240064] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240051])
	(%3ATO [ATHENA_GlycemicControl_Class240053]))

([ATHENA_GlycemicControl_Class240065] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240058])
	(%3ATO [ATHENA_GlycemicControl_Class240062]))

([ATHENA_GlycemicControl_Class250000] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "Age>75")
	(numeric_domain_term Age)
	(operator %3E)
	(value 75.0))

([ATHENA_GlycemicControl_Class250001] of  Consultation_Guideline

	(first_step [ATHENA_GlycemicControl_Class250002])
	(label "dAll scenarios xcept DMI and Insulin only")
	(steps
		[ATHENA_GlycemicControl_Class250002]
		[ATHENA_GlycemicControl_Class80004]
		[ATHENA_GlycemicControl_Class260036]
		[ATHENA_GlycemicControl_Class260041]
		[ATHENA_GlycemicControl_Class260050]
		[ATHENA_GlycemicControl_Class290000]
		[ATHENA_GlycemicControl_Class300000]
		[ATHENA_GlycemicControl_Class330006]
		[ATHENA_GlycemicControl_Class350010]
		[ATHENA_GlycemicControl_Class380018]
		[ATHENA_GlycemicControl_Class390000]
		[ATHENA_GlycemicControl_Class350000]
		[ATHENA_GlycemicControl_Class150027]
		[ATHENA_GlycemicControl_Class510001]
		[ATHENA_GlycemicControl_Class620005]
		[ATHENA_GlycemicControl_Class330020]
		[ATHENA_GlycemicControl_Class630002]
		[ATHENA_GlycemicControl_Class640001]
		[ATHENA_GlycemicControl_Class640000]
		[ATHENA_GlycemicControl_Class630003]
		[ATHENA_GlycemicControl_Class630009]
		[ATHENA_GlycemicControl_Class640239]
		[ATHENA_GlycemicControl_Class640232]
		[ATHENA_GlycemicControl_Class640347]
		[ATHENA_GlycemicControl_Class920000])
	(transitions
		[ATHENA_GlycemicControl_Class260002]
		[ATHENA_GlycemicControl_Class260040]
		[ATHENA_GlycemicControl_Class260044]
		[ATHENA_GlycemicControl_Class260052]
		[ATHENA_GlycemicControl_Class310003]
		[ATHENA_GlycemicControl_Class310004]
		[ATHENA_GlycemicControl_Class330007]
		[ATHENA_GlycemicControl_Class350012]
		[ATHENA_GlycemicControl_Class380019]
		[ATHENA_GlycemicControl_Class410007]
		[ATHENA_GlycemicControl_Class430002]
		[ATHENA_GlycemicControl_Class480001]
		[ATHENA_GlycemicControl_Class510003]
		[ATHENA_GlycemicControl_Class620006]
		[ATHENA_GlycemicControl_Class620000]
		[ATHENA_GlycemicControl_Class660295]
		[ATHENA_GlycemicControl_Class660296]
		[ATHENA_GlycemicControl_Class660297]
		[ATHENA_GlycemicControl_Class660298]
		[ATHENA_GlycemicControl_Class660299]
		[ATHENA_GlycemicControl_Class660300]
		[ATHENA_GlycemicControl_Class660301]
		[ATHENA_GlycemicControl_Class660302]
		[ATHENA_GlycemicControl_Class930003]))

([ATHENA_GlycemicControl_Class250002] of  Consultation_Branch_Step

	(branches
		[ATHENA_GlycemicControl_Class80004]
		[ATHENA_GlycemicControl_Class260036]
		[ATHENA_GlycemicControl_Class260041]
		[ATHENA_GlycemicControl_Class260050]
		[ATHENA_GlycemicControl_Class290000]
		[ATHENA_GlycemicControl_Class300000]
		[ATHENA_GlycemicControl_Class330006]
		[ATHENA_GlycemicControl_Class350010]
		[ATHENA_GlycemicControl_Class380018]
		[ATHENA_GlycemicControl_Class390000]
		[ATHENA_GlycemicControl_Class350000]
		[ATHENA_GlycemicControl_Class150027]
		[ATHENA_GlycemicControl_Class510001]
		[ATHENA_GlycemicControl_Class620005]
		[ATHENA_GlycemicControl_Class330020]
		[ATHENA_GlycemicControl_Class630002]
		[ATHENA_GlycemicControl_Class630003]
		[ATHENA_GlycemicControl_Class920000])
	(label "dAll CDS scenarios")
	(selection_method some_of))

([ATHENA_GlycemicControl_Class250003] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class150027]))

([ATHENA_GlycemicControl_Class250004] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class250005])
	(label "dEvalaute start ACE/ARB")
	(rule_in [ATHENA_GlycemicControl_Class600001]))

([ATHENA_GlycemicControl_Class250005] of  Evaluate_Start_Activity

	(activity_class "Medication")
	(alternatives
		[ATHENA_GlycemicControl_Class250006]
		[ATHENA_GlycemicControl_Class250015])
	(label "Evaluate start ACE/ARB")
	(therapeutic_goal [ATHENA_GlycemicControl_Instance_10036]))

([ATHENA_GlycemicControl_Class250006] of  Drug_Usage

	(Absolute_Contraindications
		Angioedema+due+to+ADR+to+ACEI
		K%3E5)
	(collateral_actions
		[ATHENA_GlycemicControl_Class440009]
		[ATHENA_GlycemicControl_Class440019]
		[ATHENA_GlycemicControl_Class490002]
		[ATHENA_GlycemicControl_Class580002]
		[ATHENA_GlycemicControl_Class580003]
		[ATHENA_GlycemicControl_Class580004]
		[ATHENA_GlycemicControl_Class580005]
		[ATHENA_GlycemicControl_Class580006]
		[ATHENA_GlycemicControl_Class580007]
		[ATHENA_GlycemicControl_Class580008]
		[ATHENA_GlycemicControl_Class730000])
	(Compelling_Indications DM-Type2)
	(Do_Not_Start_Conditions
		Absence+of+K+in+past+mo
		Absence+of+SBP+in+past+mo
		Poor_renal_function
		SBP%3C110
		Absence+of+eGFR+in+past+month
		20PercentIncreaseCreatinineACE_ARB)
	(Drug_Class_Name ACE_Inhibitors)
	(label "ACE inhibitor DM")
	(Relative_Contraindications
		Renovascular_Disease
		Prescription_Ksparingdiuretic
		Aortic_stenosis
		Renal_artery_stenosis
		Prescription_Aliskiren
		Hypertrophic_cardiomyopathy
		CKD_Stage3or4_15eGFR_gt60))

([ATHENA_GlycemicControl_Class250007] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "K>5.5")
	(numeric_domain_term Potassium)
	(operator %3E)
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 5.5))

([ATHENA_GlycemicControl_Class250008] of  Presence_Criterion

	(domain_term ACE_Inhibitors)
	(entry_type Medication)
	(label "Presence of ACE-I")
	(period [ATHENA_GlycemicControl_Class250009])
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class250009] of  Relative_Time_Interval_Definite

	(how_many "3")
	(label "last 3 months")
	(polarity Before)
	(relative_time_point [time%3AINSTANCE_1])
	(time_unit month))

([ATHENA_GlycemicControl_Class250010] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class250007]
		[ATHENA_GlycemicControl_Class250008])
	(label "K>5.5 and ACE-I in last 3 months")
	(operator AND))

([ATHENA_GlycemicControl_Class250014] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class80018]
		[ATHENA_GlycemicControl_Class150021])
	(label "Absence of ACE-i and ARB")
	(operator AND))

([ATHENA_GlycemicControl_Class250015] of  Drug_Usage

	(Absolute_Contraindications
		Angioedema_due_to_ADR_to_ARB
		K%3E5)
	(collateral_actions
		[ATHENA_GlycemicControl_Class440009]
		[ATHENA_GlycemicControl_Class440019]
		[ATHENA_GlycemicControl_Class490006]
		[ATHENA_GlycemicControl_Class580002]
		[ATHENA_GlycemicControl_Class580003]
		[ATHENA_GlycemicControl_Class580004]
		[ATHENA_GlycemicControl_Class580005]
		[ATHENA_GlycemicControl_Class580006]
		[ATHENA_GlycemicControl_Class580007]
		[ATHENA_GlycemicControl_Class580008]
		[ATHENA_GlycemicControl_Class730000])
	(Compelling_Indications Contraindication_to_ACE_Inhibitor_defined_concept)
	(Do_Not_Start_Conditions
		Absence+of+K+in+past+mo
		Absence+of+SBP+in+past+mo
		SBP%3C110
		Poor_renal_function
		Absence+of+eGFR+in+past+month)
	(Drug_Class_Name Angiotensin_II_receptor_blockers)
	(label "ARB DM")
	(Relative_Contraindications
		Renovascular_Disease
		Aortic_stenosis
		Hypertrophic_cardiomyopathy
		20PercentIncreaseCreatinineACE_ARB
		Prescription_Aliskiren
		CKD_stage_3_or_4_or_5_or_eGFR_lt_50
		Hypertrophic_cardiomyopathy
		Presence+of+ACE+Inhibitor+and+AA)
	(Relative_Indications DM-Type2))

([ATHENA_GlycemicControl_Class250016] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class250007]
		[ATHENA_GlycemicControl_Class250017])
	(label "K>5.5 and ARB in last 3 months")
	(operator AND))

([ATHENA_GlycemicControl_Class250017] of  Presence_Criterion

	(domain_term Angiotensin_II_receptor_blockers)
	(entry_type Medication)
	(label "Presence of ARB during last 3 months")
	(period [ATHENA_GlycemicControl_Instance_10003])
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class250020] of  %3APAL-CONSTRAINT

	(%3APAL-NAME "ACE-I current med is contraindicated")
	(%3APAL-RANGE "(defrange ?current_med :FRAME Medication)\n(defrange ?problem :FRAME Note_Entry)\n(defrange ?problem1 :FRAME Note_Entry)\n(defrange ?med_class :FRAME Drug_Usage)\n(defrange ?contraindication :FRAME Medical_Conditions_Metaclass Absolute_Contraindications)\n(defrange ?derived_contraindication :FRAME Diagnostic_Term_Metaclass)\n(defrange ?complication :FRAME Medical_Conditions_Metaclass Complication_Factor)\n(defrange ?derived_complication :FRAME Diagnostic_Term_Metaclass)")
	(%3APAL-STATEMENT "(exists ?current_med\n        (and (or (not (own-slot-not-null mood ?current_med ))\n                 (mood ?current_med Authorized))\n             (patient_id ?current_med $patient_id)\n             (is-class (drug_name ?current_med))\n             (equal-or-subclass-of (coerce-to-class (drug_name ?current_med)) ACE_Inhibitors)\n             (exists ?med_class\n                     (and (equal-or-subclass-of (Drug_Class_Name ?med_class) ACE_Inhibitors)\n                          (not (exists ?complication\n                                       (and (Complication_Factor ?med_class ?complication)\n                                            (exists ?problem1\n                                                    (and (patient_id ?problem1 $patient_id)\n                                                         (is-class (domain_term ?problem1) )\n                                                         (equal-or-subclass-of (coerce-to-class (domain_term ?problem1))\n                                                                               ?complication))))))\n                          (not (exists ?derived_complication\n                                       (and (Complication_Factor ?med_class ?derived_complication)\n                                            (is-derivable ?derived_complication))))\n                                                                          \n                          (or (exists ?contraindication\n                                      (and (Absolute_Contraindications ?med_class ?contraindication)\n                                           (exists ?problem\n                                                   (and (patient_id ?problem $patient_id)\n                                                        (is-class (domain_term ?problem) )\n                                                        (equal-or-subclass-of (coerce-to-class (domain_term ?problem))\n                                                                              ?contraindication)))))\n                              (exists ?derived_contraindication\n                                      (and (Absolute_Contraindications ?med_class ?derived_contraindication)\n                                           (is-derivable ?derived_contraindication))))\n                     ))))\n\n"))

([ATHENA_GlycemicControl_Class250021] of  %3APAL-CONSTRAINT

	(%3APAL-NAME "ARB current med is contraindicated")
	(%3APAL-RANGE "(defrange ?current_med :FRAME Medication)\n(defrange ?problem :FRAME Note_Entry)\n(defrange ?problem1 :FRAME Note_Entry)\n(defrange ?med_class :FRAME Drug_Usage)\n(defrange ?contraindication :FRAME Medical_Conditions_Metaclass Absolute_Contraindications)\n(defrange ?derived_contraindication :FRAME Diagnostic_Term_Metaclass)\n(defrange ?complication :FRAME Medical_Conditions_Metaclass Complication_Factor)\n(defrange ?derived_complication :FRAME Diagnostic_Term_Metaclass)")
	(%3APAL-STATEMENT "(exists ?current_med\n        (and (or (not (own-slot-not-null mood ?current_med ))\n                 (mood ?current_med Authorized))\n             (patient_id ?current_med $patient_id)\n             (is-class (drug_name ?current_med))\n             (equal-or-subclass-of (coerce-to-class (drug_name ?current_med)) Angiotensin_II_receptor_blockers)\n             (exists ?med_class\n                     (and (equal-or-subclass-of  (Drug_Class_Name ?med_class) Angiotensin_II_receptor_blockers)\n                          (not (exists ?complication\n                                       (and (Complication_Factor ?med_class ?complication)\n                                            (exists ?problem1\n                                                    (and (patient_id ?problem1 $patient_id)\n                                                         (is-class (domain_term ?problem1) )\n                                                         (equal-or-subclass-of (coerce-to-class (domain_term ?problem1))\n                                                                               ?complication))))))\n                          (not (exists ?derived_complication\n                                       (and (Complication_Factor ?med_class ?derived_complication)\n                                            (is-derivable ?derived_complication))))\n                                                                          \n                          (or (exists ?contraindication\n                                      (and (Absolute_Contraindications ?med_class ?contraindication)\n                                           (exists ?problem\n                                                   (and (patient_id ?problem $patient_id)\n                                                        (is-class (domain_term ?problem) )\n                                                        (equal-or-subclass-of (coerce-to-class (domain_term ?problem))\n                                                                              ?contraindication)))))\n                              (exists ?derived_contraindication\n                                      (and (Absolute_Contraindications ?med_class ?derived_contraindication)\n                                           (is-derivable ?derived_contraindication))))\n                     ))))\n\n"))

([ATHENA_GlycemicControl_Class250022] of  PAL_Criterion

	(case_variable "$patient_id")
	(label "ACE-I current med is contraindicated")
	(PAL_constraint [ATHENA_GlycemicControl_Class250020]))

([ATHENA_GlycemicControl_Class250023] of  PAL_Criterion

	(case_variable "$patient_id")
	(label "ARB current med is contraindicated")
	(PAL_constraint [ATHENA_GlycemicControl_Class250021]))

([ATHENA_GlycemicControl_Class250024] of  Consultation_Action_Step

	(actions
		[ATHENA_GlycemicControl_Class450239]
		[ATHENA_GlycemicControl_Class430001])
	(label "ACE-i current med contraindicated, can substitute ARB")
	(rule_in [ATHENA_GlycemicControl_Class390015]))

([ATHENA_GlycemicControl_Class260000] of  Drug_Usage

	(Absolute_Contraindications Allergy+to+aspirin)
	(collateral_actions [ATHENA_GlycemicControl_Class370010])
	(Compelling_Indications DM-Type2)
	(Drug_Class_Name aspirin)
	(label "aspirin"))

([ATHENA_GlycemicControl_Class260001] of  Evaluate_Start_Activity

	(activity_class "Medication")
	(alternatives [ATHENA_GlycemicControl_Class260000])
	(label "Evaluate start aspirin"))

([ATHENA_GlycemicControl_Class260002] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class80004]))

([ATHENA_GlycemicControl_Class260003] of  PAL-QUERY

	(%3APAL-NAME "query for contraindicated glucose reg agent")
	(%3APAL-RANGE "(defrange ?current_med :FRAME Medication) \n(defrange ?problem :FRAME Note_Entry) \n(defrange ?med_class :FRAME Drug_Usage) \n(defrange ?contraindication :FRAME Medical_Conditions_Metaclass Absolute_Contraindications) \n(defrange ?derived_contraindication :FRAME Diagnostic_Term_Metaclass)")
	(%3APAL-STATEMENT "(findall ?current_med        \n         (and (or (not (own-slot-not-null mood ?current_med ))           \n                  (is-class (drug_name ?current_med))    \n                  (mood ?current_med Authorized))             \n              (patient_id ?current_med $patient_id)            \n              (exists ?med_class                    \n                      (and (equal-or-subclass-of (coerce-to-class (drug_name ?current_med)) \n                                                 (Drug_Class_Name ?med_class ))\n                           (subclass-of  (Drug_Class_Name ?med_class) Blood_Glucose_Regulation_Agent)                         \n                           (or (exists ?contraindication                                      \n                                       (and  (Absolute_Contraindications ?med_class ?contraindication)\n                                             (exists ?problem                                                    \n                                                     (and (patient_id ?problem $patient_id)                                                        \n                                                          (is-class (domain_term ?problem) )                                                        \n                                                          (equal-or-subclass-of  (coerce-to-class (domain_term ?problem))                                                                               \n                                                                                 ?contraindication)))))                             \n                               (exists ?derived_contraindication                                                                 \n                                       (and (Absolute_Contraindications ?med_class ?derived_contraindication)\n                                            (is-derivable ?derived_contraindication))))                    \n                      ))))"))

([ATHENA_GlycemicControl_Class260004] of  PAL-QUERY

	(%3APAL-DESCRIPTION "(patient_id ?current_med $patient_id)\n (patient_id ?problem $patient_id)")
	(%3APAL-NAME "query for contraindicated non insulin glucose reg agent")
	(%3APAL-RANGE "(defrange ?current_med :FRAME Medication) \n(defrange ?problem :FRAME Note_Entry) \n(defrange ?med_class :FRAME Drug_Usage) \n(defrange ?contraindication :FRAME Medical_Conditions_Metaclass Absolute_Contraindications) \n(defrange ?derived_contraindication :FRAME Diagnostic_Term_Metaclass)")
	(%3APAL-STATEMENT "(findall ?current_med        \n         (and (or (not (own-slot-not-null mood ?current_med ))           \n                  (is-class (drug_name ?current_med))    \n                  (mood ?current_med Authorized))             \n              (patient_id ?current_med $patient_id)\n              (exists ?med_class                    \n                      (and (equal-or-subclass-of (coerce-to-class (drug_name ?current_med)) \n                                                 (Drug_Class_Name ?med_class )) \n                           (subclass-of  (Drug_Class_Name ?med_class) Non_Insulin_Related_Glucose_Reg_Agents)                         \n                           (or (exists ?contraindication                                      \n                                       (and  (Absolute_Contraindications ?med_class ?contraindication)\n                                             (exists ?problem                                                    \n                                                     (and   \n                                                            (patient_id ?problem $patient_id)                                                     \n                                                            (is-class (domain_term ?problem) )                                                        \n                                                            (equal-or-subclass-of  (coerce-to-class (domain_term ?problem))                                                                               \n                                                                                   ?contraindication)))))                             \n                               (exists ?derived_contraindication                                                                 \n                                       (and (Absolute_Contraindications ?med_class ?derived_contraindication)\n                                            (is-derivable ?derived_contraindication))))                    \n                      ))))"))

([ATHENA_GlycemicControl_Class260005] of  PAL_Query

	(case_variable "$patient_id")
	(key_slot [drug_name])
	(label "query for contraindicated glucose reg agent")
	(PAL_query [ATHENA_GlycemicControl_Class260003]))

([ATHENA_GlycemicControl_Class260006] of  PAL_Query

	(case_variable "$patient_id")
	(key_slot [drug_name])
	(label "query for contraindicated non insulin glucose reg agent")
	(PAL_query [ATHENA_GlycemicControl_Class260004]))

([ATHENA_GlycemicControl_Class260007] of  Evaluate_Substitution_Activity

	(activity_class "Medication")
	(activity_spec Drug_Usage)
	(activity_spec_key [Drug_Class_Name])
	(activity_to_stop [ATHENA_GlycemicControl_Class760000])
	(alternatives
		[ATHENA_GlycemicControl_Instance_50004]
		[ATHENA_GlycemicControl_Class60000]
		[ATHENA_GlycemicControl_Class1070005]
		[ATHENA_GlycemicControl_Instance_50026])
	(fine-grain_priority 1000)
	(label "dEvaluate substitution first line agent")
	(recommendation_basis
		[is_first-line_drug_for]
		[is_second-line_drug_for]))

([ATHENA_GlycemicControl_Class260010] of  Stop_Activity

	(activity_to_stop [ATHENA_GlycemicControl_Class760000])
	(label "Stop contraindicated drug"))

([ATHENA_GlycemicControl_Class260011] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class210024]
		[ATHENA_GlycemicControl_Class210026])
	(label "dSubstitute choices"))

([ATHENA_GlycemicControl_Class260014] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class230008])
	(%3ATO [ATHENA_GlycemicControl_Class240016]))

([ATHENA_GlycemicControl_Class260016] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class220006])
	(%3ATO [ATHENA_GlycemicControl_Class230008]))

([ATHENA_GlycemicControl_Class260017] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240019])
	(%3ATO [ATHENA_GlycemicControl_Class230008]))

([ATHENA_GlycemicControl_Class260018] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240053])
	(%3ATO [ATHENA_GlycemicControl_Class230008]))

([ATHENA_GlycemicControl_Class260019] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class230008])
	(%3ATO [ATHENA_GlycemicControl_Class260011]))

([ATHENA_GlycemicControl_Class260020] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class260011])
	(%3ATO [ATHENA_GlycemicControl_Class210024]))

([ATHENA_GlycemicControl_Class260021] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class260011])
	(%3ATO [ATHENA_GlycemicControl_Class210026]))

([ATHENA_GlycemicControl_Class260022] of  Evaluate_Start_Activity

	(activity_class "Medication")
	(alternatives [ATHENA_GlycemicControl_Class250015])
	(label "Evaluate start ARB DM")
	(therapeutic_goal [ATHENA_GlycemicControl_Instance_10036]))

([ATHENA_GlycemicControl_Class260023] of  Consultation_Action_Step

	(actions
		[ATHENA_GlycemicControl_Class440119]
		[ATHENA_GlycemicControl_Class430001])
	(label "ARB current med contraindicted, can sub ACE-I")
	(rule_in [ATHENA_GlycemicControl_Class410032]))

([ATHENA_GlycemicControl_Class260024] of  Consultation_Action_Step

	(actions
		[ATHENA_GlycemicControl_Class260026]
		[ATHENA_GlycemicControl_Class390008]
		[ATHENA_GlycemicControl_Class390009])
	(label "ACE-I and ARB current med contraindicated, msg")
	(rule_in [ATHENA_GlycemicControl_Class260025]))

([ATHENA_GlycemicControl_Class260025] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControlAlt_Class0]
		[ATHENA_GlycemicControlAlt_Class8])
	(label "ACE-I and ARB curred med contraindicated")
	(operator AND))

([ATHENA_GlycemicControl_Class260026] of  On_Screen_Message

	(label "message that ACE-I and ARB contraindicated")
	(message "ACE-I and ARB are both contraindicated.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class610003]))

([ATHENA_GlycemicControl_Class260030] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "Creatinine > 2.5")
	(numeric_domain_term Creatinine)
	(operator %3E)
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 2.5))

([ATHENA_GlycemicControl_Class260031] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "Creatinine > 2.4")
	(numeric_domain_term Creatinine)
	(operator %3E)
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 2.4))

([ATHENA_GlycemicControl_Class260032] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class260031]
		[ATHENA_GlycemicControl_Instance_10000])
	(label "Creatinine > 2.4 and female")
	(operator AND))

([ATHENA_GlycemicControl_Class260033] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class260030]
		[KB_799906_Class4])
	(label "Creatinine > 2.5 and male")
	(operator AND))

([ATHENA_GlycemicControl_Class260034] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class260032]
		[ATHENA_GlycemicControl_Class260033])
	(label "Creatinine > 2.4 and female OR creatinine > 2.5 and male")
	(operator OR))

([ATHENA_GlycemicControl_Class260035] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class260034]
		[ATHENA_GlycemicControl_Class810000])
	(label "(Creatinine > 2.4 and female OR creatinine > 2.5 and male) or  eGFR<30")
	(operator OR))

([ATHENA_GlycemicControl_Class260036] of  Consultation_Action_Step

	(actions
		[ATHENA_GlycemicControl_Class260037]
		[ATHENA_GlycemicControl_Class260039])
	(label "High Creatinine or low eGFR, issue ALERT")
	(rule_in [ATHENA_GlycemicControl_Class260035]))

([ATHENA_GlycemicControl_Class260037] of  Referral

	(label "Refer to nephrologist")
	(who_to nephrologist))

([ATHENA_GlycemicControl_Class260039] of  On_Screen_Message

	(label "ALERT:  high creatinine or low eGFR")
	(message "ALERT:  high creatinine (>2.5 male or >2.4 female) or low eGFR (<30)")
	(message_type Primary_Recommendation))

([ATHENA_GlycemicControl_Class260040] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class260036]))

([ATHENA_GlycemicControl_Class260041] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class360002])
	(label "Disclaimers")
	(rule_in [criterion_INSTANCE_00001]))

([ATHENA_GlycemicControl_Class260042] of  On_Screen_Message

	(label "Management of insulin is outside the scope of this CDS")
	(message "Management of insulin is outside the scope of this CDS")
	(message_type Primary_Recommendation))

([ATHENA_GlycemicControl_Class260043] of  On_Screen_Message

	(label "CDS does not issue rec when 6<=HbA1c<=9")
	(message "This CDS does not issue recommendations when 6<=HbA1c<=9 \nbecause patient target HbA1c not known.")
	(message_type Primary_Recommendation))

([ATHENA_GlycemicControl_Class260044] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class260041]))

([ATHENA_GlycemicControl_Class260045] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class260046])
	(label "TLC")
	(rule_in [criterion_INSTANCE_00001]))

([ATHENA_GlycemicControl_Class260046] of  On_Screen_Message

	(label "TLC")
	(message "Lifestyle changes to control of DM")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class260047] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class260045]))

([ATHENA_GlycemicControl_Class260048] of  %3APAL-CONSTRAINT

	(%3APAL-NAME "there exists active and not refilled medication")
	(%3APAL-RANGE "(defrange ?med :FRAME Medication)")
	(%3APAL-STATEMENT "(exists ?med (and (patient_id ?med $patient_id)\n                  (prescription_id ?med \"active and not refilled\"))\n)\n"))

([ATHENA_GlycemicControl_Class260049] of  PAL_Criterion

	(case_variable "$patient_id")
	(label "there exists active and not refilled medication")
	(PAL_constraint [ATHENA_GlycemicControl_Class260048]))

([ATHENA_GlycemicControl_Class260050] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class260051])
	(label "there exists active and not refilled medication")
	(rule_in [ATHENA_GlycemicControlAlt_Class20413]))

([ATHENA_GlycemicControl_Class260051] of  On_Screen_Message

	(label "ALERT: there exists active and not refilled medication")
	(message "Placeholder:  ALERT: there exists active and not refilled medication.")
	(message_type Primary_Recommendation))

([ATHENA_GlycemicControl_Class260052] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class260050]))

([ATHENA_GlycemicControl_Class260053] of  Numeric_Constant

	(label "2.5*normal AST")
	(value 100.0))

([ATHENA_GlycemicControl_Class260054] of  Numeric_Constant

	(label "2.5*upper limit of normal ALT")
	(value 112.5))

([ATHENA_GlycemicControl_Class260055] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "AST > 2.5*normal")
	(numeric_domain_term AST)
	(operator %3E)
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 102.5))

([ATHENA_GlycemicControl_Class260056] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "ALT > 2.5*normal")
	(numeric_domain_term ALT)
	(operator %3E)
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 112.5))

([ATHENA_GlycemicControl_Class260057] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class260055]
		[ATHENA_GlycemicControl_Class260056])
	(label "AST or ALT > 2.5*normal")
	(operator OR))

([ATHENA_GlycemicControl_Class260058] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class260059])
	(label "AST or ALT> 2.5*normal")
	(rule_in [ATHENA_GlycemicControl_Class260057]))

([ATHENA_GlycemicControl_Class260059] of  On_Screen_Message

	(label "ALERT:  AST or ALT > 2.5*normal")
	(message "ALERT:  AST or ALT > 2.5*normal")
	(message_type Primary_Recommendation))

([ATHENA_GlycemicControl_Class260060] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class260058]))

([ATHENA_GlycemicControl_Class270000] of  Evaluate_Substitution_Activity

	(activity_class "Medication")
	(activity_spec Drug_Usage)
	(activity_spec_key [Drug_Class_Name])
	(activity_to_stop [ATHENA_GlycemicControl_Class760000])
	(alternatives
		[ATHENA_GlycemicControl_Instance_50026]
		[ATHENA_GlycemicControl_Class90051]
		[ATHENA_GlycemicControl_Class770000]
		[ATHENA_GlycemicControl_Class140002]
		[ATHENA_GlycemicControl_Class340013]
		[ATHENA_GlycemicControl_Instance_50027])
	(label "dEvaluate substitution w 2nd line therapy"))

([ATHENA_GlycemicControl_Class270002] of  Action_Choice

	(actions
		[KB_390055_Class3]
		[ATHENA_GlycemicControl_Class210025]
		[ATHENA_GlycemicControl_Class210036]
		[ATHENA_GlycemicControl_Class260010])
	(label "dMF and SU contraindicated, 2nd line therapy")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class210021]))

([ATHENA_GlycemicControl_Class270003] of  Choice_Step

	(branches [ATHENA_GlycemicControl_Class270002])
	(label "dMF and SU contraindicted"))

([ATHENA_GlycemicControl_Class270004] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class230008])
	(%3ATO [ATHENA_GlycemicControl_Class270003]))

([ATHENA_GlycemicControl_Class270005] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class270003])
	(%3ATO [ATHENA_GlycemicControl_Class270002]))

([ATHENA_GlycemicControl_Class270599] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_10002]
		[ATHENA_GlycemicControl_Instance_10006])
	(label "Presence of HbA1c and HbA1c<=9")
	(operator AND))

([ATHENA_GlycemicControl_Class270600] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class230002]
		[ATHENA_GlycemicControl_Class170000])
	(label "Presence of GlycoHem and GlycoHem<=11")
	(operator AND))

([ATHENA_GlycemicControl_Class270601] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class270599]
		[ATHENA_GlycemicControl_Class270600])
	(label "Presence of HbA1c and HbA1c<=9 OR Presence of GlycoHem and Glycohem<=11")
	(operator OR))

([ATHENA_GlycemicControl_Class270741] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_10032]
		[ATHENA_GlycemicControl_Instance_10002])
	(label "Absence of Target HbA1c and Presence of HbA1c")
	(operator AND))

([ATHENA_GlycemicControl_Class270742] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_10032]
		[ATHENA_GlycemicControl_Class230002])
	(label "Absence of Target HbA1c and Presence of GlycoHem")
	(operator AND))

([ATHENA_GlycemicControl_Class270743] of  Conditional_Goal

	(criterion_to_achieve [ATHENA_GlycemicControl_Class170000])
	(label "Absence of target HbA1c, set dashboard target GlycoHem<=11")
	(selection_criterion [ATHENA_GlycemicControl_Class270742]))

([ATHENA_GlycemicControl_Class280000] of  Management_Guideline

	(clinical_algorithm [ATHENA_GlycemicControl_Class210019])
	(eligibility_criteria
		[ATHENA_GlycemicControl_Class130050]
		[ATHENA_GlycemicControl_Class130052])
	(goal
		[KB_273522_Class0]
		[ATHENA_GlycemicControl_Class180050]
		[ATHENA_GlycemicControl_Class270743])
	(label "ATHENA DM:  Glycemic Control Dashboard copy")
	(patient_characterization
		[BMI%3E25]
		[BMI%3E%3D29]
		[Creatinine+%3E+1.5+and+Male]))

([ATHENA_GlycemicControl_Class280001] of  Conditional_Goal

	(criterion_to_achieve [ATHENA_GlycemicControl_Instance_10006])
	(label "HbA1c<=9")
	(selection_criterion [ATHENA_GlycemicControl_Instance_10002]))

([ATHENA_GlycemicControl_Class280002] of  Conditional_Goal

	(criterion_to_achieve [ATHENA_GlycemicControl_Class170000])
	(label "Presence of Glycosylated Hemoglobin lab")
	(selection_criterion [ATHENA_GlycemicControl_Class230002]))

([ATHENA_GlycemicControl_Class290000] of  Consultation_Action_Step

	(actions
		[ATHENA_GlycemicControl_Class50002]
		[ATHENA_GlycemicControl_Class150033]
		[ATHENA_GlycemicControl_Class1100007]
		[ATHENA_DM_GlycemicControl_Dashboard_Class10003])
	(label "Metformin checks")
	(rule_in [ATHENA_DM_GlycemicControl_Dashboard_Class132980]))

([ATHENA_GlycemicControl_Class290002] of  Conditional_On_Screen_Message

	(label "Age>75 message")
	(message "Patient is over age 75; these patients need special attention in terms of drug dosing because of age relatec changes in pharmacodyniamics and phrmacokinetics.  Please use clinical judgement.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class250000]))

([ATHENA_GlycemicControl_Class290004] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class290002])
	(label "Age>75 cautionary msg")
	(rule_in [ATHENA_GlycemicControl_Class250000]))

([ATHENA_GlycemicControl_Class290005] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class290004]))

([ATHENA_GlycemicControl_Class3] of  Scenario

	(followed_by [ATHENA_GlycemicControl_Class9])
	(label "Insulin therapy only")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Instance_110113]))

([ATHENA_GlycemicControl_Class30000] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class40001])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class300000] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class300002])
	(label "Glyburide checks")
	(rule_in [ATHENA_GlycemicControl_Class300001]))

([ATHENA_GlycemicControl_Class300001] of  Presence_Criterion

	(domain_term GLYBURIDE)
	(entry_type Medication)
	(label "Presence of glyburide")
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class300002] of  Conditional_On_Screen_Message

	(label "Glyburide serum creatinine")
	(message "It is recommended that patients on Glyburide have a serum creatinine checked at least every 12 months")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class300003]))

([ATHENA_GlycemicControl_Class300003] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class300001]
		[ATHENA_GlycemicControl_Class460000])
	(label "on glyburide and no creatiine in last 12 months")
	(operator AND))

([ATHENA_GlycemicControl_Class30001] of  Numeric_Term_Criterion

	(entry_type Numeric_Entry)
	(label "Age>80yrs")
	(numeric_domain_term Age)
	(operator %3E)
	(value 80.0))

([ATHENA_GlycemicControl_Class30002] of  Collateral_Action

	(actions
		[ATHENA_GlycemicControl_Class30003]
		[ATHENA_GlycemicControl_Class60009]
		[ATHENA_GlycemicControl_Instance_120010]
		[ATHENA_GlycemicControl_Class40001])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class30003] of  On_Screen_Message

	(display_location Summary)
	(label "Add biguanide, alert hipoxemia, dehydration or sepsis")
	(message "Withhold metformin in the presence of any condition associated with hipoxemia, dehydration or sepsis.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class310000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_10019]
		[ATHENA_GlycemicControl_Class230001])
	(label "Absence of HbA1c and GlycoHem labs")
	(operator AND))

([ATHENA_GlycemicControl_Class310001] of  Conditional_Goal

	(criterion_to_achieve [ATHENA_GlycemicControl_Instance_10006])
	(label "Absence of HbA1c and GlycoHem labs")
	(selection_criterion [ATHENA_GlycemicControl_Class310000]))

([ATHENA_GlycemicControl_Class310002] of  Conditional_On_Screen_Message

	(label "Msg to order HbA1c")
	(message "HbA1c is either missing or older than 1 year; CDS cannot give recommendations.  Please order HbA1c.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Instance_10020]))

([ATHENA_GlycemicControl_Class310003] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class290000]))

([ATHENA_GlycemicControl_Class310004] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class300000]))

([ATHENA_GlycemicControl_Class320000] of  Guideline_Drug

	(dose_level_ranges [ATHENA_GlycemicControl_Class1150234])
	(generic_drug lisinopril)
	(increase_dose_ceiling 19.0)
	(label "lisinopril")
	(max_recommended_dose 20.0)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(starting_dose 5.0))

([ATHENA_GlycemicControl_Class330000] of  N_ary_Criterion

	(criteria
		[ATHENA_DM_Eye_Instance_30024]
		[ATHENA_GlycemicControl_Class130051])
	(label "Presence of DM-II OR glucose regulating drug")
	(operator OR))

([ATHENA_GlycemicControl_Class330001] of  On_Screen_Message

	(label "Recommendation for pregnant women out of scope")
	(message "Warning:  These recommendations do not apply to women who are pregnant.")
	(message_type Primary_Recommendation))

([ATHENA_GlycemicControl_Class330002] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class330001])
	(label "dFor women of child bearing age")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class330003]))

([ATHENA_GlycemicControl_Class330003] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_10000]
		[ATHENA_GlycemicControl_Class330004])
	(label "Female and 18<=age<=50")
	(operator AND))

([ATHENA_GlycemicControl_Class330004] of  N_ary_Criterion

	(criteria
		[KB_308520_Class9]
		[ATHENA_GlycemicControl_Class330005])
	(label "18<=age<=50")
	(operator AND))

([ATHENA_GlycemicControl_Class330005] of  Numeric_Term_Criterion

	(entry_type Numeric_Entry)
	(label "age<=50")
	(numeric_domain_term Age)
	(operator %3C%3D)
	(value 50.0))

([ATHENA_GlycemicControl_Class330006] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class330001])
	(label "Pregnant out of scope")
	(rule_in [ATHENA_GlycemicControl_Class330003]))

([ATHENA_GlycemicControl_Class330007] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class330006]))

([ATHENA_GlycemicControl_Class330008] of  Drug_Usage

	(Absolute_Contraindications
		ADR+anggioedema+or+anaphylaxis+or+stevens+johns+to+glimepiride
		ADR+anaphylaxis+to+glipizide
		ADR+anaphylaxis+to+glyburide
		ADR+anaphylaxis+to+SU+1st+gen
		ADR+anapylaxis+to+glimepiride)
	(additional_ADR_check
		GLIPIZIDE
		GLIPIZIDE_XL
		GLYBURIDE
		ACETOHEXAMIDE
		CHLORPROPAMIDE
		Glibenclamide
		TOLAZAMIDE
		TOLBUTAMIDE)
	(collateral_actions
		[ATHENA_GlycemicControl_Class490000]
		[ATHENA_GlycemicControl_Class730020])
	(Drug_Class_Name GLIMEPIRIDE)
	(Drug_Partners_To_Avoid
		GLIPIZIDE
		GLIPIZIDE_XL
		GLYBURIDE)
	(formulary_preferred_drug_in_class [ATHENA_GlycemicControl_Instance_80006])
	(label "GLIMEPIRIDE")
	(Relative_Contraindications
		hypoglycemia
		HbA1c%3C6
		Allergy_ADR_to_sulfa_drugs
		Allergy_to_sulfonamides))

([ATHENA_GlycemicControl_Class330009] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class230008])
	(%3ATO [ATHENA_GlycemicControl_Class270003]))

([ATHENA_GlycemicControl_Class330010] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class230008])
	(%3ATO [ATHENA_GlycemicControl_Class270003]))

([ATHENA_GlycemicControl_Class330012] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "bicarb<=21")
	(numeric_domain_term Bicarbonate)
	(operator %3C%3D)
	(valid_window [ATHENA_DM_Eye_Instance_30019])
	(value 21.0)
	(%3ADOCUMENTATION "indicator for chronic metabolic acidosis"))

([ATHENA_GlycemicControl_Class330014] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "AST > 3*upperLimit of Normal")
	(numeric_domain_term AST)
	(operator %3E)
	(valid_window [ATHENA_DM_Eye_Instance_30019])
	(value 123.0))

([ATHENA_GlycemicControl_Class330015] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "ALT>3*UpperLimitofNormal")
	(numeric_domain_term ALT)
	(operator %3E)
	(valid_window [ATHENA_DM_Eye_Instance_30019])
	(value 135.0))

([ATHENA_GlycemicControl_Class330020] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class330022])
	(label "Liver Enzyme ALERT")
	(rule_in [ATHENA_GlycemicControl_Class330021]))

([ATHENA_GlycemicControl_Class330021] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class330014]
		[ATHENA_GlycemicControl_Class330015])
	(label "AST or ALT > 3*UpperLimitOfNormal")
	(operator OR))

([ATHENA_GlycemicControl_Class330022] of  On_Screen_Message

	(label "Liver Enzyme ALERT")
	(message "ALERT:  AST or ALT greater than 3*Upper Limit of Normal")
	(message_type Primary_Recommendation))

([ATHENA_GlycemicControl_Class340000] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 5.0)
	(upper_limit 5.0))

([ATHENA_GlycemicControl_Class340001] of  Presence_Criterion

	(domain_term Sulfa_drugs_noSU)
	(entry_type Adverse_Reaction)
	(label "Allergy/ADR to sulfa drugs")
	(presence TRUE))

([ATHENA_GlycemicControl_Class340003] of  Guideline_Drug

	(collateral_actions [ATHENA_GlycemicControl_Class730030])
	(dose_level_ranges
		[ATHENA_GlycemicControl_Class340004]
		[ATHENA_GlycemicControl_Class340005])
	(Drug_Class_Name Exenatide)
	(generic_drug Exenatide)
	(increase_dose_ceiling 10.5)
	(label "Exenatide")
	(max_recommended_dose 20.0)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(starting_dose 10.0))

([ATHENA_GlycemicControl_Class340004] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 5.0)
	(upper_limit 10.0))

([ATHENA_GlycemicControl_Class340005] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 10.5)
	(upper_limit 20.0))

([ATHENA_GlycemicControl_Class340006] of  Guideline_Drug

	(dose_level_ranges [ATHENA_GlycemicControl_Class340000])
	(Drug_Class_Name Linagliptin)
	(generic_drug Linagliptin)
	(increase_dose_ceiling 5.0)
	(label "linagliptin")
	(max_recommended_dose 5.0)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(starting_dose 5.0))

([ATHENA_GlycemicControl_Class340009] of  Presence_Criterion

	(domain_term gemfibrozil)
	(entry_type Medication)
	(label "Presence_of_gemfibrozil")
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class340011] of  Presence_Criterion

	(domain_term Nph_Insulin)
	(entry_type Medication)
	(label "Presence of NPH-Insulin")
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class340013] of  Drug_Usage

	(collateral_actions
		[ATHENA_GlycemicControl_Class210051]
		[ATHENA_GlycemicControl_Class490000]
		[ATHENA_GlycemicControl_Class600007]
		[ATHENA_GlycemicControl_Class730016])
	(Do_Not_Intensify_Conditions Absence+of+AST+and+ALT+in+past+year)
	(Do_Not_Start_Conditions Absence+of+AST+and+ALT+in+past+year)
	(Drug_Class_Name MEGLITINIDES)
	(Drug_Partners_To_Avoid REPAGLINIDE)
	(formulary_preferred_drug_in_class [ATHENA_GlycemicControl_Instance_80015])
	(label "nateglinide")
	(Relative_Contraindications
		AST%3E3*UpperLimitOfNormal
		ALT%3E3*UpperLimitOfNormal)
	(Relative_Indications DM-Type2))

([ATHENA_GlycemicControl_Class350000] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class410001])
	(label "order K for ACE-I/ARB")
	(rule_in [ATHENA_GlycemicControl_Class570002]))

([ATHENA_GlycemicControl_Class350001] of  Conditional_On_Screen_Message

	(label "Disclaimer Insulin")
	(message "Patient is on Insulin; management of insulin is outside the scope of this CDS")
	(message_type Primary_Recommendation)
	(rule_in_condition [KB_362799_Class1]))

([ATHENA_GlycemicControl_Class350002] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class80018]
		[ATHENA_GlycemicControl_Class350003])
	(label "K>5 and Absence of ACE-I")
	(operator AND))

([ATHENA_GlycemicControl_Class350003] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "K>5")
	(numeric_domain_term Potassium)
	(operator %3E)
	(value 5.0))

([ATHENA_GlycemicControl_Class350004] of  N_ary_Criterion

	(criteria
		[library_Class50005]
		[library_Class50008]
		[athena_hypertension_405283])
	(label "CKD stage 3 or 4 or 5 or eGFR<60")
	(operator OR))

([ATHENA_GlycemicControl_Class350005] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "eGFR<50")
	(numeric_domain_term eGFR)
	(operator %3C)
	(value 50.0))

([ATHENA_GlycemicControl_Class350010] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class350011])
	(label "Low Bicarb Alert")
	(rule_in [ATHENA_GlycemicControl_Class330012]))

([ATHENA_GlycemicControl_Class350011] of  On_Screen_Message

	(label "Low bicarb alert")
	(message "ALERT:  bicarbonate levels are less than or equal to 21.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class350012] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class350010]))

([ATHENA_GlycemicControl_Class350013] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class350014])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class350014] of  Conditional_On_Screen_Message

	(label "ALERT:  eGFR<30")
	(message "ALERT:  Impared renal function exists; eGFR<30; consider when prescribing this drug")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class80023]))

([ATHENA_GlycemicControl_Class360000] of  Substitute_Activity

	(activity [ATHENA_GlycemicControl_Class250015])
	(activity_to_stop [ATHENA_GlycemicControl_Class770002])
	(label "Substitute ARB for ACE-I"))

([ATHENA_GlycemicControl_Class360002] of  Conditional_On_Screen_Message

	(label "Disclaimer HbA1c btwn 6 and 9")
	(message "This CDS does not issue recommendations when 6<=HbA1c<=9 \nbecause patient target HbA1c not known.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class210008]))

([ATHENA_GlycemicControl_Class360003] of  Presence_Criterion

	(domain_term DM-Type2)
	(entry_type Note_Entry)
	(label "Absence of DM-2")
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class360004] of  N_ary_Criterion

	(criteria
		[ATHENA_DM_Eye_Instance_100022]
		[ATHENA_GlycemicControl_Class360003]
		[ATHENA_DM_Eye_Instance_80028])
	(label "Presence of DM-1 and absence of DM-2")
	(operator AND))

([ATHENA_GlycemicControl_Class370000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class250022]
		[ATHENA_GlycemicControl_Class380001])
	(label "ACE-I current med contraindicated and ARB contraindicated")
	(operator AND))

([ATHENA_GlycemicControl_Class370001] of  PAL-QUERY

	(%3APAL-NAME "query for contraindicated ACE-Inhibitor")
	(%3APAL-RANGE "(defrange ?current_med :FRAME Medication) \n(defrange ?problem :FRAME Note_Entry) \n(defrange ?med_class :FRAME Drug_Usage) \n(defrange ?contraindication :FRAME Medical_Conditions_Metaclass Absolute_Contraindications) \n(defrange ?derived_contraindication :FRAME Diagnostic_Term_Metaclass)")
	(%3APAL-STATEMENT "(findall ?current_med        \n         (and (or (not (own-slot-not-null mood ?current_med ))           \n                  (is-class (drug_name ?current_med))    \n                  (mood ?current_med Authorized))             \n              (patient_id ?current_med $patient_id)            \n              (exists ?med_class                    \n                      (and (equal-or-subclass-of (coerce-to-class (drug_name ?current_med)) \n                                                 (Drug_Class_Name ?med_class ))\n                           (equal-or-subclass-of (Drug_Class_Name ?med_class) ACE_Inhibitors)                         \n                           (or (exists ?contraindication                                      \n                                       (and  (Absolute_Contraindications ?med_class ?contraindication)\n                                             (exists ?problem                                                    \n                                                     (and (patient_id ?problem $patient_id)                                                        \n                                                          (is-class (domain_term ?problem) )                                                        \n                                                          (equal-or-subclass-of  (coerce-to-class (domain_term ?problem))                                                                               \n                                                                                 ?contraindication)))))                             \n                               (exists ?derived_contraindication                                                                 \n                                       (and (Absolute_Contraindications ?med_class ?derived_contraindication)\n                                            (is-derivable ?derived_contraindication))))                    \n                      ))))"))

([ATHENA_GlycemicControl_Class370004] of  Presence_Criterion

	(domain_term aldosterone+antagonist)
	(entry_type Medication)
	(label "Presence of aldosterone antoagonist")
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class370005] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class250008]
		[ATHENA_GlycemicControl_Class370004])
	(label "Presence of ACE-I and AA")
	(operator AND))

([ATHENA_GlycemicControl_Class370009] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class150023])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class370010] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class80007])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class370011] of  %3APAL-CONSTRAINT

	(%3APAL-NAME "ACE Inhibitor contraindicated")
	(%3APAL-RANGE "(defrange ?condition :FRAME Note_Entry)\n(defrange ?problem :FRAME Medical_Conditions_Metaclass)\n(defrange ?derived_problem :FRAME Diagnostic_Term_Metaclass)\n(defrange ?drug_usage :FRAME Drug_Usage)")
	(%3APAL-STATEMENT "(forall ?drug_usage\n        (=> (Drug_Class_Name ?drug_usage ACE_Inhibitors)\n            (or (exists ?condition \n                        (and (patient_id ?condition $patient_id)\n                             (exists ?problem \n                                     (and (Absolute_Contraindications ?drug_usage ?problem)\n                                          (is-class (domain_term ?condition))\n                                          (or (= (coerce-to-class (domain_term ?condition)) ?problem )\n                                              (equal-or-subclass-of (coerce-to-class (domain_term ?condition)) ?problem )) \n                                     ))))\n                (exists  ?derived_problem \n                         (and (Absolute_Contraindications ?drug_usage ?derived_problem)\n                              (is-derivable ?derived_problem))))\n        )\n)\n "))

([ATHENA_GlycemicControl_Class370012] of  %3APAL-CONSTRAINT

	(%3APAL-NAME "ARB contraindicated")
	(%3APAL-RANGE "(defrange ?condition :FRAME Note_Entry)\n(defrange ?problem :FRAME Medical_Conditions_Metaclass)\n(defrange ?derived_problem :FRAME Diagnostic_Term_Metaclass)\n(defrange ?drug_usage :FRAME Drug_Usage)")
	(%3APAL-STATEMENT "(forall ?drug_usage\n        (=> (Drug_Class_Name ?drug_usage Angiotensin_II_receptor_blockers)\n            (or (exists ?condition \n                        (and (patient_id ?condition $patient_id)\n                             (exists ?problem \n                                     (and (Absolute_Contraindications ?drug_usage ?problem)\n                                          (is-class (domain_term ?condition))\n                                          (or (= (coerce-to-class (domain_term ?condition)) ?problem )\n                                              (subclass-of (coerce-to-class (domain_term ?condition)) ?problem )) \n                                     ))))\n                (exists  ?derived_problem \n                         (and (Absolute_Contraindications ?drug_usage ?derived_problem)\n                              (is-derivable ?derived_problem))))\n        )\n)\n "))

([ATHENA_GlycemicControl_Class380000] of  Consultation_Action_Step

	(actions
		[ATHENA_GlycemicControl_Class260026]
		[ATHENA_GlycemicControl_Class390008])
	(label "ACE-i current med contraindicated, canNOT subs ARB")
	(rule_in [ATHENA_GlycemicControl_Class560000]))

([ATHENA_GlycemicControl_Class380001] of  PAL_Criterion

	(case_variable "$patient_id")
	(label "ARB contraindicated")
	(PAL_constraint [ATHENA_GlycemicControl_Class370012]))

([ATHENA_GlycemicControl_Class380002] of  PAL_Query

	(case_variable "$patient_id")
	(key_slot [drug_name])
	(label "query for contraindicated ACE-Inhibitor")
	(PAL_query [ATHENA_GlycemicControl_Class370001]))

([ATHENA_GlycemicControl_Class380003] of  Substitute_Activity

	(activity [ATHENA_GlycemicControl_Class250006])
	(activity_to_stop [ATHENA_GlycemicControl_Class770003])
	(label "Substitute ACE-I for ARB"))

([ATHENA_GlycemicControl_Class380004] of  PAL-QUERY

	(%3APAL-NAME "query for contraindicated ARB")
	(%3APAL-RANGE "(defrange ?current_med :FRAME Medication) \n(defrange ?problem :FRAME Note_Entry) \n(defrange ?med_class :FRAME Drug_Usage) \n(defrange ?contraindication :FRAME Medical_Conditions_Metaclass Absolute_Contraindications) \n(defrange ?derived_contraindication :FRAME Diagnostic_Term_Metaclass)")
	(%3APAL-STATEMENT "(findall ?current_med        \n         (and (or (not (own-slot-not-null mood ?current_med ))           \n                  (is-class (drug_name ?current_med))    \n                  (mood ?current_med Authorized))             \n              (patient_id ?current_med $patient_id)            \n              (exists ?med_class                    \n                      (and (equal-or-subclass-of (coerce-to-class (drug_name ?current_med)) \n                                                 (Drug_Class_Name ?med_class ))\n                           (equal-or-subclass-of (Drug_Class_Name ?med_class) Angiotensin_II_receptor_blockers)                         \n                           (or (exists ?contraindication                                      \n                                       (and  (Absolute_Contraindications ?med_class ?contraindication)\n                                             (exists ?problem                                                    \n                                                     (and (patient_id ?problem $patient_id)                                                        \n                                                          (is-class (domain_term ?problem) )                                                        \n                                                          (equal-or-subclass-of  (coerce-to-class (domain_term ?problem))                                                                               \n                                                                                 ?contraindication)))))                             \n                               (exists ?derived_contraindication                                                                 \n                                       (and (Absolute_Contraindications ?med_class ?derived_contraindication)\n                                            (is-derivable ?derived_contraindication))))                    \n                      ))))"))

([ATHENA_GlycemicControl_Class380005] of  PAL_Query

	(case_variable "$patient_id")
	(key_slot [drug_name])
	(label "query for contraindicated ARB")
	(PAL_query [ATHENA_GlycemicControl_Class380004]))

([ATHENA_GlycemicControl_Class380006] of  Stop_Activity

	(activity_to_stop [ATHENA_GlycemicControl_Class770002])
	(label "Stop contraindicated ACE-I"))

([ATHENA_GlycemicControl_Class380007] of  Stop_Activity

	(activity_to_stop [ATHENA_GlycemicControl_Class770003])
	(label "Stop contraindicated ARB"))

([ATHENA_GlycemicControl_Class380008] of  %3APAL-CONSTRAINT

	(%3APAL-NAME "Presence of DM guideline med with 0.0 < MPR < 0.9")
	(%3APAL-RANGE "(defrange ?med :FRAME Medication)\n(defrange ?drugUsage :FRAME Drug_Usage)\n(defrange ?guideline :FRAME Management_Guideline)")
	(%3APAL-STATEMENT "(exists ?med \n        (and (= (patient_id ?med) $patient_id) \n             (isa-classname (drug_name ?med))\n             (< (medication_possession_ratio ?med) 90.0)\n             (< 0.0 (medication_possession_ratio ?med))             \n             (or  (not (own-slot-not-null mood ?med))(= (mood ?med) Authorized))\n             (exists ?drugUsage (and \n                                     (exists ?guideline (and (drug_usages ?guideline ?drugUsage)\n                                                             (= (label ?guideline) \"ATHENA DM:  Glycemic Control Dashboard\")))\n                                     (subclass-of (coerce-to-class (drug_name ?med))(Drug_Class_Name ?drugUsage))))\n        ))"))

([ATHENA_GlycemicControl_Class380009] of  PAL_Criterion

	(case_variable "$patient_id")
	(label "Presence of DM guideline med with 0.0 < MPR < 0.9")
	(PAL_constraint [ATHENA_GlycemicControl_Class380008]))

([ATHENA_GlycemicControl_Class380010] of  Parameterized_Message

	(label "DM guideline med MPR < 0.9 message")
	(message_type Primary_Recommendation)
	(parameterized_message [ATHENA_GlycemicControl_Class380017])
	(rule_in_condition [ATHENA_GlycemicControlAlt_Class20276]))

([ATHENA_GlycemicControl_Class380012] of  PAL-QUERY

	(%3APAL-NAME "find DM guideline med with 0.0 < MPR < 0.9")
	(%3APAL-RANGE "(defrange ?med :FRAME Medication)\n(defrange ?drugUsage :FRAME Drug_Usage)\n(defrange ?guideline :FRAME Management_Guideline)")
	(%3APAL-STATEMENT "(findall ?med \n         (and (= (patient_id ?med) $patient_id) \n              (isa-classname (drug_name ?med))\n              (< (medication_possession_ratio ?med) 90)\n              (< 0.0 (medication_possession_ratio ?med))             \n              (or  (not (own-slot-not-null mood ?med))(= (mood ?med) Authorized))\n              (exists ?drugUsage (and \n                                      (exists ?guideline (and (drug_usages ?guideline ?drugUsage)\n                                                              (= (label ?guideline) \"ATHENA DM:  Glycemic Control Dashboard\")))\n                                      (subclass-of (coerce-to-class (drug_name ?med))(Drug_Class_Name ?drugUsage))))\n         ))"))

([ATHENA_GlycemicControl_Class380013] of  PAL_Query

	(case_variable "$patient_id")
	(label "find DM guideline med with 0.0<MPR<0.9")
	(PAL_query [ATHENA_GlycemicControl_Class380012]))

([ATHENA_GlycemicControl_Class380014] of  Property_Value

	(slot [medication_possession_ratio])
	(string_name "?mpr"))

([ATHENA_GlycemicControl_Class380015] of  Property_Value

	(slot [present_release_time])
	(string_name "?prt"))

([ATHENA_GlycemicControl_Class380016] of  Variable_ValueSet

	(derivation_expression [ATHENA_GlycemicControlAlt_Class20620])
	(label "Query for ?mpr, ?prt, ?drugName")
	(property_values_to_get
		[ATHENA_GlycemicControl_Class380014]
		[eon2_Class20001]))

([ATHENA_GlycemicControl_Class380017] of  Parameterized_String

	(label "drug mpr<0.9 message")
	(multivalued_variables [ATHENA_GlycemicControl_Class380016])
	(value "Patient appears not to be adhering to ?drugName (MPR= ?mpr %). Confirm and evaluate clinical strategy."))

([ATHENA_GlycemicControl_Class380018] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class380010])
	(label "MPR checks")
	(rule_in [ATHENA_GlycemicControlAlt_Class20276])
	(rule_out [ATHENA_GlycemicControl_Class430005]))

([ATHENA_GlycemicControl_Class380019] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class380018]))

([ATHENA_GlycemicControl_Class39] of  Scenario

	(followed_by [ATHENA_GlycemicControl_Class42])
	(label "No target  or no HbA1C")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Instance_110074]))

([ATHENA_GlycemicControl_Class390000] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class480017])
	(label "order creatinine for ACE-I/ARB")
	(rule_in [ATHENA_GlycemicControl_Class410003]))

([ATHENA_GlycemicControl_Class390001] of  Consultation_Action_Step

	(actions
		[ATHENA_GlycemicControl_Class390009]
		[ATHENA_GlycemicControl_Class260026])
	(label "ARB current med contraindicted, canNOT sub ACE-I")
	(rule_in [ATHENA_GlycemicControl_Class410041]))

([ATHENA_GlycemicControl_Class390002] of  PAL_Criterion

	(case_variable "$patient_id")
	(label "ACEI contraindicated")
	(PAL_constraint [ATHENA_GlycemicControl_Class370011]))

([ATHENA_GlycemicControl_Class390003] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControlAlt_Class0]
		[ATHENA_GlycemicControlAlt_Class8])
	(label "ARB current med contraindicated and ACEI contraindicated")
	(operator AND))

([ATHENA_GlycemicControl_Class390005] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class250005])
	(label "dEvaluate start ACE/ARB")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class250014]))

([ATHENA_GlycemicControl_Class390006] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class380006]
		[ATHENA_GlycemicControl_Class260026])
	(label "ACE-I current med contra and cannot sub ARB")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class370000]))

([ATHENA_GlycemicControl_Class390008] of  Evaluate_Stop_Activity

	(activity_class "Medication")
	(activity_spec Drug_Usage)
	(activity_spec_key [Drug_Class_Name])
	(activity_to_stop [ATHENA_GlycemicControl_Class770002])
	(label "Evaluate Stop ACE-I")
	(therapeutic_goal [ATHENA_GlycemicControl_Instance_10036]))

([ATHENA_GlycemicControl_Class390009] of  Evaluate_Stop_Activity

	(activity_class "Medication")
	(activity_spec Drug_Usage)
	(activity_spec_key [Drug_Class_Name])
	(activity_to_stop [ATHENA_GlycemicControl_Class770003])
	(label "Evaluate Stop ARB")
	(therapeutic_goal [ATHENA_GlycemicControl_Instance_10036]))

([ATHENA_GlycemicControl_Class390010] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class380007]
		[ATHENA_GlycemicControl_Class260026])
	(label "ARB  current med contra and cannot sub ACE-I")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class370000]))

([ATHENA_GlycemicControl_Class390013] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControlAlt_Class0])
	(label "NOT ACEI contraindicated")
	(operator NOT))

([ATHENA_GlycemicControl_Class390014] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControlAlt_Class8])
	(label "NOT ARB contraindicated")
	(operator NOT))

([ATHENA_GlycemicControl_Class390015] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class390014]
		[ATHENA_GlycemicControlAlt_Class0])
	(label "ACE-I current med contra and NOT ARB contra")
	(operator AND))

([ATHENA_GlycemicControl_Class390016] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class250023]
		[ATHENA_GlycemicControl_Class390013])
	(label "ARB current med contra and NOT ACEI contra")
	(operator AND))

([ATHENA_GlycemicControl_Class390017] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class380003])
	(label "ARB current med contra and can sub ACEI")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class390015]))

([ATHENA_GlycemicControl_Class390018] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class360000])
	(label "ACE-I current med contra and can sub ARB")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class390015]))

([ATHENA_GlycemicControl_Class390019] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class380006]
		[ATHENA_GlycemicControl_Class380007]
		[ATHENA_GlycemicControl_Class260026])
	(label "ACE-I and ARB cur med both contraindicated")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class260025]))

([ATHENA_GlycemicControl_Class390020] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210028])
	(%3ATO [ATHENA_GlycemicControl_Class390005]))

([ATHENA_GlycemicControl_Class390021] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210028])
	(%3ATO [ATHENA_GlycemicControl_Class390018]))

([ATHENA_GlycemicControl_Class390022] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210028])
	(%3ATO [ATHENA_GlycemicControl_Class390006]))

([ATHENA_GlycemicControl_Class390023] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210028])
	(%3ATO [ATHENA_GlycemicControl_Class390017]))

([ATHENA_GlycemicControl_Class390024] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210028])
	(%3ATO [ATHENA_GlycemicControl_Class390010]))

([ATHENA_GlycemicControl_Class390025] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210028])
	(%3ATO [ATHENA_GlycemicControl_Class390019]))

([ATHENA_GlycemicControl_Class4] of  Scenario

	(consultation_template [ATHENA_GlycemicControl_Class60011])
	(followed_by [ATHENA_GlycemicControl_Class8])
	(label "Combination oral agents/insulin therapy")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Instance_120202]))

([ATHENA_GlycemicControl_Class40] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class42])
	(%3ATO [ATHENA_GlycemicControl_Instance_10030]))

([ATHENA_GlycemicControl_Class40000] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class50002]))

([ATHENA_GlycemicControl_Class400000] of  Presence_Criterion

	(domain_term Potassium)
	(entry_type Numeric_Entry)
	(label "Absence of K lab in past  month")
	(period [ATHENA_DM_Eye_Instance_100007])
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class400001] of  Presence_Criterion

	(domain_term eGFR)
	(entry_type Numeric_Entry)
	(label "Absence of eGFR lab in past 30 days")
	(period [time%3AINSTANCE_2])
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class40001] of  On_Screen_Message

	(display_location Summary)
	(label "Metformin and B12")
	(message "Metformin may impair B12 absorption and (in rare cases) is associated with anemia.  Check B12 levels every 2 years when a patient is using Metformin.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class41] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class42])
	(%3ATO [ATHENA_GlycemicControl_Instance_10018]))

([ATHENA_GlycemicControl_Class410000] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "most recent eGFR<60 in past mo")
	(numeric_domain_term eGFR)
	(operator %3C)
	(status "active")
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 60.0))

([ATHENA_GlycemicControl_Class410001] of  Order_TestProcedure

	(label "Order K")
	(test_or_procedure Potassium))

([ATHENA_GlycemicControl_Class410002] of  Presence_Criterion

	(domain_term Systolic_BP)
	(entry_type Numeric_Entry)
	(label "Absence of SBP in last mo")
	(period [ATHENA_DM_Eye_Instance_100007])
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class410003] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class400001]
		[ATHENA_GlycemicControl_Class1030633])
	(label "Absence of eGFR in last mo")
	(operator AND))

([ATHENA_GlycemicControl_Class410004] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class410003]
		[ATHENA_GlycemicControl_Class410002])
	(label "Absence of SBP OR eGFR and creatinine in last mo")
	(operator OR))

([ATHENA_GlycemicControl_Class410005] of  Order_TestProcedure

	(label "Order eGFR - missing past year")
	(rule_in_condition [ATHENA_GlycemicControl_Class530008])
	(test_or_procedure eGFR))

([ATHENA_GlycemicControl_Class410006] of  On_Screen_Message

	(label "eGFR  missing")
	(message "Cannot evaluate recommendation for adding ACE-I or ARB without eGFR lab within last month..")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class410007] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class390000]))

([ATHENA_GlycemicControl_Class410009] of  Consultation_Action_Step

	(followed_by [ATHENA_GlycemicControl_Class410013])
	(label "Presence of labs for ACE-I/ARB")
	(rule_in [ATHENA_GlycemicControl_Class430344]))

([ATHENA_GlycemicControl_Class410012] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class410003])
	(label "NOT absence of eGFR and creatinine in last 12 mo")
	(operator NOT))

([ATHENA_GlycemicControl_Class410013] of  Consultation_Branch_Step

	(branches
		[ATHENA_GlycemicControl_Class250004]
		[ATHENA_GlycemicControl_Class260024]
		[ATHENA_GlycemicControl_Class250024]
		[ATHENA_GlycemicControl_Class380000]
		[ATHENA_GlycemicControl_Class260023]
		[ATHENA_GlycemicControl_Class390001])
	(label "ACE-I/ARB choices when labs present")
	(selection_method one_of))

([ATHENA_GlycemicControl_Class410014] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class410009]))

([ATHENA_GlycemicControl_Class410016] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class410013])
	(%3ATO [ATHENA_GlycemicControl_Class250004]))

([ATHENA_GlycemicControl_Class410017] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class410013])
	(%3ATO [ATHENA_GlycemicControl_Class260024]))

([ATHENA_GlycemicControl_Class410018] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class410013])
	(%3ATO [ATHENA_GlycemicControl_Class250024]))

([ATHENA_GlycemicControl_Class410019] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class410013])
	(%3ATO [ATHENA_GlycemicControl_Class380000]))

([ATHENA_GlycemicControl_Class410020] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class410013])
	(%3ATO [ATHENA_GlycemicControl_Class260023]))

([ATHENA_GlycemicControl_Class410021] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class410013])
	(%3ATO [ATHENA_GlycemicControl_Class390001]))

([ATHENA_GlycemicControl_Class410022] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "most recent creatinine < 2.3 last mo")
	(numeric_domain_term Creatinine)
	(operator %3C)
	(status "active")
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 2.3))

([ATHENA_GlycemicControl_Class410023] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "most recent creatinine < 2.5 last mo")
	(numeric_domain_term Creatinine)
	(operator %3C)
	(status "active")
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 2.5))

([ATHENA_GlycemicControl_Class410024] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "most recent eGFR > 30 last  mo")
	(numeric_domain_term eGFR)
	(operator %3E)
	(status "active")
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 30.0))

([ATHENA_GlycemicControl_Class410025] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "SBP>=110")
	(numeric_domain_term Systolic_BP)
	(operator %3E%3D)
	(status "active")
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 110.0))

([ATHENA_GlycemicControl_Class410026] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class410023]
		[KB_799906_Class4])
	(label "most recent creatinine <2.5 last mo and male")
	(operator AND))

([ATHENA_GlycemicControl_Class410027] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class410022]
		[ATHENA_GlycemicControl_Instance_10000])
	(label "most recent creatinine <2.3 last mo and female")
	(operator AND))

([ATHENA_GlycemicControl_Class410028] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class410027]
		[ATHENA_GlycemicControl_Class410026]
		[ATHENA_GlycemicControl_Class410024])
	(label "most recent in last mo creatinine <2.3 and female OR creatinine <2.5 and male OR eGFR>30")
	(operator OR))

([ATHENA_GlycemicControl_Class410029] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class410028]
		[ATHENA_GlycemicControl_Class410025])
	(label "SBP>=110 and low creatinine or hi eGFR")
	(operator AND))

([ATHENA_GlycemicControl_Class410030] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class80018]
		[ATHENA_GlycemicControl_Class150021]
		[ATHENA_GlycemicControl_Class410029]
		[ATHENA_GlycemicControl_Class430344])
	(label "Absence of ACE-I and ARB and SBP>=110 and low creatinine or hi eGFR")
	(operator AND))

([ATHENA_GlycemicControl_Class410031] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class250022]
		[ATHENA_GlycemicControl_Class390014]
		[ATHENA_GlycemicControl_Class410029]
		[ATHENA_GlycemicControl_Class430344])
	(label "ACE-I current med contra and NOT ARB contra and SBP>=110 and low creatinine or high eGFR")
	(operator AND))

([ATHENA_GlycemicControl_Class410032] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class390013]
		[ATHENA_GlycemicControl_Class410029]
		[ATHENA_GlycemicControlAlt_Class8])
	(label "ARB current med contra and NOT ACEI contra and SBP>=110 and low creatinine or high eGFR")
	(operator AND))

([ATHENA_GlycemicControl_Class410033] of  Numeric_Term_Criterion

	(entry_type Numeric_Entry)
	(label "most recent creatinine >=2.3 last mo")
	(numeric_domain_term Creatinine)
	(operator %3E%3D)
	(status "active")
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 2.3))

([ATHENA_GlycemicControl_Class410034] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class410033]
		[ATHENA_GlycemicControl_Instance_10000])
	(label "creatinine >=2.3 and female")
	(operator AND))

([ATHENA_GlycemicControl_Class410035] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class410034]
		[ATHENA_GlycemicControl_Class410036]
		[ATHENA_GlycemicControl_Class410038])
	(label "most recent last mo creatinine >=2.3 and female or 2.5 and male or eGFR<=30")
	(operator OR))

([ATHENA_GlycemicControl_Class410036] of  N_ary_Criterion

	(criteria
		[KB_799906_Class4]
		[ATHENA_GlycemicControl_Class410037])
	(label "most recent creatinine >=2.5 last mo and male")
	(operator AND))

([ATHENA_GlycemicControl_Class410037] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "most recent creatinine >=2.5 last mo")
	(numeric_domain_term Creatinine)
	(operator %3E%3D)
	(status "active")
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 2.5))

([ATHENA_GlycemicControl_Class410038] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "most recent eGFR<=30 last mo")
	(numeric_domain_term eGFR)
	(operator %3C%3D)
	(status "active")
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 30.0))

([ATHENA_GlycemicControl_Class410039] of  N_ary_Criterion

	(criteria
		[library_Class30002]
		[ATHENA_GlycemicControl_Class410035])
	(label "SBP<110 and high creatinine or low eGFR")
	(operator AND))

([ATHENA_GlycemicControl_Class410040] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class250022]
		[ATHENA_GlycemicControl_Class430344]
		[ATHENA_GlycemicControl_Class450339])
	(label "ACE-I current med contra and ARB contrai or SBP<110 or hi creatinine and low eGFR and Presence K eGFR SBP")
	(operator AND))

([ATHENA_GlycemicControl_Class410041] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class450338]
		[ATHENA_GlycemicControlAlt_Class8])
	(label "ARB current med contra and ACEI contra amd SBP<110 or  hi creatinine or low eGFR")
	(operator AND))

([ATHENA_GlycemicControl_Class42] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Instance_10030]
		[ATHENA_GlycemicControl_Instance_10018])
	(label "Lack target or lack HbA1C"))

([ATHENA_GlycemicControl_Class420000] of  Variable

	(derivation_expression [library_Class110013])
	(label "PatientChar Poor renal function by 'decision' eGFR or creatinine")
	(string_name "PoorRenalFunction"))

([ATHENA_GlycemicControl_Class420001] of  On_Screen_Message

	(label "K missing")
	(message "Cannot evaluate recommendation for adding ACE-I or ARB without K lab within last month..")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class420002] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class410003]
		[ATHENA_GlycemicControl_Class400000])
	(label "Absence of eGFR/creatinine OR K in last  month")
	(operator OR))

([ATHENA_GlycemicControl_Class43] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class39])
	(%3ATO [ATHENA_GlycemicControl_Class42]))

([ATHENA_GlycemicControl_Class430000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210005]
		[KB_362799_Class1]
		[ATHENA_GlycemicControl_Class240041])
	(label "Presence of HbA1c or GlycoHem in past 12 mo and presence of insulin and absence of non-insulin agent")
	(operator AND))

([ATHENA_GlycemicControl_Class430001] of  Conditional_On_Screen_Message

	(label "ALERT:  30<eGFR<60 or creatinine 1.5- 2.5 male etc")
	(message "Patient's renal function is impaired, it is extremely important to monitor renal function and potassium")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class440008]))

([ATHENA_GlycemicControl_Class430002] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class350000]))

([ATHENA_GlycemicControl_Class430005] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class240041]
		[ATHENA_GlycemicControl_Class80018]
		[ATHENA_GlycemicControl_Class150021])
	(label "Absence of non-insulin glucose reg agent and ACE-I and ARB")
	(operator AND))

([ATHENA_GlycemicControl_Class430112] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class410009])
	(%3ATO [ATHENA_GlycemicControl_Class410013]))

([ATHENA_GlycemicControl_Class430227] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class420002])
	(label "NOT absence of eGFR/creatinine or K")
	(operator NOT))

([ATHENA_GlycemicControl_Class430340] of  Presence_Criterion

	(domain_term eGFR)
	(entry_type Numeric_Entry)
	(label "Presence of eGFR in last mo")
	(period [ATHENA_DM_Eye_Instance_100007])
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class430341] of  Presence_Criterion

	(domain_term Creatinine)
	(entry_type Numeric_Entry)
	(label "Presence of creatinine in past  mo")
	(period [ATHENA_DM_Eye_Instance_100007])
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class430342] of  Presence_Criterion

	(domain_term Potassium)
	(entry_type Numeric_Entry)
	(label "Presence of K in past  mo")
	(period [ATHENA_DM_Eye_Instance_100007])
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class430343] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class430340]
		[ATHENA_GlycemicControl_Class430341])
	(label "Presence of eGFR or creatinine in past  mo")
	(operator OR))

([ATHENA_GlycemicControl_Class430344] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class430342]
		[ATHENA_GlycemicControl_Class430343]
		[ATHENA_GlycemicControl_Class460108])
	(label "Presence of K and eGFR/creatinine and SBP in past  mo")
	(operator AND))

([ATHENA_GlycemicControl_Class440000] of  Numeric_Term_Criterion

	(aggregation_operator count)
	(entry_type Medication)
	(label "3 or more non-insulin agent")
	(numeric_domain_term Non_Insulin_Related_Glucose_Reg_Agents)
	(operator %3E%3D)
	(status "active")
	(value 3.0))

([ATHENA_GlycemicControl_Class440001] of  Variable

	(derivation_expression [library_Class110019])
	(label "PatientChar Intermediate renal function by 'decision' eGFR or creatinine")
	(string_name "IntermediateRenalFunction"))

([ATHENA_GlycemicControl_Class440002] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class410000]
		[ATHENA_GlycemicControl_Class410024])
	(label "30<eGFR<60 in past month")
	(operator AND))

([ATHENA_GlycemicControl_Class440003] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "creatinine > 1.3")
	(numeric_domain_term Creatinine)
	(operator %3E)
	(status "active")
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 1.3))

([ATHENA_GlycemicControl_Class440004] of  N_ary_Criterion

	(criteria
		[KB_799906_Class2]
		[ATHENA_GlycemicControl_Class410023])
	(label "1.5 < creatinine < 2.5 in past month")
	(operator AND))

([ATHENA_GlycemicControl_Class440005] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class440003]
		[ATHENA_GlycemicControl_Class410022])
	(label "1.3 < creatinine < 2.3 in past month")
	(operator AND))

([ATHENA_GlycemicControl_Class440006] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class440004]
		[KB_799906_Class4])
	(label "1.5 < creatinine < 2.5 in past month AND male")
	(operator AND))

([ATHENA_GlycemicControl_Class440007] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class440005]
		[ATHENA_GlycemicControl_Instance_10000])
	(label "1.3 < creatinine < 2.3 in past month AND female")
	(operator AND))

([ATHENA_GlycemicControl_Class440008] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class440007]
		[ATHENA_GlycemicControl_Class440006]
		[ATHENA_GlycemicControl_Class440002])
	(label "30<eGFR<60 in past mo OR 1.5<creatinine<2.5 male OR 1.3>creatinine>2.3 female")
	(operator OR))

([ATHENA_GlycemicControl_Class440009] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class440011])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class440011] of  Conditional_On_Screen_Message

	(label "collateral msg 30<eGFR<60 or 1.5<creatinine<2.5 male or 1.3<creatinine<2.3 female")
	(message "We are recommending use of ACE/ARB, but be reminded to obtain new labs within 1-2 weeks")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class440008]))

([ATHENA_GlycemicControl_Class440012] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "most recent eGFR >=60 past mo")
	(numeric_domain_term eGFR)
	(operator %3E%3D)
	(status "active")
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 60.0))

([ATHENA_GlycemicControl_Class440013] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "most recent creatinine <= 1.3 in past mo")
	(numeric_domain_term Creatinine)
	(operator %3C%3D)
	(status "active")
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 1.3))

([ATHENA_GlycemicControl_Class440014] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "most recent creatinine <= 1.5 in past mo")
	(numeric_domain_term Creatinine)
	(operator %3C%3D)
	(status "active")
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 1.5))

([ATHENA_GlycemicControl_Class440015] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class440013]
		[ATHENA_GlycemicControl_Instance_10000])
	(label "most recent creatinine <= 1.3 in past mo AND female")
	(operator AND))

([ATHENA_GlycemicControl_Class440016] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class440014]
		[KB_799906_Class4])
	(label "most recent creatinine <= 1.5 in past mo AND male")
	(operator AND))

([ATHENA_GlycemicControl_Class440017] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class440015]
		[ATHENA_GlycemicControl_Class440016]
		[ATHENA_GlycemicControl_Class440012])
	(label "most recent past mo eGFR>60 or creatinine <=1.3 female or creatinine<=1.5 male")
	(operator OR))

([ATHENA_GlycemicControl_Class440018] of  Conditional_On_Screen_Message

	(label "collateral msage eGFR>=60, low creatinine")
	(message "We are recommending use of ACE/ARB, but be reminded to obtain new labs within 1-2 weeks")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class440017]))

([ATHENA_GlycemicControl_Class440019] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class440018])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class440119] of  Evaluate_Substitution_Activity

	(activity_class "Medication")
	(activity_spec Drug_Usage)
	(activity_spec_key [Drug_Class_Name])
	(activity_to_stop [ATHENA_GlycemicControl_Class770003])
	(alternatives [ATHENA_GlycemicControl_Class250006])
	(label "Evaluate substitue ACEi for ARB"))

([ATHENA_GlycemicControl_Class440211] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class250004]))

([ATHENA_GlycemicControl_Class440212] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class260024]))

([ATHENA_GlycemicControl_Class440213] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class250024]))

([ATHENA_GlycemicControl_Class440214] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class380000]))

([ATHENA_GlycemicControl_Class440215] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class260023]))

([ATHENA_GlycemicControl_Class440216] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class390001]))

([ATHENA_GlycemicControl_Class450000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class410003]
		[ATHENA_GlycemicControl_Class410002]
		[ATHENA_GlycemicControl_Class400000])
	(label "Absence in past month of eGFR and creatinine and K and SBP")
	(operator AND))

([ATHENA_GlycemicControl_Class450001] of  N_ary_Criterion

	(criteria
		[ATHENA_DM_Eye_Instance_100022]
		[ATHENA_DM_Eye_Instance_30024])
	(label "Presence of DM-1 and DM-2")
	(operator AND))

([ATHENA_GlycemicControl_Class450002] of  Variable

	(derivation_expression [library_Class110016])
	(label "PatientChar Good renal function by 'decision' eGFR or creatinine")
	(string_name "GoodRenalFunction"))

([ATHENA_GlycemicControl_Class450239] of  Evaluate_Substitution_Activity

	(activity_class "Medication")
	(activity_spec Drug_Usage)
	(activity_spec_key [Drug_Class_Name])
	(activity_to_stop [ATHENA_GlycemicControl_Class770002])
	(alternatives [ATHENA_GlycemicControl_Class250015])
	(label "Evaluate substitue ARB for ACEi"))

([ATHENA_GlycemicControl_Class450338] of  N_ary_Criterion

	(criteria
		[library_Class30002]
		[ATHENA_GlycemicControl_Class410035]
		[ATHENA_GlycemicControlAlt_Class0])
	(label "ACEi contraindicated or SBP<110 or high creatinine or low eGFR")
	(operator OR))

([ATHENA_GlycemicControl_Class450339] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class380001]
		[library_Class30002]
		[ATHENA_GlycemicControl_Class410035])
	(label "ARB contraindicated or SBP<110 or high creatinine or low eGFR")
	(operator OR))

([ATHENA_GlycemicControl_Class460000] of  Presence_Criterion

	(domain_term Creatinine)
	(entry_type Numeric_Entry)
	(label "Absence of creatinine in past year")
	(period [ATHENA_DM_Eye_Instance_30019])
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class460001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210005]
		[ATHENA_GlycemicControl_Class1300004]
		[ATHENA_DM_GlycemicControl_Dashboard_Class90000]
		[ATHENA_GlycemicControl_Class800000])
	(label "Presence of HbA1c or GlycoH in past 12 mo and not DM-1 and 3+ agents")
	(operator AND))

([ATHENA_GlycemicControl_Class460002] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210001]
		[ATHENA_GlycemicControl_Class450001])
	(label "Absence of DM-1 OR Presence of DM-1and DM-2")
	(operator OR))

([ATHENA_GlycemicControl_Class460003] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class430000]
		[ATHENA_GlycemicControl_Class460002])
	(label "Presence of Hba1c or Glyco and Presence of Insulin and Absence of non-insulin agents and Absence of DM-1 or Presence of both DM-1 and DM-2")
	(operator AND))

([ATHENA_GlycemicControl_Class460101] of  Presence_Criterion

	(domain_term aspirin)
	(entry_type Adverse_Reaction)
	(label "ADR to aspirin")
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class460108] of  Presence_Criterion

	(domain_term Systolic_BP)
	(entry_type Numeric_Entry)
	(label "Presence of SBP in last mo")
	(period [ATHENA_DM_Eye_Instance_100007])
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class460110] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class460111])
	(label "Missing SBP in last month")
	(rule_in [ATHENA_GlycemicControl_Class410002]))

([ATHENA_GlycemicControl_Class460111] of  On_Screen_Message

	(label "no SBP measurement during the last month")
	(message "Most recent blood pressure is older than 1 month.  Please measure BP, to evaluate usage of  ACE Inhibitor or ARB.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class460112] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class460110]))

([ATHENA_GlycemicControl_Class470000] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class150027]))

([ATHENA_GlycemicControl_Class470001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class410003]
		[ATHENA_GlycemicControl_Class400000]
		[ATHENA_GlycemicControl_Class460108])
	(label "Absence in past month of eGFR and creatinine and K and Presence of SBP")
	(operator AND))

([ATHENA_GlycemicControl_Class470002] of  Scenario

	(consultation_template [ATHENA_GlycemicControl_Class930004])
	(followed_by [ATHENA_GlycemicControl_Class470003])
	(label "Scenario: On Three+ oral agents")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Class460001]))

([ATHENA_GlycemicControl_Class470003] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class470006]
		[ATHENA_GlycemicControl_Class210015]
		[ATHENA_GlycemicControl_Class240016])
	(label "dThree+ oral agents choices"))

([ATHENA_GlycemicControl_Class470004] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class470002])
	(%3ATO [ATHENA_GlycemicControl_Class470003]))

([ATHENA_GlycemicControl_Class470005] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class470003])
	(%3ATO [ATHENA_GlycemicControl_Class210015]))

([ATHENA_GlycemicControl_Class470006] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class1300425]
		[ATHENA_DM_GlycemicControl_Dashboard_Class100000]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110024]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110016]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110022])
	(label "dThree encoded med max dose, Refer")
	(strict_rule_in_condition [ATHENA_DM_GlycemicControl_Dashboard_Class130012]))

([ATHENA_GlycemicControl_Class470007] of  On_Screen_Message

	(label "on 3+ agents")
	(message "Patient HbA1c is >9 and is on 3 or more oral agents indicating that he/she is  complext patient.  Please discuss with an endocrinologist or specialized DM care team.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class470009] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240053])
	(%3ATO [ATHENA_GlycemicControl_Class210015]))

([ATHENA_GlycemicControl_Class470010] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class470003])
	(%3ATO [ATHENA_GlycemicControl_Class470006]))

([ATHENA_GlycemicControl_Class470011] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class450001]
		[ATHENA_DM_Eye_Instance_80028])
	(label "Presence of DM-1 and DM-2 and Absence of insulin")
	(operator AND))

([ATHENA_GlycemicControl_Class470012] of  Scenario

	(followed_by [ATHENA_GlycemicControl_Class470013])
	(label "dDM-1 and DM-2 and no insulin")
	(new_encounter FALSE)
	(precondition [ATHENA_GlycemicControl_Class470011]))

([ATHENA_GlycemicControl_Class470013] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class210015]
		[ATHENA_GlycemicControl_Class470017])
	(label "dDM-1 and DM-2 choices"))

([ATHENA_GlycemicControl_Class470014] of  On_Screen_Message

	(label "DM-1 aand DM-2 message")
	(message "Diagnoses of both DM-1 and DM-2 detected.  Debug not clear.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class470015] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class470012])
	(%3ATO [ATHENA_GlycemicControl_Class470013]))

([ATHENA_GlycemicControl_Class470016] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class470013])
	(%3ATO [ATHENA_GlycemicControl_Class210015]))

([ATHENA_GlycemicControl_Class470017] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class470014])
	(label "dDebug message not clear")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class210014]))

([ATHENA_GlycemicControl_Class470018] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class470013])
	(%3ATO [ATHENA_GlycemicControl_Class470017]))

([ATHENA_GlycemicControl_Class480000] of  On_Screen_Message

	(label "Set target HbA1c")
	(message "Although the VA performance measure is to attain an HbA1c<9%, this is usually not the true target for an individual patient. The  <a href=\"http://@AUTOPMWEBSERVER@/DM/VA_GL_DiabetesMellitus_2010.pdf#page=49\"> Table G1 from VA DM Guidelines </a> can be used as a reference to decide an individual patient’s target.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class480001] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class150027]))

([ATHENA_GlycemicControl_Class480002] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class410003]
		[ATHENA_GlycemicControl_Class410002]
		[ATHENA_GlycemicControl_Class430342])
	(label "Absence in past month of eGFR and creatinine and SBP and Presence of K")
	(operator AND))

([ATHENA_GlycemicControl_Class480003] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class410002]
		[ATHENA_GlycemicControl_Class400000]
		[ATHENA_GlycemicControl_Class430343])
	(label "Absence in past month of  K and SBP and Presence of eGFR or creatinine")
	(operator AND))

([ATHENA_GlycemicControl_Class480004] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class410003]
		[ATHENA_GlycemicControl_Class430342]
		[ATHENA_GlycemicControl_Class460108])
	(label "Absence in past month of eGFR and creatinine and Presence of  K and SBP")
	(operator AND))

([ATHENA_GlycemicControl_Class480005] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class410002]
		[ATHENA_GlycemicControl_Class430343]
		[ATHENA_GlycemicControl_Class430342])
	(label "Presence in past month of eGFR or creatinine and K and Absence SBP")
	(operator AND))

([ATHENA_GlycemicControl_Class480006] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class430343]
		[ATHENA_GlycemicControl_Class400000]
		[ATHENA_GlycemicControl_Class460108])
	(label "Presence in past month of eGFR or creatinine and Absence  K and Presence SBP")
	(operator AND))

([ATHENA_GlycemicControl_Class480007] of  Conditional_On_Screen_Message

	(label "Absence in past month eGFR and creat and K and SBP")
	(message "Cannot recommend adding ACE-I/ARB without the following labs and/or vitals:  eGFR, K and BP within the last month.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class450000]))

([ATHENA_GlycemicControl_Class480008] of  Conditional_On_Screen_Message

	(label "Absence in past month eGFR and creat and K and Presence SBP")
	(message "Cannot recommend adding ACE-I/ARB without the following labs and/or vitals:  eGFR and K within the last month.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class470001]))

([ATHENA_GlycemicControl_Class480009] of  Conditional_On_Screen_Message

	(label "Absence in past month eGFR and creat and SBP and Presence K")
	(message "Cannot recommend adding ACE-I/ARB without the following labs and/or vitals:  eGFR and BP within the last month.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class480002]))

([ATHENA_GlycemicControl_Class480010] of  Conditional_On_Screen_Message

	(label "Absence in past month  K and SBP and Presence of eGFR")
	(message "Cannot recommend adding ACE-I/ARB without the following labs and/or vitals:   K and BP within the last month.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class480003]))

([ATHENA_GlycemicControl_Class480011] of  Conditional_On_Screen_Message

	(label "Absence in past month eGFR and creat and Presence K and SBP")
	(message "Cannot recommend adding ACE-I/ARB without the following labs and/or vitals:   eGFR within the last month.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class480004]))

([ATHENA_GlycemicControl_Class480012] of  Conditional_On_Screen_Message

	(label "Presence in past month eGFR or creat and K and Absence SBP")
	(message "Cannot recommend adding ACE-I/ARB without the following labs and/or vitals: BP within the last month.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class480005]))

([ATHENA_GlycemicControl_Class480013] of  Conditional_On_Screen_Message

	(label "Presence in past month eGFR or creat and Absence K and Presence SBP")
	(message "Cannot recommend adding ACE-I/ARB without the following labs and/or vitals:. K within the last month.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class480006]))

([ATHENA_GlycemicControl_Class480014] of  Consultation_Action_Step

	(actions
		[ATHENA_GlycemicControl_Class480010]
		[ATHENA_GlycemicControl_Class480008]
		[ATHENA_GlycemicControl_Class480007]
		[ATHENA_GlycemicControl_Class480011]
		[ATHENA_GlycemicControl_Class480009]
		[ATHENA_GlycemicControl_Class480013]
		[ATHENA_GlycemicControl_Class480012])
	(label "Messages for missing labs ACE/ARB")
	(rule_in [ATHENA_GlycemicControl_Class550000]))

([ATHENA_GlycemicControl_Class480015] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class410003]
		[ATHENA_GlycemicControl_Class400000]
		[ATHENA_GlycemicControl_Class410002])
	(label "Absence in past month of eGFR and creatinine OR absence of K OR Absence of SBP")
	(operator OR))

([ATHENA_GlycemicControl_Class480016] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class480014]))

([ATHENA_GlycemicControl_Class480017] of  Order_TestProcedure

	(label "Order creatinine")
	(test_or_procedure Creatinine))

([ATHENA_GlycemicControl_Class480018] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "B12 < 200 pg/mL past 12 months")
	(numeric_domain_term B_12)
	(operator %3C)
	(status "active")
	(unit "pg/mL")
	(valid_window [library_Class60017])
	(value 200.0))

([ATHENA_GlycemicControl_Class480019] of  Consultation_Action_Step

	(label "Metformin low B12 rec B12")
	(rule_in [ATHENA_GlycemicControl_Class480020]))

([ATHENA_GlycemicControl_Class480020] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class120322]
		[ATHENA_GlycemicControl_Class480018])
	(label "Presence biguanide and B12 low")
	(operator AND))

([ATHENA_GlycemicControl_Class490000] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class260046])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class490001] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class480000])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class490002] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class80019])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class490005] of  On_Screen_Message

	(label "Add ARB despite kidney function")
	(message "Patients with diabetes should be considered for use of ACE inhibitor or ARB in order to provide renal protection")
	(message_type Recommendation)
	(references
		[ATHENA_GlycemicControl_Class80009]
		[ATHENA_GlycemicControl_Class240014]))

([ATHENA_GlycemicControl_Class490006] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class490005])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class5] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Instance_50008]
		[ATHENA_GlycemicControl_Class150002]
		[ATHENA_GlycemicControl_Class150004]
		[ATHENA_GlycemicControl_Class150015]
		[ATHENA_GlycemicControl_Class200292])
	(label "DM - No meds"))

([ATHENA_GlycemicControl_Class50000] of  Collateral_Action

	(actions
		[ATHENA_GlycemicControl_Class60001]
		[ATHENA_GlycemicControl_Class60002])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class500000] of  Conditional_On_Screen_Message

	(fine-grain_priority 1)
	(label "Absence of eGFR cannot add MF")
	(message "We would normally recommend metformin, but cannot do so because eGFR and creatinine labs within past month are missing.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class520004]))

([ATHENA_GlycemicControl_Class500001] of  Collateral_Action

	(actions
		[ATHENA_GlycemicControl_Class500000]
		[ATHENA_GlycemicControl_Class550037]
		[ATHENA_GlycemicControl_Class550038]
		[ATHENA_GlycemicControl_Class550039]
		[ATHENA_GlycemicControl_Class550041]
		[ATHENA_GlycemicControl_Class550043]
		[ATHENA_GlycemicControl_Class550045])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class500002] of  Presence_Criterion

	(domain_term Bicarbonate)
	(entry_type Numeric_Entry)
	(label "Absence bicarb lab")
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class500003] of  Presence_Criterion

	(domain_term AST)
	(entry_type Numeric_Entry)
	(label "Absence of AST in past year")
	(period [library_Class60017])
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class500004] of  Presence_Criterion

	(domain_term ALT)
	(entry_type Numeric_Entry)
	(label "Absence of ALT in past yr")
	(period [library_Class60017])
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class500005] of  Conditional_On_Screen_Message

	(label "Absence of eGFR and creatinine cannot add DM drug")
	(message "Consider addingrepaglinide.  Current eGFR and creatinine labs are older than 1 month.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class410003]))

([ATHENA_GlycemicControl_Class500006] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class500005])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class50002] of  Conditional_On_Screen_Message

	(display_location Summary)
	(label "On Metformin check serum B12 level")
	(message "Metformin may impair B12 absorption and (in rare cases) is associated with anemia.  It is recommended that patients on Metformin have a serum B12 checked at least every 2 years.")
	(message_type Recommendation)
	(references [ATHENA_GlycemicControl_Class80009])
	(rule_in_condition [ATHENA_GlycemicControl_Class80011]))

([ATHENA_GlycemicControl_Class50003] of  Presence_Criterion

	(domain_term BIGUANIDE)
	(entry_type Medication)
	(label "On biguanide for >1year")
	(mood Authorized)
	(period [ATHENA_GlycemicControl_Class80010])
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class510000] of  Presence_Criterion

	(domain_term eGFR)
	(entry_type Numeric_Entry)
	(label "Absence of eGFR")
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class510001] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class510002])
	(label "DM-1 and DM-2 message")
	(rule_in [ATHENA_GlycemicControl_Class450001]))

([ATHENA_GlycemicControl_Class510002] of  On_Screen_Message

	(label "Presence of DM-1 and DM-2 message")
	(message "Patient has diagnosis of both DM-1 and DM-2.  We have made recommendations ASSUMING that the patient has only DM-2.  If this is not the case, these recommendations are not appropriate")
	(message_type Primary_Recommendation))

([ATHENA_GlycemicControl_Class510003] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class510001]))

([ATHENA_GlycemicControl_Class520000] of  Case_Selection

	(label "yes")
	(value [criterion_INSTANCE_00001])
	(%3AFROM [ATHENA_GlycemicControl_Class540032])
	(%3ATO [ATHENA_GlycemicControl_Class540037]))

([ATHENA_GlycemicControl_Class520001] of  Presence_Criterion

	(domain_term Bicarbonate)
	(entry_type Numeric_Entry)
	(label "Absence of bicarb in past 12 mo")
	(period [library_Class60017])
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class520002] of  Presence_Criterion

	(domain_term AST)
	(entry_type Numeric_Entry)
	(label "Absence of AST")
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class520003] of  Presence_Criterion

	(domain_term ALT)
	(entry_type Numeric_Entry)
	(label "Absence of ALT")
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class520004] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class510000]
		[ATHENA_GlycemicControl_Class400001])
	(label "Absence of eGFR or Absence of eGFR in past mo")
	(operator OR))

([ATHENA_GlycemicControl_Class520005] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class500002]
		[ATHENA_GlycemicControl_Class520001])
	(label "Absence of bicarb or absence of bicarb in past yr")
	(operator OR))

([ATHENA_GlycemicControl_Class520006] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class500004]
		[ATHENA_GlycemicControl_Class500003])
	(label "Absence of AST and ALT in past yr")
	(operator AND))

([ATHENA_GlycemicControl_Class530000] of  Parameterized_Message

	(label "Contraindicated med cannot increase dose msg")
	(message_type Primary_Recommendation)
	(parameterized_message [ATHENA_GlycemicControl_Class550001]))

([ATHENA_GlycemicControl_Class530001] of  Management_Diagram

	(label "Glycemic Control Dashboard III")
	(steps
		[ATHENA_GlycemicControl_Class210037]
		[ATHENA_GlycemicControl_Class210040]
		[ATHENA_GlycemicControl_Class230000]
		[ATHENA_GlycemicControl_Class230004]
		[ATHENA_GlycemicControl_Class210000]
		[ATHENA_GlycemicControl_Class210015]
		[ATHENA_GlycemicControl_Class240016]
		[ATHENA_GlycemicControl_Class540028]
		[ATHENA_GlycemicControl_Class540037]
		[ATHENA_GlycemicControl_Class540040]
		[ATHENA_GlycemicControl_Class540047]
		[ATHENA_GlycemicControl_Class230035]
		[ATHENA_GlycemicControl_Class540001]
		[ATHENA_GlycemicControl_Class540003]
		[ATHENA_GlycemicControl_Class230008]
		[ATHENA_GlycemicControl_Class550006]
		[ATHENA_GlycemicControl_Class720168]
		[ATHENA_GlycemicControl_Class720169]
		[ATHENA_GlycemicControl_Class1080004]
		[ATHENA_GlycemicControl_Class1080005]
		[ATHENA_GlycemicControl_Class1140002]
		[ATHENA_GlycemicControl_Class1170843]
		[ATHENA_GlycemicControl_Class1181956]
		[ATHENA_GlycemicControl_Class1210001]
		[ATHENA_GlycemicControl_Class1210003]
		[ATHENA_GlycemicControl_Class1210005]
		[ATHENA_GlycemicControl_Class1210012]
		[ATHENA_GlycemicControl_Class680000]
		[ATHENA_DM_GlycemicControl_Dashboard_Class60002]
		[ATHENA_GlycemicControl_Class1210009]
		[ATHENA_DM_GlycemicControl_Dashboard_Class81111]
		[ATHENA_DM_GlycemicControl_Dashboard_Class90342]
		[ATHENA_DM_GlycemicControl_Dashboard_Class120000]
		[ATHENA_DM_GlycemicControl_Dashboard_Class130014]
		[ATHENA_DM_GlycemicControl_Dashboard_Class130015]
		[ATHENA_DM_GlycemicControl_Dashboard_Class160323]
		[ATHENA_DM_GlycemicControl_Dashboard_Class170298]
		[ATHENA_DM_GlycemicControl_Dashboard_Class160000]
		[ATHENA_DM_GlycemicControl_Dashboard_Class170004])
	(transitions
		[ATHENA_GlycemicControl_Class530002]
		[ATHENA_GlycemicControl_Class530003]
		[ATHENA_GlycemicControl_Class530004]
		[ATHENA_GlycemicControl_Class540029]
		[ATHENA_GlycemicControl_Class540031]
		[ATHENA_GlycemicControl_Class540048]
		[ATHENA_GlycemicControl_Class540050]
		[ATHENA_GlycemicControl_Class540002]
		[ATHENA_GlycemicControl_Class540004]
		[ATHENA_GlycemicControl_Class550012]
		[ATHENA_GlycemicControl_Class550013]
		[ATHENA_GlycemicControl_Class720171]
		[ATHENA_GlycemicControl_Class720172]
		[ATHENA_GlycemicControl_Class1080009]
		[ATHENA_GlycemicControl_Class1080010]
		[ATHENA_GlycemicControl_Class1080012]
		[ATHENA_GlycemicControl_Class1140005]
		[ATHENA_GlycemicControl_Class1170845]
		[ATHENA_GlycemicControl_Class1181957]
		[ATHENA_GlycemicControl_Class1180000]
		[ATHENA_GlycemicControl_Class1210002]
		[ATHENA_GlycemicControl_Class1210004]
		[ATHENA_GlycemicControl_Class1210008]
		[ATHENA_GlycemicControl_Class1210014]
		[ATHENA_DM_GlycemicControl_Dashboard_Class60005]
		[ATHENA_DM_GlycemicControl_Dashboard_Class60006]
		[ATHENA_DM_GlycemicControl_Dashboard_Class60007]
		[ATHENA_DM_GlycemicControl_Dashboard_Class81115]
		[ATHENA_DM_GlycemicControl_Dashboard_Class130002]
		[ATHENA_DM_GlycemicControl_Dashboard_Class130003]
		[ATHENA_DM_GlycemicControl_Dashboard_Class130017]
		[ATHENA_DM_GlycemicControl_Dashboard_Class130018]
		[ATHENA_DM_GlycemicControl_Dashboard_Class130019]
		[ATHENA_DM_GlycemicControl_Dashboard_Class140001]
		[ATHENA_DM_GlycemicControl_Dashboard_Class170299]
		[ATHENA_DM_GlycemicControl_Dashboard_Class170300]
		[ATHENA_DM_GlycemicControl_Dashboard_Class170003]
		[ATHENA_DM_GlycemicControl_Dashboard_Class170005]))

([ATHENA_GlycemicControl_Class530002] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210037])
	(%3ATO [ATHENA_GlycemicControl_Class210040]))

([ATHENA_GlycemicControl_Class530003] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210040])
	(%3ATO [ATHENA_GlycemicControl_Class230000]))

([ATHENA_GlycemicControl_Class530004] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210040])
	(%3ATO [ATHENA_GlycemicControl_Class230004]))

([ATHENA_GlycemicControl_Class530005] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210038])
	(%3ATO [ATHENA_GlycemicControl_Class210044]))

([ATHENA_GlycemicControl_Class530006] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class520006]
		[ATHENA_GlycemicControl_Class530007])
	(label "Absence of AST and ALT or Absence of AST and ALT in past year")
	(operator OR))

([ATHENA_GlycemicControl_Class530007] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class520002]
		[ATHENA_GlycemicControl_Class520003])
	(label "Absence of AST and ALT")
	(operator AND))

([ATHENA_GlycemicControl_Class530008] of  Presence_Criterion

	(domain_term eGFR)
	(entry_type Numeric_Entry)
	(label "Absence of eGFR in past 12 mo")
	(period [library_Class60017])
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class530009] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class510000]
		[ATHENA_GlycemicControl_Class530008])
	(label "Absence of eGFR or Absence of eGFR in past yr")
	(operator OR))

([ATHENA_GlycemicControl_Class540000] of  Presence_Criterion

	(domain_term Non_Insulin_Related_Glucose_Reg_Agents)
	(entry_type Medication)
	(label "Presence of non-insulin agent rec add")
	(mood Recommend_Add)
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class540001] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class1300425]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110024]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110016]
		[ATHENA_DM_GlycemicControl_Dashboard_Class110022])
	(followed_by [ATHENA_GlycemicControl_Class540003])
	(label "dCannot Increase dose")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class1190001]))

([ATHENA_GlycemicControl_Class540002] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class540047])
	(%3ATO [ATHENA_GlycemicControl_Class540001]))

([ATHENA_GlycemicControl_Class540003] of  Choice_Step

	(branches [ATHENA_DM_GlycemicControl_Dashboard_Class120000])
	(label "dCannot Increase dose choices"))

([ATHENA_GlycemicControl_Class540004] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class540001])
	(%3ATO [ATHENA_GlycemicControl_Class540003]))

([ATHENA_GlycemicControl_Class540006] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210044])
	(%3ATO [ATHENA_GlycemicControl_Class210045]))

([ATHENA_GlycemicControl_Class540007] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240039])
	(%3ATO [ATHENA_GlycemicControl_Class240048]))

([ATHENA_GlycemicControl_Class540008] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240048])
	(%3ATO [ATHENA_GlycemicControl_Class240043]))

([ATHENA_GlycemicControl_Class540009] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210000])
	(%3ATO [ATHENA_GlycemicControl_Class210028]))

([ATHENA_GlycemicControl_Class540010] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210028])
	(%3ATO [ATHENA_GlycemicControl_Class210020]))

([ATHENA_GlycemicControl_Class540011] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210028])
	(%3ATO [ATHENA_GlycemicControl_Class210015]))

([ATHENA_GlycemicControl_Class540012] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class470002])
	(%3ATO [ATHENA_GlycemicControl_Class470003]))

([ATHENA_GlycemicControl_Class540017] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class470003])
	(%3ATO [ATHENA_GlycemicControl_Class210015]))

([ATHENA_GlycemicControl_Class540018] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class220004])
	(%3ATO [ATHENA_GlycemicControl_Class220006]))

([ATHENA_GlycemicControl_Class540019] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class220006])
	(%3ATO [ATHENA_GlycemicControl_Class230036]))

([ATHENA_GlycemicControl_Class540020] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class220006])
	(%3ATO [ATHENA_GlycemicControl_Class210015]))

([ATHENA_GlycemicControl_Class540021] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class220006])
	(%3ATO [ATHENA_GlycemicControl_Class240016]))

([ATHENA_GlycemicControl_Class540022] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class220006])
	(%3ATO [ATHENA_GlycemicControl_Class22]))

([ATHENA_GlycemicControl_Class540023] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class1210006]
		[ATHENA_GlycemicControl_Class1140229])
	(followed_by [ATHENA_GlycemicControl_Class580148])
	(label "dSecond Line Therapy II")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class140001]))

([ATHENA_GlycemicControl_Class540024] of  Presence_Criterion

	(domain_term Oral_Hypoglycemic_Agent)
	(entry_type Medication)
	(label "Presence of oral hypoglycemic agent rec_add")
	(mood Recommend_Add)
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class540025] of  Conditional_On_Screen_Message

	(label "Follow up in 3 months if rec add drug")
	(message "Follow up in 3 months")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class540024]))

([ATHENA_GlycemicControl_Class540026] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210000])
	(%3ATO [ATHENA_GlycemicControl_Class210028]))

([ATHENA_GlycemicControl_Class540027] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210028])
	(%3ATO [ATHENA_GlycemicControl_Class540023]))

([ATHENA_GlycemicControl_Class540028] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class210015]
		[ATHENA_GlycemicControl_Class1210001])
	(label "dNonPharm Choices II"))

([ATHENA_GlycemicControl_Class540029] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class210000])
	(%3ATO [ATHENA_GlycemicControl_Class540028]))

([ATHENA_GlycemicControl_Class540031] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class540028])
	(%3ATO [ATHENA_GlycemicControl_Class210015]))

([ATHENA_GlycemicControl_Class540032] of  Case_Step

	(branches [ATHENA_GlycemicControl_Class540037])
	(expression [ATHENA_GlycemicControl_Class540036])
	(label "No first line drug rec add"))

([ATHENA_GlycemicControl_Class540033] of  Presence_Criterion

	(domain_term BIGUANIDE)
	(entry_type Medication)
	(label "Absence of biguanide rec add")
	(mood Recommend_Add)
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class540034] of  Presence_Criterion

	(domain_term GLIPIZIDE)
	(entry_type Medication)
	(label "Absence of glipizide rec add")
	(mood Recommend_Add)
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class540035] of  Presence_Criterion

	(domain_term GLYBURIDE)
	(entry_type Medication)
	(label "Absence of glyburide rec add")
	(mood Recommend_Add)
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class540036] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class540033]
		[ATHENA_GlycemicControl_Class540034]
		[ATHENA_GlycemicControl_Class540035])
	(label "Absence of biguanide and glipizide and glyburide rec add")
	(operator AND))

([ATHENA_GlycemicControl_Class540037] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class1130000]
		[ATHENA_GlycemicControl_Class210036])
	(label "d3rd line therapy")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class1090646]))

([ATHENA_GlycemicControl_Class540038] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class540023])
	(%3ATO [ATHENA_GlycemicControl_Class540032]))

([ATHENA_GlycemicControl_Class540040] of  Action_Choice

	(followed_by [ATHENA_GlycemicControl_Class540047])
	(label "dIntensify II")
	(strict_rule_in_condition [criterion_INSTANCE_00001]))

([ATHENA_GlycemicControl_Class540041] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class240016]
		[ATHENA_GlycemicControl_Class210015]
		[ATHENA_GlycemicControl_Class1060000]
		[ATHENA_GlycemicControl_Class1160262]
		[ATHENA_GlycemicControl_Class1140000])
	(label "dOn One Drug II"))

([ATHENA_GlycemicControl_Class540042] of  Scenario

	(consultation_template [ATHENA_GlycemicControl_Class780000])
	(followed_by [ATHENA_GlycemicControl_Class540041])
	(label "Scenario:On one drug  not insulin II")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Class220003]))

([ATHENA_GlycemicControl_Class540044] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class540041])
	(%3ATO [ATHENA_GlycemicControl_Class240016]))

([ATHENA_GlycemicControl_Class540045] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class540042])
	(%3ATO [ATHENA_GlycemicControl_Class540041]))

([ATHENA_GlycemicControl_Class540046] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class540041])
	(%3ATO [ATHENA_GlycemicControl_Class210015]))

([ATHENA_GlycemicControl_Class540047] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class230035]
		[ATHENA_GlycemicControl_Class540001])
	(label "dIntensify choices II"))

([ATHENA_GlycemicControl_Class540048] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class540040])
	(%3ATO [ATHENA_GlycemicControl_Class540047]))

([ATHENA_GlycemicControl_Class540050] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class540047])
	(%3ATO [ATHENA_GlycemicControl_Class230035]))

([ATHENA_GlycemicControl_Class550000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class250014]
		[ATHENA_GlycemicControl_Class480015])
	(label "Absence of ACE-I/ARB and labs")
	(operator AND))

([ATHENA_GlycemicControl_Class550001] of  Parameterized_String

	(label "Param msg for contra drug cannot incr dose")
	(value "Patient is on contraindicated drug ?contra_drug but we cannot find a substitution.")
	(variables [ATHENA_GlycemicControl_Class560002]))

([ATHENA_GlycemicControl_Class550002] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class270003])
	(%3ATO [ATHENA_GlycemicControl_Class270002]))

([ATHENA_GlycemicControl_Class550003] of  Action_Choice

	(actions
		[KB_390055_Class3]
		[ATHENA_GlycemicControl_Class210025]
		[ATHENA_GlycemicControl_Class230026]
		[ATHENA_GlycemicControl_Class210036]
		[ATHENA_GlycemicControl_Class550024])
	(label "dOn 1st line therapy, add insulin or add alternative, refer")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class550004])
	(strict_rule_out_condition [ATHENA_GlycemicControl_Class1300424]))

([ATHENA_GlycemicControl_Class550004] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class90019]
		[ATHENA_GlycemicControl_Class230020])
	(label "Presence of MF and SU")
	(operator AND))

([ATHENA_GlycemicControl_Class550005] of  Scenario

	(consultation_template [ATHENA_GlycemicControl_Class780000])
	(followed_by [ATHENA_GlycemicControl_Class550006])
	(label "Scenario:On Two drugs not insulin II")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Class240038]))

([ATHENA_GlycemicControl_Class550006] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class240016]
		[ATHENA_GlycemicControl_Class210015]
		[ATHENA_DM_GlycemicControl_Dashboard_Class81111]
		[ATHENA_DM_GlycemicControl_Dashboard_Class170298])
	(label "dTwo drug choices II"))

([ATHENA_GlycemicControl_Class550008] of  Action_Choice

	(followed_by [ATHENA_GlycemicControl_Class550009])
	(label "dIntensify 2 drugs II")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class840141]))

([ATHENA_GlycemicControl_Class550009] of  Choice_Step

	(label "dIntensify two drug choices II"))

([ATHENA_GlycemicControl_Class550012] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class550006])
	(%3ATO [ATHENA_GlycemicControl_Class240016]))

([ATHENA_GlycemicControl_Class550013] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class550006])
	(%3ATO [ATHENA_GlycemicControl_Class210015]))

([ATHENA_GlycemicControl_Class550014] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class550008])
	(%3ATO [ATHENA_GlycemicControl_Class550009]))

([ATHENA_GlycemicControl_Class550016] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class550009])
	(%3ATO [ATHENA_GlycemicControl_Class550003]))

([ATHENA_GlycemicControl_Class550018] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class550004]
		[ATHENA_GlycemicControl_Class210131])
	(label "Presence of MF and SU and  drugs at max dose")
	(operator AND))

([ATHENA_GlycemicControl_Class550019] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class550009])
	(%3ATO [ATHENA_GlycemicControl_Class550003]))

([ATHENA_GlycemicControl_Class550020] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Instance_50005]
		[ATHENA_GlycemicControl_Class540025]
		[ATHENA_GlycemicControl_Class550024])
	(label "dAbsence of MF or SU")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class550022]))

([ATHENA_GlycemicControl_Class550021] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210132]
		[ATHENA_GlycemicControl_Class90030])
	(label "Absence of MF or SU")
	(operator OR))

([ATHENA_GlycemicControl_Class550022] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class550021]
		[ATHENA_GlycemicControl_Class210131])
	(label "Absence of MF or SU and drugs at max dose")
	(operator AND))

([ATHENA_GlycemicControl_Class550023] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class550009])
	(%3ATO [ATHENA_GlycemicControl_Class550020]))

([ATHENA_GlycemicControl_Class550024] of  Referral

	(label "Refer to endocrinologist when on 3 drugs")
	(rule_in_condition [ATHENA_GlycemicControl_Class540024])
	(who_to endocrinologist))

([ATHENA_GlycemicControl_Class550026] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240057])
	(%3ATO [ATHENA_GlycemicControl_Class240058]))

([ATHENA_GlycemicControl_Class550027] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240051])
	(%3ATO [ATHENA_GlycemicControl_Class240053]))

([ATHENA_GlycemicControl_Class550028] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240053])
	(%3ATO [ATHENA_GlycemicControl_Class240057]))

([ATHENA_GlycemicControl_Class550029] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240058])
	(%3ATO [ATHENA_GlycemicControl_Class240062]))

([ATHENA_GlycemicControl_Class550030] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240058])
	(%3ATO [ATHENA_GlycemicControl_Class230035]))

([ATHENA_GlycemicControl_Class550031] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240053])
	(%3ATO [ATHENA_GlycemicControl_Class210015]))

([ATHENA_GlycemicControl_Class550034] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240053])
	(%3ATO [ATHENA_GlycemicControl_Class230008]))

([ATHENA_GlycemicControl_Class550035] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240053])
	(%3ATO [ATHENA_GlycemicControl_Class240016]))

([ATHENA_GlycemicControl_Class550037] of  Conditional_On_Screen_Message

	(fine-grain_priority 1)
	(label "Absence of bicarb cannot add MF")
	(message "We would normally recommend metformin, but cannot do so because bicarb within past year is missing.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class520001]))

([ATHENA_GlycemicControl_Class550038] of  Conditional_On_Screen_Message

	(fine-grain_priority 1)
	(label "Absence of AST and ALT cannot add MF")
	(message "We would normally recommend metformin, but cannot do so because AST and ALT  labs within past year are missing.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class520006]))

([ATHENA_GlycemicControl_Class550039] of  Conditional_On_Screen_Message

	(fine-grain_priority 1)
	(label "Absence of eGFR and bicarb cannot add MF")
	(message "We would normally recommend metformin, but cannot do so because eGFR/creatinine within the past month and bicarb labwithin past year are missing.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class550040]))

([ATHENA_GlycemicControl_Class550040] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class520004]
		[ATHENA_GlycemicControl_Class520001])
	(label "Absence of eGFR and bicarb")
	(operator AND))

([ATHENA_GlycemicControl_Class550041] of  Conditional_On_Screen_Message

	(fine-grain_priority 1)
	(label "Absence of eGFR and AST/ALT cannot add MF")
	(message "We would normally recommend metformin, but cannot do so because eGFR/creatinine within the past month and AST/ALT lab within past year are missing.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class550042]))

([ATHENA_GlycemicControl_Class550042] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class400001]
		[ATHENA_GlycemicControl_Class520006])
	(label "Absence of eGFR in past mo and AST/ALT in past yr")
	(operator AND))

([ATHENA_GlycemicControl_Class550043] of  Conditional_On_Screen_Message

	(fine-grain_priority 1)
	(label "Absence of bicarb and AST/ALT cannot add MF")
	(message "We would normally recommend metformin, but cannot do so because bicarb and AST/ALT labwithin past year are missing.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class550044]))

([ATHENA_GlycemicControl_Class550044] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class520006]
		[ATHENA_GlycemicControl_Class520001])
	(label "Absence of bicarb and AST/ALT in past yr")
	(operator AND))

([ATHENA_GlycemicControl_Class550045] of  Conditional_On_Screen_Message

	(label "Absence of eGFR, bicarb, AST/ALT")
	(message "We would normally recommend metformin, but cannot do so because eGFR/creatinine within the past month and bicarb and AST/ALT labwithin past year are missing.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class550046]))

([ATHENA_GlycemicControl_Class550046] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class400001]
		[ATHENA_GlycemicControl_Class520001]
		[ATHENA_GlycemicControl_Class520006])
	(label "Absence eGFR, bicarb, AST/ALT")
	(operator AND))

([ATHENA_GlycemicControl_Class560000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class250022]
		[ATHENA_GlycemicControl_Class450339])
	(label "ACE-I current med contra and ARB contrai or SBP<110 or hi creatinine and low eGFR")
	(operator AND))

([ATHENA_GlycemicControl_Class560001] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class540000])
	(label "rec for adding 2nd line agent")
	(operator AND)
	(%3ADOCUMENTATION "removed requirement that we are adding 3rd non-insulin agent. will refer if moving to any 2nd line agent"))

([ATHENA_GlycemicControl_Class560002] of  Variable

	(derivation_expression [ATHENA_GlycemicControl_Class760000])
	(label "?contra_drug cannot substitute")
	(string_name "?contra_drug"))

([ATHENA_GlycemicControl_Class560003] of  Referral

	(label "Refer to endorinologist when rec 2nd line drug")
	(rule_in_condition [ATHENA_GlycemicControl_Class560001])
	(who_to endocrinologist))

([ATHENA_GlycemicControl_Class570000] of  Binary_Expression

	(first_argument [ATHENA_GlycemicControl_Class730430])
	(label "{eGFR, Bicarbonate, AST, ALT} - query")
	(operator -)
	(second_argument [ATHENA_GlycemicControl_Class590003]))

([ATHENA_GlycemicControl_Class570001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class250014]
		[ATHENA_GlycemicControl_Class410003])
	(label "Absence of ACE/ARB and absence of creatinine/eGFR")
	(operator AND))

([ATHENA_GlycemicControl_Class570002] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class250014]
		[ATHENA_GlycemicControl_Class400000])
	(label "Absence of ACE/ARB and absence of K")
	(operator AND))

([ATHENA_GlycemicControl_Class570003] of  Query_Result_Criterion

	(label "Query for contraindicated med")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class760000]))

([ATHENA_GlycemicControl_Class570004] of  Parameterized_Message

	(label "Param msg for contra drug cannot substitute")
	(message_type Primary_Recommendation)
	(parameterized_message [ATHENA_GlycemicControl_Class550001]))

([ATHENA_GlycemicControl_Class570005] of  Presence_Criterion

	(domain_term aspirin)
	(entry_type Adverse_Reaction)
	(label "Adverse reaction to aspirin")
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class580000] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class590001])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class580001] of  String_Set_Expression

	(label "{Bicarbonate, AST, ALT}")
	(set_elements
		"Bicarbonate"
		"AST"
		"ALT"))

([ATHENA_GlycemicControl_Class580002] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class480010])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class580003] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class480008])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class580004] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class480007])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class580005] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class480011])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class580006] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class480009])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class580007] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class480013])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class580008] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class480012])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class580009] of  Parameterized_Message

	(label "Parameterized: Missing increased MF dose labs message")
	(message_type Primary_Recommendation)
	(parameterized_message [ATHENA_GlycemicControl_Class580010])
	(rule_in_condition [ATHENA_GlycemicControl_Class590006]))

([ATHENA_GlycemicControl_Class580010] of  Parameterized_String

	(label "missing increase dose MF labs message")
	(value "Consider increasing the dose of metformin.  The following labs are older than 1 year:: (?missingMFLab).")
	(variables [ATHENA_GlycemicControl_Class590005]))

([ATHENA_GlycemicControl_Class580011] of  Variable_ValueSet

	(derivation_expression [ATHENA_GlycemicControl_Class570000])
	(label "Query for ?addMF_missingLabs"))

([ATHENA_GlycemicControl_Class580012] of  Structured_Query

	(attribute [domain_term])
	(label "Query for eGFR, bicarb, AST/ALT in past year")
	(type Numeric_Entry)
	(where_restriction
		[ATHENA_GlycemicControl_Class580013]
		[ATHENA_GlycemicControl_Class580016]))

([ATHENA_GlycemicControl_Class580013] of  Comparison_Filter

	(attribute [valid_time])
	(label "valid time > today -  1 year")
	(operator %3E)
	(value_expression [ATHENA_GlycemicControl_Class580014]))

([ATHENA_GlycemicControl_Class580014] of  Date_Expression

	(first_argument [time%3AINSTANCE_1])
	(label "today - 1 year")
	(operator -)
	(second_argument [ATHENA_GlycemicControl_Class580015]))

([ATHENA_GlycemicControl_Class580015] of  Definite_Duration

	(how_many "1")
	(label "1 year")
	(time_unit year))

([ATHENA_GlycemicControl_Class580016] of  N_aryFilter

	(filters
		[ATHENA_GlycemicControl_Class580020]
		[ATHENA_GlycemicControl_Class580021]
		[ATHENA_GlycemicControl_Class580027])
	(label "eGFR or bicarb or AST/ALT")
	(operator OR))

([ATHENA_GlycemicControl_Class580017] of  Qualitative_Constant

	(label "eGFR")
	(value "eGFR"))

([ATHENA_GlycemicControl_Class580018] of  Qualitative_Constant

	(label "Bicarbonate")
	(value "Bicarbonate"))

([ATHENA_GlycemicControl_Class580019] of  Qualitative_Constant

	(label "Systolic_BP")
	(value "Systolic_BP"))

([ATHENA_GlycemicControl_Class580020] of  Comparison_Filter

	(attribute [domain_term])
	(label "domain term eq eGFR")
	(operator eq)
	(value_expression [ATHENA_GlycemicControl_Class580017]))

([ATHENA_GlycemicControl_Class580021] of  Comparison_Filter

	(attribute [domain_term])
	(label "domain term eq Bicarbonate")
	(operator eq)
	(value_expression [ATHENA_GlycemicControl_Class580018]))

([ATHENA_GlycemicControl_Class580022] of  Comparison_Filter

	(attribute [domain_term])
	(label "Systolic_BP")
	(operator eq)
	(value_expression [ATHENA_GlycemicControl_Class580019]))

([ATHENA_GlycemicControl_Class580023] of  Qualitative_Constant

	(label "AST")
	(value "AST"))

([ATHENA_GlycemicControl_Class580024] of  Qualitative_Constant

	(label "ALT")
	(value "ALT"))

([ATHENA_GlycemicControl_Class580025] of  Comparison_Filter

	(attribute [domain_term])
	(label "domain term eq AST")
	(operator eq)
	(value_expression [ATHENA_GlycemicControl_Class580023]))

([ATHENA_GlycemicControl_Class580026] of  Comparison_Filter

	(attribute [domain_term])
	(label "domain term eq ALT")
	(operator eq)
	(value_expression [ATHENA_GlycemicControl_Class580024]))

([ATHENA_GlycemicControl_Class580027] of  N_aryFilter

	(filters
		[ATHENA_GlycemicControl_Class580025]
		[ATHENA_GlycemicControl_Class580026])
	(label "domain term eq AST or ALT")
	(operator OR))

([ATHENA_GlycemicControl_Class580148] of  Choice_Step

	(branches [ATHENA_GlycemicControl_Class1170839])
	(label "No first line drug rec add"))

([ATHENA_GlycemicControl_Class580516] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class240018])
	(%3ATO [ATHENA_GlycemicControl_Class550006]))

([ATHENA_GlycemicControl_Class590000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class390013]
		[ATHENA_GlycemicControl_Class390014])
	(label "NOT ACEI contraindicated OR NOT ARB contraindicated")
	(operator OR))

([ATHENA_GlycemicControl_Class590001] of  On_Screen_Message

	(label "Blocked MF message")
	(message "We would normally recommend Biguanide but are not able to do so because we are missing data (labs or vitals).")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class650000]))

([ATHENA_GlycemicControl_Class590002] of  N_aryFilter

	(filters
		[ATHENA_GlycemicControl_Class580020]
		[ATHENA_GlycemicControl_Class580021]
		[ATHENA_GlycemicControl_Class580025]
		[ATHENA_GlycemicControl_Class720137])
	(label "eGFR or bicarb or AST or ALT")
	(operator OR))

([ATHENA_GlycemicControl_Class590003] of  Structured_Query

	(attribute [domain_term])
	(label "Query for eGFR, bicarb, AST ALT in past year")
	(type Numeric_Entry)
	(where_restriction
		[ATHENA_GlycemicControl_Class580013]
		[ATHENA_GlycemicControl_Class590002]))

([ATHENA_GlycemicControl_Class590005] of  Variable

	(derivation_expression [ATHENA_GlycemicControl_Class720133])
	(label "{eGFR, Bicarbonate, AST, ALT} - query for lab in past year")
	(string_name "?missingMFLab"))

([ATHENA_GlycemicControl_Class590006] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class530008]
		[ATHENA_GlycemicControl_Class520001]
		[ATHENA_GlycemicControl_Class520006])
	(label "Absence of eGFR or bicarb or AST/ALT in past year")
	(operator OR))

([ATHENA_GlycemicControl_Class60000] of  Drug_Usage

	(Absolute_Contraindications
		ADR+anaphylaxis+to+glipizide
		ADR+anaphylaxis+to+glyburide
		ADR+anggioedema+or+anaphylaxis+or+stevens+johns+to+glimepiride
		ADR+anaphylaxis+to+SU+1st+gen
		ADR+anapylaxis+to+glimepiride
		ADR+anaphylaxis+to+sulfa+drugs
		ADR+angioedema+to+sulfa+drugs+or+SU
		ADR+cardiac+arrest+or+coma+or+thrombocytopenia+or+renal+failure+or+renal+impairment+to+glip%2C+glyb%2C+glim%2C+first+gen+SU%2C+sulfa
		ADR+SJS+to+glip+glyb+glim+SU+sulfa)
	(additional_ADR_check
		GLIMEPIRIDE
		GLYBURIDE
		GLIPIZIDE_XL
		ACETOHEXAMIDE
		CHLORPROPAMIDE
		Glibenclamide
		TOLAZAMIDE
		TOLBUTAMIDE
		Sulfa_drugs_noSU)
	(collateral_actions
		[ATHENA_GlycemicControl_Instance_140143]
		[ATHENA_GlycemicControl_Class490000]
		[ATHENA_GlycemicControl_Class730021])
	(Drug_Class_Name GLIPIZIDE)
	(Drug_Partners_To_Avoid
		GLYBURIDE
		GLIMEPIRIDE
		GLIPIZIDE_XL
		ACETOHEXAMIDE
		CHLORPROPAMIDE
		Glibenclamide
		Glibenclamide
		TOLAZAMIDE
		TOLBUTAMIDE)
	(formulary_preferred_drug_in_class [ATHENA_GlycemicControl_Instance_80004])
	(is_second-line_drug_for DM-Type2)
	(label "Glipizide")
	(Relative_Contraindications
		hypoglycemia
		HbA1c%3C6
		Allergy_to_sulfonamides))

([ATHENA_GlycemicControl_Class600000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class80026]
		[ATHENA_GlycemicControl_Class150035])
	(label "Age >=65 and absence of creatinine in last 30 days")
	(operator AND))

([ATHENA_GlycemicControl_Class600001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class250014]
		[ATHENA_GlycemicControl_Class590000])
	(label "Absence of ACE-I and ARB and NOT ACEI contraindicated and  NOT ARB contraindicated")
	(operator AND))

([ATHENA_GlycemicControl_Class600002] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class260026])
	(label "Absence of ACE-I and ARB, ACE-I and ARB contraindicated, msg")
	(rule_in [ATHENA_GlycemicControl_Class610003]))

([ATHENA_GlycemicControl_Class600003] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class600004])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class600004] of  On_Screen_Message

	(label "blocked alpha glucosidase inhibitor")
	(message "We would normally recommend alpha-glucosidase inhibitor but are not able to do so because we are missing data (labs or vitals).")
	(message_type Primary_Recommendation))

([ATHENA_GlycemicControl_Class600005] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class600006])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class600006] of  On_Screen_Message

	(label "blocked glp-1")
	(message "Consider adding GLP-1 agonist aftering evaluating miissing data (labs or vitals).")
	(message_type Primary_Recommendation))

([ATHENA_GlycemicControl_Class600007] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class600008])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class600008] of  On_Screen_Message

	(label "blocked nateglinide")
	(message "Consider adding nateglinide.  Current AST and ALT labs are older than 1 year.")
	(message_type Primary_Recommendation))

([ATHENA_GlycemicControl_Class60001] of  Conditional_On_Screen_Message

	(display_location Summary)
	(label "add chlorpropamide elderly")
	(message "100mg/day-125mg/day for elderly patients.")
	(message_type Recommendation)
	(rule_in_condition [KB_308520_Class8]))

([ATHENA_GlycemicControl_Class600010] of  Presence_Criterion

	(domain_term BIGUANIDE)
	(entry_type Medication)
	(label "Absence of biguanide blocked")
	(mood Blocked_Add)
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class600011] of  Presence_Criterion

	(domain_term GLIPIZIDE)
	(entry_type Medication)
	(label "Absence of glipizide blocked")
	(mood Blocked_Add)
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class600012] of  Presence_Criterion

	(domain_term GLYBURIDE)
	(entry_type Medication)
	(label "Absence of glyburide blocked")
	(mood Blocked_Add)
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class600013] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class600010]
		[ATHENA_GlycemicControl_Class600011]
		[ATHENA_GlycemicControl_Class600012])
	(label "Absence of biguanide, glipizide, glyburide blocked")
	(operator AND))

([ATHENA_GlycemicControl_Class600014] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class600013]
		[ATHENA_GlycemicControl_Class540036])
	(label "Absence of biguanide glipizide glyburide rec add AND blocked")
	(operator AND))

([ATHENA_GlycemicControl_Class60002] of  Conditional_On_Screen_Message

	(label "add chlorpropamide middle aged")
	(message "250mg/day in the mild-to-moderately severe, middle aged, stable patient")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class60003]))

([ATHENA_GlycemicControl_Class60003] of  Numeric_Term_Criterion

	(entry_type Numeric_Entry)
	(label "Age<65")
	(numeric_domain_term Age)
	(operator %3C)
	(value 65.0))

([ATHENA_GlycemicControl_Class60004] of  Collateral_Action

	(actions
		[ATHENA_GlycemicControl_Class60005]
		[ATHENA_GlycemicControl_Class60006])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class60005] of  Conditional_On_Screen_Message

	(display_location Summary)
	(label "add tolazamide age>=65")
	(message "100mg/day for elderly patients")
	(message_type Recommendation)
	(rule_in_condition [KB_308520_Class8]))

([ATHENA_GlycemicControl_Class60006] of  Conditional_On_Screen_Message

	(display_location Summary)
	(label "add tolazamide age<65")
	(message "100mg/day-250mg/day in the mild-to-moderately severe patient")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class60003]))

([ATHENA_GlycemicControl_Class60007] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Instance_140150])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class60009] of  Conditional_On_Screen_Message

	(display_location Summary)
	(label "add biguanide age >80")
	(message "For patients 80 years and over only add biguanides if they have normal creatinine clearance, and the dose should not be escalated to the maximum in elderly patients due to increased susceptibility to lactic acidosis.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class30001]))

([ATHENA_GlycemicControl_Class60010] of  Presence_Criterion

	(domain_term BIGUANIDE)
	(entry_type Medication)
	(label "presence of biguanide")
	(mood Authorized)
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class60011] of  Consultation_Guideline

	(first_step [KB_707783_Class4])
	(label "oral agent")
	(steps
		[KB_707783_Class4]
		[ATHENA_GlycemicControl_Class80004]
		[ATHENA_GlycemicControl_Class150020]
		[ATHENA_GlycemicControl_Class150027])
	(transitions
		[ATHENA_GlycemicControl_Class80008]
		[ATHENA_GlycemicControl_Class150025]
		[ATHENA_GlycemicControl_Class150030]))

([ATHENA_GlycemicControl_Class60012] of  Consultation_Branch_Step

	(branches [KB_707783_Class4])
	(label "Monotherapy with oral agent")
	(selection_method all_of))

([ATHENA_GlycemicControl_Class60013] of  Consultation_Action_Step

	(actions [KB_308520_Class6])
	(label "biguanide contrast warning"))

([ATHENA_GlycemicControl_Class600175] of  On_Screen_Message

	(label "Start Aspirin message old")
	(message "Consider aspirin therapy, if not contraindicated,  to reduce the risk of cardiovascular fatal events.")
	(message_type Primary_Recommendation)
	(subsidiary_message
		"1. Consider aspirin therapy (75 to 325 mg/day), unless contraindicated, for all adult patients with type 2 diabetes and evidence of cardiovascular disease. [A]"
		"2. Consider beginning aspirin therapy (75 to 325 mg/day) in patients age ≥ 40 with type 2 diabetes and one or more other cardiovascular risk factors. [B]"
		"3. Consider individual evaluation for aspirin therapy for patients age 30 to 40 with type 2 DM, with other cardiovascular risk factors, or with type 1 DM for duration of disease longer than 2 years. [I]"
		"4. When considering the value of antiplatelet therapy, the risks of hemorrhagic stroke or gastrointestinal bleeding must be balanced against the benefits of prevention of adverse cardiovascular outcomes. [I]"
		"Reference:  VA/DoD Clinical Practice Guideline Mangement of DM 2010"))

([ATHENA_GlycemicControl_Class600404] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class720000])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class610000] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "SBP<110 is past month")
	(numeric_domain_term Treatment_Systolic_BP)
	(operator %3C)
	(status "active")
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 110.0))

([ATHENA_GlycemicControl_Class610002] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class80026]
		[ATHENA_GlycemicControl_Class460000])
	(label "Age >=65 and absence of creatinine in past year")
	(operator AND))

([ATHENA_GlycemicControl_Class610003] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class250014]
		[ATHENA_GlycemicControl_Class610004])
	(label "Absence of ACE-I and ARB and ACE-I and ARB contraindicated")
	(operator AND))

([ATHENA_GlycemicControl_Class610004] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControlAlt_Class0]
		[ATHENA_GlycemicControlAlt_Class8])
	(label "ACEI and ARB contraindicated")
	(operator AND))

([ATHENA_GlycemicControl_Class610005] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class600002]))

([ATHENA_GlycemicControl_Class610454] of  Goal

	(conditional_goals
		[ATHENA_GlycemicControl_Class280001]
		[ATHENA_GlycemicControl_Class280002]
		[ATHENA_GlycemicControl_Class310001])
	(fine-grain_priority 1000)
	(inclusion_criteria [ATHENA_GlycemicControl_Class1040000])
	(label "Glycemic Control"))

([ATHENA_GlycemicControl_Class620000] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class330020]))

([ATHENA_GlycemicControl_Class620001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class620002]
		[ATHENA_GlycemicControl_Class620003])
	(label "Presence of bromocriptine or colesevelam")
	(operator OR))

([ATHENA_GlycemicControl_Class620002] of  Presence_Criterion

	(domain_term Bromocriptine)
	(entry_type Medication)
	(label "Presence of bromocriptine")
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class620003] of  Presence_Criterion

	(domain_term colesevelam)
	(entry_type Medication)
	(label "Presence of colesevelam")
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class620004] of  On_Screen_Message

	(label "Presence of drugs that affect blood glucse levels.")
	(message "Warning:  patient is taking either bromocriptine or colesevelam that has hypoglycemic properties")
	(message_type Primary_Recommendation))

([ATHENA_GlycemicControl_Class620005] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class620004])
	(label "drugs that have hypoglycemic effects")
	(rule_in [ATHENA_GlycemicControl_Class620001]))

([ATHENA_GlycemicControl_Class620006] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class620005]))

([ATHENA_GlycemicControl_Class630000] of  Consultation_Guideline

	(first_step [ATHENA_GlycemicControl_Class630008])
	(label "stACE/ARB")
	(steps
		[ATHENA_GlycemicControl_Class630008]
		[ATHENA_GlycemicControl_Class630002]
		[ATHENA_GlycemicControl_Class630003]
		[ATHENA_GlycemicControl_Class630009]
		[ATHENA_GlycemicControl_Class640347]
		[ATHENA_GlycemicControl_Class640232]
		[ATHENA_GlycemicControl_Class640239]
		[ATHENA_GlycemicControl_Class640001]
		[ATHENA_GlycemicControl_Class640000])
	(transitions
		[ATHENA_GlycemicControl_Class630010]
		[ATHENA_GlycemicControl_Class630011]
		[ATHENA_GlycemicControl_Class630012]
		[ATHENA_GlycemicControl_Class640233]
		[ATHENA_GlycemicControl_Class640240]
		[ATHENA_GlycemicControl_Class640241]
		[ATHENA_GlycemicControl_Class640003]
		[ATHENA_GlycemicControl_Class640004]))

([ATHENA_GlycemicControl_Class630002] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class250005])
	(followed_by [ATHENA_GlycemicControl_Class640001])
	(label "stAbsence ACE/ARB, evaluate start ACE/ARB")
	(rule_in [ATHENA_GlycemicControl_Class250014]))

([ATHENA_GlycemicControl_Class630003] of  Consultation_Action_Step

	(followed_by [ATHENA_GlycemicControl_Class630009])
	(label "stPresence ACE/ARB no action")
	(rule_in [ATHENA_GlycemicControl_Class640230]))

([ATHENA_GlycemicControl_Class630004] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class630006])
	(label "stEvaluate substitute ACE contra")
	(rule_in [ATHENA_GlycemicControlAlt_Class0]))

([ATHENA_GlycemicControl_Class630005] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControlAlt_Class0]
		[ATHENA_GlycemicControlAlt_Class8])
	(label "ACEI or ARB contraindicated")
	(operator OR))

([ATHENA_GlycemicControl_Class630006] of  Evaluate_Substitution_Activity

	(activity_class "Medication")
	(activity_spec Drug_Usage)
	(activity_spec_key [Drug_Class_Name])
	(activity_to_stop [ATHENA_GlycemicControl_Class770002])
	(alternatives [ATHENA_GlycemicControl_Class250015])
	(label "stEvaluate sub ACE"))

([ATHENA_GlycemicControl_Class630008] of  Consultation_Branch_Step

	(branches
		[ATHENA_GlycemicControl_Class630002]
		[ATHENA_GlycemicControl_Class630003])
	(label "stACE/ARB branch 1")
	(selection_method all_of))

([ATHENA_GlycemicControl_Class630009] of  Consultation_Branch_Step

	(branches [ATHENA_GlycemicControl_Class640239])
	(label "stContraindications branch 2")
	(selection_method all_of))

([ATHENA_GlycemicControl_Class630010] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class630008])
	(%3ATO [ATHENA_GlycemicControl_Class630002]))

([ATHENA_GlycemicControl_Class630011] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class630008])
	(%3ATO [ATHENA_GlycemicControl_Class630003]))

([ATHENA_GlycemicControl_Class630012] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class630003])
	(%3ATO [ATHENA_GlycemicControl_Class630009]))

([ATHENA_GlycemicControl_Class630013] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class630009])
	(%3ATO [ATHENA_GlycemicControl_Class630004]))

([ATHENA_GlycemicControl_Class640000] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class660593])
	(label "stACE and ARB contra msg")
	(rule_in [ATHENA_GlycemicControl_Class640234]))

([ATHENA_GlycemicControl_Class640001] of  Consultation_Branch_Step

	(branches [ATHENA_GlycemicControl_Class640000])
	(label "stCannot add ACE/ARB")
	(selection_method all_of))

([ATHENA_GlycemicControl_Class640003] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class630002])
	(%3ATO [ATHENA_GlycemicControl_Class640001]))

([ATHENA_GlycemicControl_Class640004] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class640001])
	(%3ATO [ATHENA_GlycemicControl_Class640000]))

([ATHENA_GlycemicControl_Class640230] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class640245]
		[ATHENA_GlycemicControl_Class640231])
	(label "Presence of ACEi or ARB")
	(operator OR))

([ATHENA_GlycemicControl_Class640231] of  Presence_Criterion

	(domain_term Angiotensin_II_receptor_blockers)
	(entry_type Medication)
	(label "Presence of active ARB")
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class640232] of  Consultation_Branch_Step

	(branches [ATHENA_GlycemicControl_Class640347])
	(label "stCheck if any recommended substitution")
	(selection_method all_of))

([ATHENA_GlycemicControl_Class640233] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class640232])
	(%3ATO [ATHENA_GlycemicControl_Class640347]))

([ATHENA_GlycemicControl_Class640234] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class640235]
		[ATHENA_GlycemicControl_Class640236]
		[ATHENA_GlycemicControlAlt_Class41409]
		[ATHENA_GlycemicControlAlt_Class41410])
	(label "No recommendation adding or blocking ACE/ARB")
	(operator AND))

([ATHENA_GlycemicControl_Class640235] of  Presence_Criterion

	(domain_term Angiotensin_II_receptor_blockers)
	(entry_type Medication)
	(label "No recommendation adding ARB")
	(mood Recommend_Add)
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class640236] of  Presence_Criterion

	(domain_term ACE_Inhibitors)
	(entry_type Medication)
	(label "No recommendation adding ACE")
	(mood Recommend_Add)
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class640237] of  PAL_Query

	(case_variable "$patient_id")
	(key_slot [drug_name])
	(label "Query for contraindicated ACE/ARB")
	(PAL_query [ATHENA_GlycemicControl_Class640238]))

([ATHENA_GlycemicControl_Class640238] of  PAL-QUERY

	(%3APAL-NAME "query for contraindicated ACE/ARB")
	(%3APAL-RANGE "(defrange ?current_med :FRAME Medication) \n(defrange ?problem :FRAME Note_Entry) \n(defrange ?med_class :FRAME Drug_Usage) \n(defrange ?contraindication :FRAME Medical_Conditions_Metaclass Absolute_Contraindications) \n(defrange ?derived_contraindication :FRAME Diagnostic_Term_Metaclass)")
	(%3APAL-STATEMENT "(findall ?current_med        \n         (and (or (not (own-slot-not-null mood ?current_med ))           \n                  (is-class (drug_name ?current_med))    \n                  (mood ?current_med Authorized))             \n              (patient_id ?current_med $patient_id)            \n              (exists ?med_class                    \n                      (and (equal-or-subclass-of (coerce-to-class (drug_name ?current_med)) \n                                                 (Drug_Class_Name ?med_class ))\n                           (or  (equal-or-subclass-of (Drug_Class_Name ?med_class) Angiotensin_II_receptor_blockers)     \n                                (equal-or-subclass-of (Drug_Class_Name ?med_class)  ACE_Inhibitors))                   \n                           (or (exists ?contraindication                                      \n                                       (and  (Absolute_Contraindications ?med_class ?contraindication)\n                                             (exists ?problem                                                    \n                                                     (and (patient_id ?problem $patient_id)                                                        \n                                                          (is-class (domain_term ?problem) )                                                        \n                                                          (equal-or-subclass-of  (coerce-to-class (domain_term ?problem))                                                                               \n                                                                                 ?contraindication)))))                             \n                               (exists ?derived_contraindication                                                                 \n                                       (and (Absolute_Contraindications ?med_class ?derived_contraindication)\n                                            (is-derivable ?derived_contraindication))))                    \n                      ))))"))

([ATHENA_GlycemicControl_Class640239] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class640243])
	(followed_by [ATHENA_GlycemicControl_Class640232])
	(label "stACE/ARB med contraindicated, Substitute")
	(rule_in [ATHENA_GlycemicControl_Class630005]))

([ATHENA_GlycemicControl_Class640240] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class630009])
	(%3ATO [ATHENA_GlycemicControl_Class640239]))

([ATHENA_GlycemicControl_Class640241] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class640239])
	(%3ATO [ATHENA_GlycemicControl_Class640232]))

([ATHENA_GlycemicControl_Class640243] of  Evaluate_Substitution_Activity

	(activity_class "Medication")
	(activity_spec Drug_Usage)
	(activity_spec_key [Drug_Class_Name])
	(activity_to_stop [ATHENA_GlycemicControlAlt_Class10270])
	(alternatives
		[ATHENA_GlycemicControl_Class250006]
		[ATHENA_GlycemicControl_Class250015])
	(label "Evaluate substituting contraindicated ACE/ARB"))

([ATHENA_GlycemicControl_Class640244] of  PAL_Criterion

	(case_variable "$patient_id")
	(label "ACE/ARB med contraindicated")
	(PAL_constraint [ATHENA_GlycemicControl_Class650245]))

([ATHENA_GlycemicControl_Class640245] of  Presence_Criterion

	(domain_term ACE_Inhibitors)
	(entry_type Medication)
	(label "Presence of ACE-I ever")
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class640347] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class390008])
	(label "stCannot substitute, stop contra ACE/ARB")
	(rule_in [ATHENA_GlycemicControl_Class640234]))

([ATHENA_GlycemicControl_Class650000] of  Presence_Criterion

	(domain_term BIGUANIDE)
	(entry_type Medication)
	(label "Presence of MF blocked")
	(mood Blocked_Add)
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class650245] of  %3APAL-CONSTRAINT

	(%3APAL-NAME "ACE/ARB current med contraindicated")
	(%3APAL-RANGE "(defrange ?current_med :FRAME Medication) \n(defrange ?problem :FRAME Note_Entry) \n(defrange ?med_class :FRAME Drug_Usage) \n(defrange ?contraindication :FRAME Medical_Conditions_Metaclass Absolute_Contraindications) \n(defrange ?derived_contraindication :FRAME Diagnostic_Term_Metaclass)")
	(%3APAL-STATEMENT "(exists ?current_med        \n         (and (or (not (own-slot-not-null mood ?current_med ))           \n                  (is-class (drug_name ?current_med))    \n                  (mood ?current_med Authorized))             \n              (patient_id ?current_med $patient_id)            \n              (exists ?med_class                    \n                      (and (equal-or-subclass-of (coerce-to-class (drug_name ?current_med)) \n                                                 (Drug_Class_Name ?med_class ))\n                           (or  (equal-or-subclass-of (Drug_Class_Name ?med_class) Angiotensin_II_receptor_blockers)     \n                                (equal-or-subclass-of (Drug_Class_Name ?med_class)  ACE_Inhibitors))                   \n                           (or (exists ?contraindication                                      \n                                       (and  (Absolute_Contraindications ?med_class ?contraindication)\n                                             (exists ?problem                                                    \n                                                     (and (patient_id ?problem $patient_id)                                                        \n                                                          (is-class (domain_term ?problem) )                                                        \n                                                          (equal-or-subclass-of  (coerce-to-class (domain_term ?problem))                                                                               \n                                                                                 ?contraindication)))))                             \n                               (exists ?derived_contraindication                                                                 \n                                       (and (Absolute_Contraindications ?med_class ?derived_contraindication)\n                                            (is-derivable ?derived_contraindication))))                    \n                      ))))"))

([ATHENA_GlycemicControl_Class660000] of  On_Screen_Message

	(label "Start Aspirin message")
	(message "Consider aspirin therapy.  Additional information available <a href=\"http://@AUTOPMWEBSERVER@/DM/AdditionalAspirinTherapyInfo.pdf\"> here</a>.")
	(message_type Primary_Recommendation))

([ATHENA_GlycemicControl_Class660293] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class630008])
	(%3ATO [ATHENA_GlycemicControl_Class630002]))

([ATHENA_GlycemicControl_Class660294] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class630008])
	(%3ATO [ATHENA_GlycemicControl_Class630003]))

([ATHENA_GlycemicControl_Class660295] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class630002])
	(%3ATO [ATHENA_GlycemicControl_Class640001]))

([ATHENA_GlycemicControl_Class660296] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class640001])
	(%3ATO [ATHENA_GlycemicControl_Class640000]))

([ATHENA_GlycemicControl_Class660297] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class630003])
	(%3ATO [ATHENA_GlycemicControl_Class630009]))

([ATHENA_GlycemicControl_Class660298] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class630009])
	(%3ATO [ATHENA_GlycemicControl_Class640239]))

([ATHENA_GlycemicControl_Class660299] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class640239])
	(%3ATO [ATHENA_GlycemicControl_Class640232]))

([ATHENA_GlycemicControl_Class660300] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class640232])
	(%3ATO [ATHENA_GlycemicControl_Class640347]))

([ATHENA_GlycemicControl_Class660301] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class630002]))

([ATHENA_GlycemicControl_Class660302] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class630003]))

([ATHENA_GlycemicControl_Class660593] of  On_Screen_Message

	(label "ACEi and ARB both contraindicated no rule in")
	(message "ACE Inhibitors and ARBs are both contraindicated and cannot be used for renal protection")
	(message_type Recommendation)
	(rule_in_condition [criterion_INSTANCE_00001]))

([ATHENA_GlycemicControl_Class670000] of  Scenario

	(consultation_template [ATHENA_GlycemicControl_Class930004])
	(followed_by [ATHENA_GlycemicControl_Class680002])
	(label "Scenario:Insulin")
	(new_encounter TRUE)
	(precondition [ATHENA_GlycemicControl_Class670001]))

([ATHENA_GlycemicControl_Class670001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210005]
		[ATHENA_GlycemicControl_Class1300005])
	(label "Presence of HbA1c or GlycoHem and Pres insulin and Abs DM-I or pres Dm-1 and dm-2")
	(operator AND))

([ATHENA_GlycemicControl_Class670002] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class670000])
	(%3ATO [ATHENA_GlycemicControl_Class240048]))

([ATHENA_GlycemicControl_Class670434] of  Comparison_Filter

	(attribute [drug_name])
	(label "drug eq glyburide")
	(operator eq)
	(value_expression [GLYBURIDE]))

([ATHENA_GlycemicControl_Class680000] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class240044]
		[ATHENA_GlycemicControl_Class240034]
		[ATHENA_GlycemicControl_Class240045])
	(label "dInsulin out of scope")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class680001]))

([ATHENA_GlycemicControl_Class680001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210005]
		[ATHENA_GlycemicControl_Class1300005])
	(label "Presence of HbA1c or GlycoHem and Pres insulin")
	(operator AND))

([ATHENA_GlycemicControl_Class680002] of  Choice_Step

	(branches [ATHENA_GlycemicControl_Class680000])
	(label "dInsulin out of scope"))

([ATHENA_GlycemicControl_Class680004] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class670000])
	(%3ATO [ATHENA_GlycemicControl_Class680002]))

([ATHENA_GlycemicControl_Class680005] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class680002])
	(%3ATO [ATHENA_GlycemicControl_Class680000]))

([ATHENA_GlycemicControl_Class690000] of  Comparison_Filter

	(attribute [substance])
	(label "substance eq glimepiride")
	(operator eq)
	(value_expression [GLIMEPIRIDE]))

([ATHENA_GlycemicControl_Class690001] of  Comparison_Filter

	(attribute [domain_term])
	(label "domain term eq Anaphylaxis")
	(operator eq)
	(value_expression [Anaphylaxis]))

([ATHENA_GlycemicControl_Class690002] of  Comparison_Filter

	(attribute [domain_term])
	(label "domain term eq Stevens-Johnson Syndrome")
	(operator eq)
	(value_expression [Stevens_Johnson_Syndrome]))

([ATHENA_GlycemicControl_Class7] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Instance_50008]
		[ATHENA_GlycemicControl_Class22]
		[ATHENA_GlycemicControl_Class150003]
		[ATHENA_GlycemicControl_Class200292])
	(label "DM - Oral Agent(s)"))

([ATHENA_GlycemicControl_Class70000] of  Drug_Usage

	(Absolute_Contraindications
		Age%3E%3D65+and+creatinine%3E%3D2
		ADR+anaphylaxis+to+glyburide
		ADR+anaphylaxis+to+glipizide
		ADR+anggioedema+or+anaphylaxis+or+stevens+johns+to+glimepiride
		ADR+anaphylaxis+to+SU+1st+gen
		ADR+anapylaxis+to+glimepiride
		Abs+glyb+and+eGFR%3C30
		Pres+glyb+and+eGFR%3C30+past+year)
	(additional_ADR_check
		GLIPIZIDE
		GLIPIZIDE_XL
		GLIMEPIRIDE
		CHLORPROPAMIDE
		ACETOHEXAMIDE
		TOLBUTAMIDE
		TOLAZAMIDE
		Glibenclamide)
	(collateral_actions
		[ATHENA_GlycemicControl_Instance_140143]
		[ATHENA_GlycemicControl_Class490000]
		[ATHENA_GlycemicControl_Class730014]
		[ATHENA_GlycemicControl_Class730022]
		[ATHENA_GlycemicControl_Class900000]
		[ATHENA_GlycemicControl_Class1010000])
	(Do_Not_Intensify_Conditions
		Age+%3E%3D65+and+absence+of+creatinine+in+past+year
		Absence+of+eGFR+in+past+year
		30%3C%3DeGFR%3C60+past+year)
	(Do_Not_Start_Conditions
		Age+%3E%3D65+and+absence+of+creatinine+in+past+month
		Age%3E%3D65+and+creatinine%3E%3D2
		Absence+of+eGFR+in+past+month
		eGFR%3C60)
	(Drug_Class_Name GLYBURIDE)
	(Drug_Partners_To_Avoid
		GLIPIZIDE
		GLIMEPIRIDE
		GLIPIZIDE_XL)
	(formulary_preferred_drug_in_class [ATHENA_GlycemicControl_Instance_80005])
	(is_second-line_drug_for DM-Type2)
	(label "GLYBURIDE")
	(Relative_Contraindications
		hypoglycemia
		HbA1c%3C6
		Allergy_ADR_to_sulfa_drugs
		Allergy_to_sulfonamides))

([ATHENA_GlycemicControl_Class700000] of  N_aryFilter

	(filters
		[ATHENA_GlycemicControl_Class690002]
		[ATHENA_GlycemicControl_Class690001]
		[library_Class130002])
	(label "Stevens-Johnson or Anaphylasis or Angioedema")
	(operator OR))

([ATHENA_GlycemicControl_Class700001] of  Query_Result_Criterion

	(label "angioedema or anaphylaxis or angioedemia ADR to glimepiride")
	(presence TRUE)
	(query [ATHENA_GlycemicControlAlt_Class31635]))

([ATHENA_GlycemicControl_Class700003] of  Structured_Query

	(label "find anaphylaxis as ADR to glipizide")
	(type Adverse_Reaction)
	(where_restriction
		[ATHENA_GlycemicControl_Class690001]
		[ATHENA_GlycemicControl_Class700006]))

([ATHENA_GlycemicControl_Class700004] of  Comparison_Filter

	(attribute [substance])
	(label "substance eq glypizide")
	(operator eq)
	(value_expression [GLIPIZIDE]))

([ATHENA_GlycemicControl_Class700005] of  Comparison_Filter

	(attribute [substance])
	(label "substance eq glipizide ER")
	(operator eq)
	(value_expression [GLIPIZIDE_XL]))

([ATHENA_GlycemicControl_Class700006] of  N_aryFilter

	(filters
		[ATHENA_GlycemicControl_Class700005]
		[ATHENA_GlycemicControl_Class700004])
	(label "glipizide or glipyzide er")
	(operator OR))

([ATHENA_GlycemicControl_Class700007] of  Query_Result_Criterion

	(label "anaphylaxis as ADR to glipizide")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class700003]))

([ATHENA_GlycemicControl_Class70001] of  Guideline_Drug

	(dose_level_ranges
		[ATHENA_GlycemicControl_Class1181526]
		[ATHENA_GlycemicControl_Class1181527])
	(drug_usage [ATHENA_GlycemicControl_Class60000])
	(generic_drug GLIPIZIDE_XL)
	(increase_dose_ceiling 19.9)
	(label "Glipizide XL")
	(max_recommended_dose 20.1)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(starting_dose 2.5))

([ATHENA_GlycemicControl_Class70209] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class50002])
	(label "Metformin check serum B12")
	(rule_in [ATHENA_GlycemicControl_Class60010]))

([ATHENA_GlycemicControl_Class70210] of  Consultation_Selection

	(%3AFROM [KB_707783_Class4])
	(%3ATO [ATHENA_GlycemicControl_Class70209]))

([ATHENA_GlycemicControl_Class710000] of  Structured_Query

	(label "find anaphylaxis as ADR to glyburide")
	(type Adverse_Reaction)
	(where_restriction
		[ATHENA_GlycemicControl_Class690001]
		[ATHENA_GlycemicControl_Class710001]))

([ATHENA_GlycemicControl_Class710001] of  Comparison_Filter

	(attribute [substance])
	(label "substance eq glyburide")
	(operator eq)
	(value_expression [GLYBURIDE]))

([ATHENA_GlycemicControl_Class710002] of  Query_Result_Criterion

	(label "anaphylaxis as ADR to glyburide")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class710000]))

([ATHENA_GlycemicControl_Class720000] of  Parameterized_Message

	(label "Parameterized: Missing add metformin labs (AST/ALT)  message")
	(message_type Primary_Recommendation)
	(parameterized_message [ATHENA_GlycemicControl_Class720001])
	(rule_in_condition [ATHENA_GlycemicControl_Class720004]))

([ATHENA_GlycemicControl_Class720001] of  Parameterized_String

	(label "Missing bicarb and AST/ALT")
	(value "We would normally recommend increasing the dose of metformin, but could not do so because we are missing labs. The following labs: ?missingMFLab are absent or older than 1 year .")
	(variables [ATHENA_GlycemicControl_Class720149]))

([ATHENA_GlycemicControl_Class720002] of  Variable

	(derivation_expression [ATHENA_GlycemicControl_Class720003])
	(label "Missing bicarb or AST/ALT")
	(string_name "?missingMFLab"))

([ATHENA_GlycemicControl_Class720003] of  Conditional_Expressions

	(conditional_expression_list
		[ATHENA_GlycemicControl_Class730428]
		[ATHENA_GlycemicControl_Class730437])
	(label "Missing bicarb or AST/ALT"))

([ATHENA_GlycemicControl_Class720004] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class520001]
		[ATHENA_GlycemicControl_Class1320000])
	(label "Absence of Bicarb or AST/ALT in past year")
	(operator OR))

([ATHENA_GlycemicControl_Class720133] of  Conditional_Expressions

	(conditional_expression_list
		[ATHENA_GlycemicControl_Class720134]
		[ATHENA_GlycemicControl_Class720135]
		[ATHENA_GlycemicControl_Class720136])
	(label "missing increase metformin dose labs"))

([ATHENA_GlycemicControl_Class720134] of  Conditional_Expression

	(label "Delete AST from set")
	(precondition [ATHENA_GlycemicControl_Class720140])
	(value [ATHENA_GlycemicControl_Class720138]))

([ATHENA_GlycemicControl_Class720135] of  Conditional_Expression

	(label "Delete ALT fromset")
	(precondition [ATHENA_GlycemicControl_Class720146])
	(value [ATHENA_GlycemicControl_Class720144]))

([ATHENA_GlycemicControl_Class720136] of  Conditional_Expression

	(label "Default case: {eGFR, Bicarbonate, AST, ALT} - query")
	(precondition [criterion_INSTANCE_00001])
	(value [ATHENA_GlycemicControl_Class570000]))

([ATHENA_GlycemicControl_Class720137] of  Comparison_Filter

	(attribute [domain_term])
	(label "domain term eq ALT")
	(operator eq)
	(value_expression [ATHENA_GlycemicControl_Class580024]))

([ATHENA_GlycemicControl_Class720138] of  Binary_Expression

	(first_argument [ATHENA_GlycemicControl_Class570000])
	(label "{eGFR, Bicarbonate, AST, ALT} - query - {AST}")
	(operator -)
	(second_argument [ATHENA_GlycemicControl_Class720139]))

([ATHENA_GlycemicControl_Class720139] of  String_Set_Expression

	(label "{AST}")
	(set_elements "AST"))

([ATHENA_GlycemicControl_Class720140] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class720141]
		[ATHENA_GlycemicControl_Class720142])
	(label "AST but not ALT in set")
	(operator AND))

([ATHENA_GlycemicControl_Class720141] of  Expression_Comparison_Criterion

	(expression [ATHENA_GlycemicControl_Class570000])
	(label "AST in set")
	(operator member_of)
	(variable [ATHENA_GlycemicControl_Class580023]))

([ATHENA_GlycemicControl_Class720142] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class720143])
	(label "ALT not in set")
	(operator NOT))

([ATHENA_GlycemicControl_Class720143] of  Expression_Comparison_Criterion

	(expression [ATHENA_GlycemicControl_Class570000])
	(label "ALT in set")
	(operator member_of)
	(variable [ATHENA_GlycemicControl_Class580024]))

([ATHENA_GlycemicControl_Class720144] of  Binary_Expression

	(first_argument [ATHENA_GlycemicControl_Class570000])
	(label "{eGFR, Bicarbonate, AST, ALT} - query - {ALT}")
	(operator -)
	(second_argument [ATHENA_GlycemicControl_Class720145]))

([ATHENA_GlycemicControl_Class720145] of  String_Set_Expression

	(label "{ALT}")
	(set_elements "ALT"))

([ATHENA_GlycemicControl_Class720146] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class720143]
		[ATHENA_GlycemicControl_Class720147])
	(label "ALT but not AST in set")
	(operator AND))

([ATHENA_GlycemicControl_Class720147] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class720141])
	(label "AST not ins et")
	(operator NOT))

([ATHENA_GlycemicControl_Class720148] of  Collateral_Action

	(actions
		[ATHENA_GlycemicControl_Class1030423]
		[ATHENA_GlycemicControl_Class1030422]
		[ATHENA_GlycemicControl_Class1420000]
		[ATHENA_GlycemicControl_Class720000])
	(mood Blocked_Increase))

([ATHENA_GlycemicControl_Class720149] of  Variable

	(derivation_expression [ATHENA_DM_GlycemicControl_Dashboard_Class2])
	(label "PatientChar Missing increase metformin dose labs")
	(string_name "?missingMFLab"))

([ATHENA_GlycemicControl_Class720168] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class720169]
		[ATHENA_GlycemicControl_Class1181956])
	(label "No 1st or 2nd ine drug rec sub"))

([ATHENA_GlycemicControl_Class720169] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class1130000]
		[ATHENA_GlycemicControl_Class570004])
	(label "Link to alternalternative sub")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class1090646]))

([ATHENA_GlycemicControl_Class720171] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class230008])
	(%3ATO [ATHENA_GlycemicControl_Class720168]))

([ATHENA_GlycemicControl_Class720172] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class720168])
	(%3ATO [ATHENA_GlycemicControl_Class720169]))

([ATHENA_GlycemicControl_Class720507] of  Presence_Criterion

	(domain_term BIGUANIDE)
	(entry_type Medication)
	(label "Absence of biguanide rec delete")
	(mood Recommend_Delete)
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class720508] of  Presence_Criterion

	(domain_term SULFONYLUREAS_2NDGEN)
	(entry_type Medication)
	(label "Absence of SU rec delete")
	(mood Recommend_Delete)
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class720509] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class960005]
		[ATHENA_GlycemicControl_Class600010]
		[ATHENA_GlycemicControl_Class600011]
		[ATHENA_GlycemicControl_Class540034]
		[ATHENA_GlycemicControl_Class600012]
		[ATHENA_GlycemicControl_Class540035]
		[ATHENA_GlycemicControl_Class1090642]
		[ATHENA_GlycemicControl_Class1090641])
	(label "Absence of biguanide or SU or Sax rec add")
	(operator AND))

([ATHENA_GlycemicControl_Class730000] of  Collateral_Action

	(actions
		[ATHENA_GlycemicControl_Class730001]
		[ATHENA_GlycemicControl_Class730002]
		[ATHENA_GlycemicControl_Class730003])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class730001] of  Order_TestProcedure

	(label "Order eGFR - missing past month")
	(rule_in_condition [ATHENA_GlycemicControl_Class400001])
	(test_or_procedure eGFR))

([ATHENA_GlycemicControl_Class730002] of  Order_TestProcedure

	(label "Order K - absence in past month")
	(rule_in_condition [ATHENA_GlycemicControl_Class400000])
	(test_or_procedure Potassium))

([ATHENA_GlycemicControl_Class730003] of  Order_TestProcedure

	(label "Order SBP - missing in past mo")
	(rule_in_condition [ATHENA_GlycemicControl_Class410002])
	(test_or_procedure Systolic_BP))

([ATHENA_GlycemicControl_Class730008] of  Collateral_Action

	(actions
		[ATHENA_GlycemicControl_Class730001]
		[ATHENA_GlycemicControl_Class730009]
		[ATHENA_GlycemicControl_Class730010]
		[ATHENA_GlycemicControl_Class730011])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class730009] of  Order_TestProcedure

	(label "Order bicarb - missing past year")
	(rule_in_condition [ATHENA_GlycemicControl_Class520001])
	(test_or_procedure Bicarbonate))

([ATHENA_GlycemicControl_Class730010] of  Order_TestProcedure

	(label "Order AST - missing in past year")
	(rule_in_condition [ATHENA_GlycemicControl_Class500003])
	(test_or_procedure AST))

([ATHENA_GlycemicControl_Class730011] of  Order_TestProcedure

	(label "Order ALT - missing in past year")
	(rule_in_condition [ATHENA_GlycemicControl_Class500004])
	(test_or_procedure ALT))

([ATHENA_GlycemicControl_Class730012] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class730013])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class730013] of  On_Screen_Message

	(label "Age > 65 and missing creatinine msg")
	(message "We would normally recommend glyburide, but patient's age is >= 65 and is missing creatinine lab in past month")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class600000]))

([ATHENA_GlycemicControl_Class730014] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class730015])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class730015] of  Order_TestProcedure

	(label "Order creatinine - missing lab past month and age > 65")
	(rule_in_condition [ATHENA_GlycemicControl_Class600000])
	(test_or_procedure Creatinine))

([ATHENA_GlycemicControl_Class730016] of  Collateral_Action

	(actions
		[ATHENA_GlycemicControl_Class730010]
		[ATHENA_GlycemicControl_Class730011])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class730017] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class730001])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class730018] of  Collateral_Action

	(actions [KB_390055_Class1])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class730019] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Instance_140158])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class730020] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Instance_140152])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class730021] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Instance_140153])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class730022] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Instance_140151])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class730023] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Instance_140146])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class730024] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Instance_140154])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class730025] of  Collateral_Action

	(actions
		[ATHENA_GlycemicControl_Class730009]
		[ATHENA_GlycemicControl_Class730010]
		[ATHENA_GlycemicControl_Class730011]
		[ATHENA_GlycemicControl_Class410005])
	(mood Blocked_Increase))

([ATHENA_GlycemicControl_Class730026] of  Order_TestProcedure

	(label "Order creatinine - missing past year & age>=65")
	(rule_in_condition [ATHENA_GlycemicControl_Class600000])
	(test_or_procedure Creatinine))

([ATHENA_GlycemicControl_Class730027] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class730026])
	(mood Blocked_Increase))

([ATHENA_GlycemicControl_Class730028] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class730029])
	(mood Blocked_Increase))

([ATHENA_GlycemicControl_Class730029] of  Conditional_On_Screen_Message

	(label "Missing creatinine past year and age>65 for increase glyburide")
	(message "We would normally consider increase the dose of glyburide, but patient's agie is >=65 and creatinine lab within the past year is missing.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class610002]))

([ATHENA_GlycemicControl_Class730030] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class410005])
	(mood Blocked_Increase))

([ATHENA_GlycemicControl_Class730428] of  Conditional_Expression

	(label "{Bicarbonate, AST, ALT}")
	(precondition [ATHENA_GlycemicControl_Class730436])
	(value [ATHENA_GlycemicControl_Class580001]))

([ATHENA_GlycemicControl_Class730429] of  Binary_Expression

	(first_argument [ATHENA_GlycemicControl_Class580001])
	(label "{Bicarbonate, AST, ALT} - query")
	(operator -)
	(second_argument [ATHENA_GlycemicControl_Class590003]))

([ATHENA_GlycemicControl_Class730430] of  String_Set_Expression

	(label "{eGFR, Bicarbonate, AST, ALT}")
	(set_elements
		"eGFR"
		"Bicarbonate"
		"AST"
		"ALT"))

([ATHENA_GlycemicControl_Class730431] of  Structured_Query

	(attribute [domain_term])
	(label "Query for Bicarb, AST/ALT in past year")
	(type Numeric_Entry)
	(where_restriction
		[ATHENA_GlycemicControl_Class580013]
		[ATHENA_GlycemicControl_Class730432]))

([ATHENA_GlycemicControl_Class730432] of  N_aryFilter

	(filters
		[ATHENA_GlycemicControl_Class580021]
		[ATHENA_GlycemicControl_Class580025]
		[ATHENA_GlycemicControl_Class580026])
	(label "Bicarb or AST or ALT")
	(operator OR))

([ATHENA_GlycemicControl_Class730433] of  Binary_Expression

	(first_argument [ATHENA_GlycemicControl_Class730429])
	(label "Delete")
	(operator -)
	(second_argument [ATHENA_GlycemicControl_Class720139]))

([ATHENA_GlycemicControl_Class730434] of  String_Set_Expression

	(label "{Bicarbonate}")
	(set_elements "Bicarbonate"))

([ATHENA_GlycemicControl_Class730436] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class520001]
		[ATHENA_GlycemicControl_Class520006])
	(label "Absence of bicarb, AST/ALT in past year")
	(operator AND))

([ATHENA_GlycemicControl_Class730437] of  Conditional_Expression

	(label "{Bicarbonate}")
	(precondition [criterion_INSTANCE_00001])
	(value [ATHENA_GlycemicControl_Class730434]))

([ATHENA_GlycemicControl_Class730592] of  Collateral_Action

	(actions
		[ATHENA_GlycemicControl_Class500000]
		[ATHENA_GlycemicControl_Class550037]
		[ATHENA_GlycemicControl_Class550038])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class740000] of  Structured_Query

	(label "Find anaphylaxis ADR to SU 1st gen")
	(type Adverse_Reaction)
	(where_restriction
		[ATHENA_GlycemicControl_Class740001]
		[ATHENA_GlycemicControl_Class690001]))

([ATHENA_GlycemicControl_Class740001] of  Comparison_Filter

	(attribute [substance])
	(label "substance is subclass of SU 1st gen")
	(operator subclass_of)
	(value_expression [SULFONYLUREAS_1STGEN]))

([ATHENA_GlycemicControl_Class740003] of  Query_Result_Criterion

	(label "anaphylaxis ADR to SU 1st gen")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class740000]))

([ATHENA_GlycemicControl_Class741055] of  Collateral_Action

	(actions
		[ATHENA_GlycemicControl_Class980014]
		[ATHENA_GlycemicControl_Class741056]
		[ATHENA_GlycemicControl_Class1410000]
		[ATHENA_DM_GlycemicControl_Dashboard_Class12289])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class741056] of  On_Screen_Message

	(label "Missing eGFR, cannot add metformin")
	(message "We could not evaluate metformin because we are missing an eGFR.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class510000]))

([ATHENA_GlycemicControl_Class750000] of  On_Screen_Message

	(label "Request confirmation of target goal")
	(message "Request confirmation of target goal")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class760000] of  Structured_Query

	(attribute [drug_name])
	(label "Query for contraindicated  med")
	(type Medication)
	(where_restriction [ATHENA_GlycemicControl_Class760001]))

([ATHENA_GlycemicControl_Class760001] of  Comparison_Filter

	(attribute [drug_name])
	(label "drug name a member of contraindicated non-insulin glocose med")
	(operator member_of)
	(value_expression [ATHENA_GlycemicControl_Class760002]))

([ATHENA_GlycemicControl_Class760002] of  Structured_Query

	(attribute [Drug_Class_Name])
	(label "Drug class name of contraindicated non-insulin glucose drug usage")
	(type Drug_Usage)
	(where_restriction
		[eon2_Class60001]
		[ATHENA_GlycemicControl_Class760003]
		[ATHENA_GlycemicControlAlt_Class20627]))

([ATHENA_GlycemicControl_Class760003] of  Comparison_Filter

	(attribute [Drug_Class_Name])
	(label "drug class name is a non-insulin glucose regulating drug usge")
	(operator subclass_of)
	(value_expression [Non_Insulin_Related_Glucose_Reg_Agents]))

([ATHENA_GlycemicControl_Class770000] of  Drug_Usage

	(Absolute_Contraindications
		eGFR%3C45
		AST%3E3*UpperLimitOfNormal
		ALT%3E3*UpperLimitOfNormal)
	(collateral_actions [ATHENA_GlycemicControl_Class820000])
	(Do_Not_Intensify_Conditions
		Absence+of+eGFR+in+past+year
		Absence+of+AST+and+ALT+in+past+year)
	(Do_Not_Start_Conditions
		Absence+of+eGFR+in+past+month
		Absence+of+AST+and+ALT+in+past+year)
	(Drug_Class_Name SGLT2_Inhibitor)
	(Drug_Partners_To_Avoid UGT_Inducers)
	(label "SGLT2 Inhibitor")
	(Relative_Indications DM-Type2))

([ATHENA_GlycemicControl_Class770001] of  Structured_Query

	(attribute [Drug_Class_Name])
	(label "Drug class name of contraindicated ARB drug usage")
	(type Drug_Usage)
	(where_restriction
		[eon2_Class60001]
		[ATHENA_GlycemicControlAlt_Class7]))

([ATHENA_GlycemicControl_Class770002] of  Structured_Query

	(attribute [drug_name])
	(label "Query for contraindicated ACE-I med")
	(type Medication)
	(where_restriction [ATHENA_GlycemicControl_Class770004]))

([ATHENA_GlycemicControl_Class770003] of  Structured_Query

	(attribute [drug_name])
	(label "Query for contraindicated ARB med")
	(type Medication)
	(where_restriction [ATHENA_GlycemicControl_Class770005]))

([ATHENA_GlycemicControl_Class770004] of  Comparison_Filter

	(attribute [drug_name])
	(label "Drug name member of contraindicated ACE-I")
	(operator member_of)
	(value_expression [ATHENA_GlycemicControlAlt_Class4]))

([ATHENA_GlycemicControl_Class770005] of  Comparison_Filter

	(attribute [drug_name])
	(label "drug names of contraindicated ARB")
	(operator member_of)
	(value_expression [ATHENA_GlycemicControlAlt_Class6]))

([ATHENA_GlycemicControl_Class780000] of  Consultation_Guideline

	(first_step [ATHENA_GlycemicControl_Class790002])
	(label "dAll scenarios xcept DM and Insulin No ACE/ARB")
	(steps
		[ATHENA_GlycemicControl_Class790002]
		[ATHENA_GlycemicControl_Class290000]
		[ATHENA_GlycemicControl_Class300000]
		[ATHENA_GlycemicControl_Class380018]
		[ATHENA_GlycemicControl_Class260036]
		[ATHENA_GlycemicControl_Class350010]
		[ATHENA_GlycemicControl_Class330020]
		[ATHENA_GlycemicControl_Class260050]
		[ATHENA_GlycemicControl_Class260041]
		[ATHENA_GlycemicControl_Class330006]
		[ATHENA_GlycemicControl_Class510001]
		[ATHENA_GlycemicControl_Class620005]
		[ATHENA_GlycemicControl_Class290004]
		[ATHENA_GlycemicControl_Class930001]
		[ATHENA_GlycemicControl_Class1070181]
		[ATHENA_GlycemicControl_Class1080002]
		[ATHENA_GlycemicControl_Class1080000]
		[ATHENA_GlycemicControl_Class1200000]
		[ATHENA_GlycemicControl_Class1312626]
		[ATHENA_DM_GlycemicControl_Dashboard_Class80006])
	(transitions
		[ATHENA_GlycemicControl_Class790005]
		[ATHENA_GlycemicControl_Class790006]
		[ATHENA_GlycemicControl_Class790007]
		[ATHENA_GlycemicControl_Class790009]
		[ATHENA_GlycemicControl_Class790010]
		[ATHENA_GlycemicControl_Class790011]
		[ATHENA_GlycemicControl_Class790012]
		[ATHENA_GlycemicControl_Class790013]
		[ATHENA_GlycemicControl_Class790014]
		[ATHENA_GlycemicControl_Class790015]
		[ATHENA_GlycemicControl_Class790016]
		[ATHENA_GlycemicControl_Class290005]
		[ATHENA_GlycemicControl_Class930002]
		[ATHENA_GlycemicControl_Class1070182]
		[ATHENA_GlycemicControl_Class1090004]
		[ATHENA_GlycemicControl_Class1090005]
		[ATHENA_GlycemicControl_Class1200001]
		[ATHENA_GlycemicControl_Class1312627]
		[ATHENA_DM_GlycemicControl_Dashboard_Class80007]))

([ATHENA_GlycemicControl_Class780001] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "eGFR<45 past month")
	(numeric_domain_term eGFR)
	(operator %3C)
	(status "active")
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 45.0))

([ATHENA_GlycemicControl_Class780508] of  Query_Result_Criterion

	(label "Presence of contraindicated non-insulin glucose reg med")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class760000]))

([ATHENA_GlycemicControl_Class780509] of  Structured_Query

	(attribute [drug_name])
	(label "Query for contraindicated drug")
	(type Medication)
	(where_restriction [eon2_Class60001]))

([ATHENA_GlycemicControl_Class780510] of  Query_Result_Criterion

	(label "Presence of contraindicated drug")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class780509]))

([ATHENA_GlycemicControl_Class780511] of  Query_Result_Criterion

	(label "GLIPIZIDE or GLYBURIDE or GLIMERPRIDE contraindicated")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class780512]))

([ATHENA_GlycemicControl_Class780512] of  Structured_Query

	(label "GLIPIZIDE or GLYBURIDE or GLIMERPRIDE drug usage contraindicated")
	(type Drug_Usage)
	(where_restriction
		[eon2_Class60001]
		[ATHENA_GlycemicControl_Class780513]))

([ATHENA_GlycemicControl_Class780513] of  N_aryFilter

	(filters
		[ATHENA_GlycemicControl_Class780514]
		[ATHENA_GlycemicControl_Class780515]
		[ATHENA_GlycemicControl_Class780516])
	(label "Drug class name GLIPIZIDE or GLYBURIDE or GLIMERPRIDE")
	(operator OR))

([ATHENA_GlycemicControl_Class780514] of  Comparison_Filter

	(attribute [Drug_Class_Name])
	(label "drug class name eq GLIPIZIDE")
	(operator eq)
	(value_expression [GLIPIZIDE]))

([ATHENA_GlycemicControl_Class780515] of  Comparison_Filter

	(attribute [Drug_Class_Name])
	(label "drug class name GLYBURIDE")
	(operator eq)
	(value_expression [GLYBURIDE]))

([ATHENA_GlycemicControl_Class780516] of  Comparison_Filter

	(attribute [Drug_Class_Name])
	(label "drug class name eq GLIMERPIRIDE")
	(operator eq)
	(value_expression [GLIMEPIRIDE]))

([ATHENA_GlycemicControl_Class780932] of  Variable

	(derivation_expression [ATHENA_GlycemicControl_Class770002])
	(label "structured query ACEi med contraindicated")
	(string_name "ACEiMedContraindicated"))

([ATHENA_GlycemicControl_Class782179] of  Variable

	(derivation_expression [ATHENA_GlycemicControl_Class380002])
	(label "PAL query ACEi med contraindicated")
	(string_name "ACEi med contraindicated"))

([ATHENA_GlycemicControl_Class790000] of  Conditional_On_Screen_Message

	(label "Conditional: Missing eGFR/creatinine, cannotadd metformin")
	(message "Consider adding Biguanide (metformin), after evaluating a more recent creatinine/eGFR lab.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class410003]))

([ATHENA_GlycemicControl_Class790002] of  Consultation_Branch_Step

	(branches
		[ATHENA_GlycemicControl_Class290000]
		[ATHENA_GlycemicControl_Class300000]
		[ATHENA_GlycemicControl_Class380018]
		[ATHENA_GlycemicControl_Class350010]
		[ATHENA_GlycemicControl_Class330020]
		[ATHENA_GlycemicControl_Class260036]
		[ATHENA_GlycemicControl_Class260050]
		[ATHENA_GlycemicControl_Class260041]
		[ATHENA_GlycemicControl_Class330006]
		[ATHENA_GlycemicControl_Class510001]
		[ATHENA_GlycemicControl_Class620005]
		[ATHENA_GlycemicControl_Class290004]
		[ATHENA_GlycemicControl_Class930001]
		[ATHENA_GlycemicControl_Class1070181]
		[ATHENA_GlycemicControl_Class1080002]
		[ATHENA_GlycemicControl_Class1080000]
		[ATHENA_GlycemicControl_Class1200000]
		[ATHENA_GlycemicControl_Class1312626]
		[ATHENA_DM_GlycemicControl_Dashboard_Class80006])
	(label "dAll CDS scenarios No ACE/ARB")
	(selection_method all_of))

([ATHENA_GlycemicControl_Class790003] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class150027]))

([ATHENA_GlycemicControl_Class790004] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class80004]))

([ATHENA_GlycemicControl_Class790005] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class290000]))

([ATHENA_GlycemicControl_Class790006] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class300000]))

([ATHENA_GlycemicControl_Class790007] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class380018]))

([ATHENA_GlycemicControl_Class790009] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class350010]))

([ATHENA_GlycemicControl_Class790010] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class330020]))

([ATHENA_GlycemicControl_Class790011] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class260036]))

([ATHENA_GlycemicControl_Class790012] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class260050]))

([ATHENA_GlycemicControl_Class790013] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class260041]))

([ATHENA_GlycemicControl_Class790014] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class330006]))

([ATHENA_GlycemicControl_Class790015] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class510001]))

([ATHENA_GlycemicControl_Class790016] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class620005]))

([ATHENA_GlycemicControl_Class8] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Instance_50008]
		[ATHENA_GlycemicControl_Class22]
		[ATHENA_GlycemicControl_Instance_130784]
		[ATHENA_GlycemicControl_Class150002]
		[ATHENA_GlycemicControl_Class150004]
		[ATHENA_GlycemicControl_Class150015]
		[ATHENA_GlycemicControl_Class200292])
	(label "DM - Oral agents and insulin"))

([ATHENA_GlycemicControl_Class80000] of  Start_Activity

	(activity [ATHENA_GlycemicControl_Instance_50004])
	(label "Start Metformin"))

([ATHENA_GlycemicControl_Class800000] of  Presence_Criterion

	(domain_term Non_encoded_DM_drugs)
	(entry_type Medication)
	(label "Absence of non-encoded DM drug")
	(presence FALSE))

([ATHENA_GlycemicControl_Class800002] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class240037]
		[ATHENA_GlycemicControl_Class800006])
	(label "2 non-insulin agents and rec add or block new agent")
	(operator AND))

([ATHENA_GlycemicControl_Class800003] of  Referral

	(label "Refer to endocrinologist when adding 3rd drug")
	(rule_in_condition [ATHENA_GlycemicControl_Class1300000])
	(who_to endocrinologist))

([ATHENA_GlycemicControl_Class800006] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class540000]
		[ATHENA_GlycemicControl_Class800007])
	(label "Presence of non-insulin agent rec add or blocked")
	(operator OR))

([ATHENA_GlycemicControl_Class800007] of  Presence_Criterion

	(domain_term Non_Insulin_Related_Glucose_Reg_Agents)
	(entry_type Medication)
	(label "Presence of non-insulin agent blocked")
	(mood Blocked_Add)
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class800009] of  Referral

	(label "Refer to endocrinologiest true")
	(rule_in_condition [criterion_INSTANCE_00001])
	(who_to endocrinologist))

([ATHENA_GlycemicControl_Class80001] of  Presence_Criterion

	(domain_term Oral_Hypoglycemic_Agent)
	(entry_type Medication)
	(label "Absence of hypoglycemic agent recommendation")
	(mood Recommend_Add)
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class800010] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class560003]
		[ATHENA_GlycemicControl_Class930000])
	(label "Msg/follow up/referal after 1st line therapy")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class540000]))

([ATHENA_GlycemicControl_Class80002] of  Consultation_Guideline

	(first_step [ATHENA_GlycemicControl_Class80003])
	(label "Nonpharmacologic therapy")
	(steps
		[ATHENA_GlycemicControl_Class80003]
		[ATHENA_GlycemicControl_Class80004]
		[ATHENA_GlycemicControl_Class150020]
		[ATHENA_GlycemicControl_Class150027])
	(transitions
		[ATHENA_GlycemicControl_Class90199]
		[ATHENA_GlycemicControl_Class130115]
		[ATHENA_GlycemicControl_Class150026]
		[ATHENA_GlycemicControl_Class150029]))

([ATHENA_GlycemicControl_Class80003] of  Consultation_Branch_Step

	(branches
		[ATHENA_GlycemicControl_Class80004]
		[ATHENA_GlycemicControl_Class150020]
		[ATHENA_GlycemicControl_Class150027])
	(label "Nonpharmacologic therapy")
	(selection_method all_of))

([ATHENA_GlycemicControl_Class80004] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class660000])
	(label "Start aspirin")
	(rule_in [criterion_INSTANCE_00001])
	(rule_out [ATHENA_GlycemicControl_Class80006]))

([ATHENA_GlycemicControl_Class80006] of  Presence_Criterion

	(domain_term aspirin)
	(entry_type Medication)
	(label "Presence of aspirin")
	(mood Authorized)
	(presence TRUE)
	(status "active")
	(%3ADOCUMENTATION "3/25/13 add aspirin in domain term"))

([ATHENA_GlycemicControl_Class80007] of  On_Screen_Message

	(label "Start Aspirin")
	(message "Consider aspirin therapy to reduce the risk of cardiovascular fatal events.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class80008] of  Consultation_Selection

	(%3AFROM [KB_707783_Class4])
	(%3ATO [ATHENA_GlycemicControl_Class80004]))

([ATHENA_GlycemicControl_Class80009] of  Supporting_Material

	(abstract "Kristin To Pharmacist VAPAHCS")
	(label "Kristin To Pharmacist VAPAHCS 9/2009")
	(role evidence))

([ATHENA_GlycemicControl_Class80010] of  Relative_Time_Interval_Definite

	(how_many "1")
	(label "> 1 year")
	(polarity Before)
	(relative_time_point [time%3AINSTANCE_1])
	(time_unit year))

([ATHENA_GlycemicControl_Class80011] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class60010]
		[ATHENA_GlycemicControl_Class830000])
	(label "On metformin and Absence of B12 in past 2 years")
	(operator AND))

([ATHENA_GlycemicControl_Class80013] of  Presence_Criterion

	(domain_term B_12)
	(entry_type Numeric_Entry)
	(label "Absence of  B12 in past year")
	(period [ATHENA_DM_Eye_Instance_30019])
	(presence FALSE))

([ATHENA_GlycemicControl_Class80015] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class80019])
	(label "Add ACE message")
	(rule_in [ATHENA_GlycemicControl_Class80018]))

([ATHENA_GlycemicControl_Class80017] of  Consultation_Selection

	(%3AFROM [KB_707783_Class4])
	(%3ATO [ATHENA_GlycemicControl_Class80015]))

([ATHENA_GlycemicControl_Class80018] of  Presence_Criterion

	(domain_term ACE_Inhibitors)
	(entry_type Medication)
	(label "Absence of ACE Inhibitor")
	(mood Authorized)
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class80019] of  On_Screen_Message

	(label "Add ACE despite kidney function")
	(message "Patients with diabetes should be considered for use of ACE inhibitor or ARB in order to provide renal protection.")
	(message_type Recommendation)
	(references
		[ATHENA_GlycemicControl_Class80009]
		[ATHENA_GlycemicControl_Class240014]))

([ATHENA_GlycemicControl_Class80023] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "eGFR <30 past year")
	(numeric_domain_term eGFR)
	(operator %3C)
	(valid_window [ATHENA_DM_Eye_Instance_30019])
	(value 30.0))

([ATHENA_GlycemicControl_Class80024] of  Drug_Contraindication_Relation

	(contraindication CCS-7.2.11)
	(supporting_materials [ATHENA_GlycemicControl_Class80025]))

([ATHENA_GlycemicControl_Class80025] of  Supporting_Material

	(abstract "ADA 2009 guidelines")
	(label "ADA 2009 guidelines")
	(URL "http://care.diabetesjournals.org/content/32/Supplement_1/S3.full.pdf+html"))

([ATHENA_GlycemicControl_Class80026] of  Numeric_Term_Criterion

	(entry_type Numeric_Entry)
	(label "age >=65")
	(numeric_domain_term Age)
	(operator %3E%3D)
	(value 65.0))

([ATHENA_GlycemicControl_Class80027] of  Supporting_Material

	(abstract "•	July 9/2009:  On September 4, 2007, VA MedSAFE sent out information about the increased risk of severe hypoglycemia with glyburide, especially in patients with renal insufficiency or decreased renal function due to age. Each VISN received a list of patients aged 65 years and older with an active prescription for glyburide and a serum creatinine ≥ 2 mg/dl so that appropriate intervention, such as a switch to glipizide, could be taken")
	(label "PBM age>=65y gliburide")
	(URL "•	http://www.fda.gov/Drugs/DrugSafety/PostmarketDrugSafetyInformationforPatientsandProviders/ucm143406.htm"))

([ATHENA_GlycemicControl_Class810000] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "most recent eGFR<30 no time frame")
	(numeric_domain_term eGFR)
	(operator %3C)
	(status "active")
	(value 30.0))

([ATHENA_GlycemicControl_Class810214] of  Parameterized_Message

	(label "Param msg for not encoded drug")
	(message_type Primary_Recommendation)
	(parameterized_message [ATHENA_GlycemicControl_Class810215])
	(rule_in_condition [criterion_INSTANCE_00001]))

([ATHENA_GlycemicControl_Class810215] of  Parameterized_String

	(label "Param msg for not encoded drug")
	(value "Patient has an active prescription for ?Not_Encoded_DM_drug that we have not evaluated.  We therefore cannot give recommendations and patient is out of scope. Please consult <a href=\"http://@AUTOPMWEBSERVER@/DM/\nVADoD_DM_CPG_2017.pdf#page=83\">  Appendix B of the VA 2017 DM Guidelines </a> for recommendations.")
	(variables [ATHENA_GlycemicControl_Class1110248]))

([ATHENA_GlycemicControl_Class820000] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class820001])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class820001] of  On_Screen_Message

	(label "Canaglifzin and K levels msg")
	(message "Canaglifozin can lead to hyperkalemia.  Please monitor K levels.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class820002] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class820003])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class820003] of  On_Screen_Message

	(label "UGT inducers and canaglifozin warning")
	(message "If patient is on UGT induces (e.g. rifampin, pheytoin, phenobarbitol, ritonovir) and 45<eGFR<60, do not prescribe canafligozin.")
	(message_type Primary_Recommendation))

([ATHENA_GlycemicControl_Class820458] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1160263]
		[ATHENA_GlycemicControl_Class800000])
	(label "Query for Encoded DM drugs and Absence non-Encoded DM drugs")
	(operator AND))

([ATHENA_GlycemicControl_Class830000] of  Presence_Criterion

	(domain_term B_12)
	(entry_type Numeric_Entry)
	(label "Absence of B12 in past 2 years")
	(period [ATHENA_DM_Eye_Instance_80007])
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Class830001] of  On_Screen_Message

	(label "Gen msg all patients re ACE/ARB")
	(message "Consider ACE or ARB for renal protection if eGFR and K are within acceptable levels.")
	(message_type Primary_Recommendation))

([ATHENA_GlycemicControl_Class830003] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class830001])
	(label "Gen msg ACE/ARB")
	(rule_in [ATHENA_GlycemicControl_Class250014]))

([ATHENA_GlycemicControl_Class830004] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class830003]))

([ATHENA_GlycemicControl_Class840000] of  Structured_Query

	(attribute [drug_name])
	(label "(Structured Query) meds that have bad drug partner")
	(type Medication)
	(where_restriction [ATHENA_GlycemicControl_Class840001]))

([ATHENA_GlycemicControl_Class840001] of  N_aryFilter

	(filters
		[eon2_Class80000]
		[eon2_Class100000])
	(label "has bad partner")
	(operator OR))

([ATHENA_GlycemicControl_Class840003] of  Variable

	(derivation_expression [ATHENA_GlycemicControl_Class840000])
	(label "PatientChar structured query: bad drug partner (any drug usage)"))

([ATHENA_GlycemicControl_Class840126] of  Attributes_Comparison

	(attribute [drug_name])
	(attribute_to_compare [Drug_Class_Name])
	(label "drug name not drug class name")
	(operator not_subclass_of))

([ATHENA_GlycemicControl_Class840132] of  Structured_Query

	(attribute [drug_name])
	(label "Query for glycemic-control meds that have bad partner")
	(type Medication)
	(where_restriction [ATHENA_GlycemicControl_Class1040918])
	(%3ADOCUMENTATION "Query for meds where one med involved in bad drug partners is a subclass of Blood_Glucose_Regulation_Agent and at least one of the partners must have a Drug Usage that is specified in the drug_usage slot of the guideline"))

([ATHENA_GlycemicControl_Class840133] of  Comparison_Filter

	(attribute [drug_name])
	(label "meds of non-insulin guideline drug bad drug partner")
	(operator member_of)
	(value_expression [ATHENA_GlycemicControl_Class840134]))

([ATHENA_GlycemicControl_Class840134] of  Structured_Query

	(attribute [Drug_Class_Name])
	(label "drug class name of bad drug partner non-insulin glucose drug usage")
	(type Drug_Usage)
	(where_restriction
		[ATHENA_GlycemicControl_Class760003]
		[ATHENA_GlycemicControl_Class840135]))

([ATHENA_GlycemicControl_Class840135] of  N_aryFilter

	(filters
		[ATHENA_GlycemicControl_Class840136]
		[ATHENA_GlycemicControl_Class840137])
	(label "EPR bad drug partner or derivable")
	(operator OR))

([ATHENA_GlycemicControl_Class840136] of  Comparison_Filter

	(attribute [Drug_Partners_To_Avoid])
	(label "EPR bad drug partner DO NOT USE")
	(operator intersect))

([ATHENA_GlycemicControl_Class840137] of  Predicate_Filter

	(attribute [Drug_Partners_To_Avoid])
	(label "Derivable bad drug partner")
	(predicate derivable)
	(quantifier exists))

([ATHENA_GlycemicControl_Class840138] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class850167]
		[ATHENA_GlycemicControl_Class850006]
		[ATHENA_GlycemicControl_Class850007])
	(label "dBad Drug Partner")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class840142]))

([ATHENA_GlycemicControl_Class840139] of  Query_Result_Criterion

	(label "Presence bad drug partner DO NOT USE")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class840132]))

([ATHENA_GlycemicControl_Class840140] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class870004])
	(label "NOT presence bad drug partner")
	(operator NOT))

([ATHENA_GlycemicControl_Class840141] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210014]
		[ATHENA_GlycemicControl_Class230038]
		[ATHENA_GlycemicControl_Class1000007])
	(label "NOt at target and no contra and no bad drug partner")
	(operator AND))

([ATHENA_GlycemicControl_Class840142] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210014]
		[ATHENA_GlycemicControl_Class230038]
		[ATHENA_GlycemicControl_Class870004])
	(label "NOt at target and no contra and  bad drug partner")
	(operator AND))

([ATHENA_GlycemicControl_Class840471] of  Guideline_Drug

	(dose_level_ranges
		[ATHENA_GlycemicControl_Class840472]
		[ATHENA_GlycemicControl_Class840473])
	(Drug_Class_Name Canagliflozin)
	(drug_usage [ATHENA_GlycemicControl_Class770000])
	(generic_drug Canagliflozin)
	(increase_dose_ceiling 100.1)
	(label "Canagliflozin")
	(max_recommended_dose 300.0)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(starting_dose 100.0))

([ATHENA_GlycemicControl_Class840472] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 50.0)
	(upper_limit 100.0))

([ATHENA_GlycemicControl_Class840473] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 100.1)
	(upper_limit 300.0))

([ATHENA_GlycemicControl_Class850000] of  Presence_Criterion

	(domain_term THIAZOLIDINEDIONES)
	(entry_type Medication)
	(label "Presence of thiazolidinediones")
	(mood Authorized)
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class850001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class340009]
		[ATHENA_GlycemicControl_Class850000])
	(label "Presence of gemfibrozil and thiazolidinediones")
	(operator AND))

([ATHENA_GlycemicControl_Class850002] of  Presence_Criterion

	(domain_term UGT_Inducers)
	(entry_type Medication)
	(label "Presence of UGT inducers")
	(mood Authorized)
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class850003] of  Presence_Criterion

	(domain_term SGLT2_Inhibitor)
	(entry_type Medication)
	(label "Presence of SGLT2 inhibitor")
	(mood Authorized)
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class850004] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class850002]
		[ATHENA_GlycemicControl_Class850003])
	(label "Presence of UGT inducers and SGLT2 inhibitor")
	(operator AND))

([ATHENA_GlycemicControl_Class850005] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class850001]
		[ATHENA_GlycemicControl_Class850004]
		[ATHENA_GlycemicControl_Class870004])
	(label "Bad drug partner DM")
	(operator OR))

([ATHENA_GlycemicControl_Class850006] of  Conditional_On_Screen_Message

	(label "Presence of gemfibrozil and thiazolidinedione bad drug partner msg")
	(message "Patient has active prescriptions of both gemfibrozil and thiazolidinedione, which are normally not prescribed together. Please evaluate.  We cannot make recommendations.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class850001]))

([ATHENA_GlycemicControl_Class850007] of  Conditional_On_Screen_Message

	(label "Presence of SGLT2 inhibitor and UGT2 inducer bad drug partner msg")
	(message "Patient is taking an SGLT2 inhibitor (canaglifozin or empaflifozin) and a UDG2 inducer which are contraindciated.  Please evaluate.  We cannot make reccomendations.")
	(message_type Primary_Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class850004]))

([ATHENA_GlycemicControl_Class850008] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class870004])
	(label "NOT bad drug partner DM")
	(operator NOT))

([ATHENA_GlycemicControl_Class850009] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class780508])
	(label "Presence of contraindication and no bad drug partner DM")
	(operator AND))

([ATHENA_GlycemicControl_Class850010] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Class850006]
		[ATHENA_GlycemicControl_Class850007])
	(label "dBad drug partner One DM drug")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class850011]))

([ATHENA_GlycemicControl_Class850011] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class850001]
		[ATHENA_GlycemicControl_Class850004])
	(label "Pres gem and thiazolidinedione OR SGLT2 inhib and UGT inducer")
	(operator OR))

([ATHENA_GlycemicControl_Class850012] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class540041])
	(%3ATO [ATHENA_GlycemicControl_Class850010]))

([ATHENA_GlycemicControl_Class850013] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class850011])
	(label "NOT pres gem and thiazolidine or SGLT2 and UGT")
	(operator NOT))

([ATHENA_GlycemicControl_Class850167] of  Parameterized_Message

	(label "Patient on bad drug partner")
	(message_type Primary_Recommendation)
	(parameterized_message [ATHENA_GlycemicControl_Class850168])
	(rule_in_condition [ATHENA_GlycemicControl_Class1030120]))

([ATHENA_GlycemicControl_Class850168] of  Parameterized_String

	(label "Param msg for bad drug partners (any meds)")
	(value "Patient is on ?bad_drug_partners that are usually not prescribed together.")
	(variables [ATHENA_GlycemicControl_Class850169]))

([ATHENA_GlycemicControl_Class850169] of  Variable

	(derivation_expression [ATHENA_GlycemicControl_Class870000])
	(label "?bad_drug_partners")
	(string_name "?bad_drug_partners"))

([ATHENA_GlycemicControl_Class850569] of  On_Screen_Message

	(label "Bad drug partner message")
	(message "Patient is taking two DM medications that would normally not be taken together.  Please evaluate.")
	(message_type Primary_Recommendation))

([ATHENA_GlycemicControl_Class850570] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class550006])
	(%3ATO [ATHENA_GlycemicControl_Class840138]))

([ATHENA_GlycemicControl_Class850704] of  Variable

	(derivation_expression [ATHENA_GlycemicControl_Class840132])
	(label "PatientChar bad drug partner involving glycemic control med")
	(string_name "?badPartnerGlycemicControlmed"))

([ATHENA_GlycemicControl_Class860000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class210014]
		[ATHENA_GlycemicControl_Class230038]
		[ATHENA_GlycemicControl_Class1000007])
	(label "NOT at target and no contra to insulin")
	(operator AND))

([ATHENA_GlycemicControl_Class870000] of  PAL_Query

	(case_variable "$patient_id")
	(key_slot [drug_name])
	(label "patient taking bad drug partner (based on any Drug Usage in project)")
	(PAL_query [ATHENA_GlycemicControl_Class870003]))

([ATHENA_GlycemicControl_Class870001] of  PAL-QUERY

	(%3APAL-NAME "Query for bad drug partner Meds (Glycemic Control-specific)")
	(%3APAL-RANGE "(defrange ?med1 :FRAME Medication)\n(defrange ?med2 :FRAME Medication)\n(defrange ?drugUsage :FRAME Drug_Usage)\n(defrange ?badPartner :FRAME Medications_Metaclass)")
	(%3APAL-STATEMENT "(findall ?med1 (and (is-class (drug_name ?med1))\n                    (exists ?med2 (and (is-class (drug_name ?med2))\n                                       (/=(drug_name ?med1)(drug_name ?med2))\n                                       		(exists ?drugUsage\n                                                 (and (drug_usages (coerce-to-instance \"ATHENA_GlycemicControl_Class130049\") ?drugUsage)\n                                                      (equal-or-subclass-of (Drug_Class_Name ?drugUsage) Blood_Glucose_Regulation_Agent)\n                                                      (exists ?badPartner (and (Drug_Partners_To_Avoid ?drugUsage ?badPartner)   \n                                                                               (or (and \n                                                                                        (equal-or-subclass-of (coerce-to-class (drug_name ?med1))(Drug_Class_Name ?drugUsage))\n                                                                                        (equal-or-subclass-of (coerce-to-class (drug_name ?med2)) ?badPartner))\n                                                                                   (and \n                                                                                        (equal-or-subclass-of (coerce-to-class (drug_name ?med2))(Drug_Class_Name ?drugUsage))\n                                                                                        (equal-or-subclass-of (coerce-to-class (drug_name ?med1)) ?badPartner))\n                                                                               ))))))\n                    )))"))

([ATHENA_GlycemicControl_Class870002] of  PAL_Query

	(case_variable "$patient_id")
	(key_slot [drug_name])
	(label "patient taking bad drug partner (involving a glycemic-control med)")
	(PAL_query [ATHENA_GlycemicControl_Class870001]))

([ATHENA_GlycemicControl_Class870003] of  PAL-QUERY

	(%3APAL-NAME "Query for bad drug partner (based on any Drug Usage in project)")
	(%3APAL-RANGE "(defrange ?med1 :FRAME Medication)\n(defrange ?med2 :FRAME Medication)\n(defrange ?drugUsage :FRAME Drug_Usage)\n(defrange ?badPartner :FRAME Medications_Metaclass Drug_Partners_To_Avoid)")
	(%3APAL-STATEMENT "(findall ?med1 (and (is-class (drug_name ?med1))\n                    (exists ?med2 (and (is-class (drug_name ?med2))\n                                       (/=(drug_name ?med1)(drug_name ?med2))\n                                       		(exists ?drugUsage\n                                                 (and \n                                                      (exists ?badPartner (and (Drug_Partners_To_Avoid ?drugUsage ?badPartner)   \n                                                                               (or (and \n                                                                                        (equal-or-subclass-of (coerce-to-class (drug_name ?med1))(Drug_Class_Name ?drugUsage))\n                                                                                        (equal-or-subclass-of (coerce-to-class (drug_name ?med2)) ?badPartner))\n                                                                                   (and \n                                                                                        (equal-or-subclass-of (coerce-to-class (drug_name ?med2))(Drug_Class_Name ?drugUsage))\n                                                                                        (equal-or-subclass-of (coerce-to-class (drug_name ?med1)) ?badPartner))\n                                                                               ))))))\n                    )))"))

([ATHENA_GlycemicControl_Class870004] of  PAL_Criterion

	(case_variable "$patient_id")
	(label "there exist bad drug partners involving glycemic control med")
	(PAL_constraint [ATHENA_GlycemicControl_Class870005]))

([ATHENA_GlycemicControl_Class870005] of  %3APAL-CONSTRAINT

	(%3APAL-NAME "there exists bad drug partner involving glycemic control med")
	(%3APAL-RANGE "(defrange ?med1 :FRAME Medication)\n(defrange ?med2 :FRAME Medication)\n(defrange ?drugUsage :FRAME Drug_Usage)\n(defrange ?badPartner :FRAME Medications_Metaclass Drug_Partners_To_Avoid)")
	(%3APAL-STATEMENT "(exists ?med1 (and (is-class (drug_name ?med1))\n                   (exists ?med2 (and (is-class (drug_name ?med2))\n                                      (/=(drug_name ?med1)(drug_name ?med2))\n                                      (exists ?drugUsage\n                                              (and (drug_usages (coerce-to-instance \"ATHENA_GlycemicControl_Class130049\") ?drugUsage)\n                                                   (equal-or-subclass-of (Drug_Class_Name ?drugUsage) Blood_Glucose_Regulation_Agent)\n                                                   (exists ?badPartner (and (Drug_Partners_To_Avoid ?drugUsage ?badPartner)   \n                                                                            (or (and \n                                                                                     (equal-or-subclass-of (coerce-to-class (drug_name ?med1))(Drug_Class_Name ?drugUsage))\n                                                                                     (equal-or-subclass-of (coerce-to-class (drug_name ?med2)) ?badPartner))\n                                                                                (and \n                                                                                     (equal-or-subclass-of (coerce-to-class (drug_name ?med2))(Drug_Class_Name ?drugUsage))\n                                                                                     (equal-or-subclass-of (coerce-to-class (drug_name ?med1)) ?badPartner))\n                                                                            ))))))\n                   )))"))

([ATHENA_GlycemicControl_Class870006] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Class870004])
	(label "NOT there exists bad drug partners Meds")
	(operator NOT))

([ATHENA_GlycemicControl_Class880000] of  Structured_Query

	(label "query for glipizide dialy dose > 40.2")
	(type Medication)
	(where_restriction
		[ATHENA_GlycemicControl_Class880001]
		[ATHENA_GlycemicControl_Class880002]))

([ATHENA_GlycemicControl_Class880001] of  Comparison_Filter

	(attribute [drug_name])
	(label "drug eq glipizide")
	(operator eq)
	(value_expression [GLIPIZIDE]))

([ATHENA_GlycemicControl_Class880002] of  Comparison_Filter

	(attribute [daily_dose])
	(label "daily dose >=40.2")
	(operator %3E)
	(value_expression [ATHENA_GlycemicControl_Class880003]))

([ATHENA_GlycemicControl_Class880003] of  Numeric_Constant

	(label "40.2")
	(value 40.2))

([ATHENA_GlycemicControl_Class880004] of  Query_Result_Criterion

	(label "query glipizide dose > 40.2")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class880000]))

([ATHENA_GlycemicControl_Class880005] of  Variable

	(derivation_expression [ATHENA_GlycemicControl_Class880004])
	(label "PatientChar daily dose glip > 40.2")
	(string_name "DailyDoseGlipGT40"))

([ATHENA_GlycemicControl_Class890000] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class210036])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class890933] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class540041])
	(%3ATO [ATHENA_GlycemicControl_Class840138]))

([ATHENA_GlycemicControl_Class9] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Instance_50008]
		[ATHENA_GlycemicControl_Class150002]
		[ATHENA_GlycemicControl_Class150004]
		[ATHENA_GlycemicControl_Class150015])
	(label "DM -  Insulin only"))

([ATHENA_GlycemicControl_Class90000] of  PAL_Criterion

	(case_variable "$patient_id")
	(label "Glipizide contraindicated")
	(PAL_constraint [ATHENA_GlycemicControl_Class100001]))

([ATHENA_GlycemicControl_Class900000] of  Collateral_Action

	(actions
		[ATHENA_GlycemicControl_Class1010002]
		[ATHENA_GlycemicControl_Class950001])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class900001] of  Conditional_On_Screen_Message

	(collateral_actions [ATHENA_GlycemicControl_Class990001])
	(label "Conditional: Missing eGFR/creatinine, cannot add glyburide")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class600000]))

([ATHENA_GlycemicControl_Class90003] of  Start_Activity

	(activity [ATHENA_GlycemicControl_Class70000])
	(description "Add Glyburide")
	(label "Add Glyburide"))

([ATHENA_GlycemicControl_Class90005] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class90006]
		[ATHENA_GlycemicControl_Class90008])
	(label "Glyburide not contrainidcated and not a bad drug partner")
	(operator AND))

([ATHENA_GlycemicControl_Class90006] of  PAL_Criterion

	(case_variable "$patient_id")
	(label "Glyburide contraindicated")
	(PAL_constraint [ATHENA_GlycemicControl_Class90007]))

([ATHENA_GlycemicControl_Class90007] of  %3APAL-CONSTRAINT

	(%3APAL-NAME "Glyburide contraindicated")
	(%3APAL-RANGE "(defrange ?condition :FRAME Note_Entry)\n(defrange ?problem :FRAME Medical_Conditions_Metaclass)\n(defrange ?derived_problem :FRAME Diagnostic_Term_Metaclass)\n(defrange ?drug_usage :FRAME Drug_Usage)")
	(%3APAL-STATEMENT "(forall ?drug_usage\n        (=> (Drug_Class_Name ?drug_usage GLYBURIDE)\n            (or  (exists ?condition \n                         (and (patient_id ?condition $patient_id)\n                              (exists ?problem \n                                      (and (Absolute_Contraindications ?drug_usage ?problem)\n                                           (isa-classname (domain_term ?condition))\n                                           (or (= (coerce-to-class (domain_term ?condition)) ?problem )\n                                               (subclass-of (coerce-to-class (domain_term ?condition)) ?problem )) \n                                      ))))\n                 (exists  ?derived_problem \n                          (and (Absolute_Contraindications ?drug_usage ?derived_problem)\n                               (is-derivable ?derived_problem))))\n        )\n)"))

([ATHENA_GlycemicControl_Class90008] of  PAL_Criterion

	(case_variable "$patient_id")
	(label "Glyburide not bad drug partner")
	(PAL_constraint [ATHENA_GlycemicControl_Class90009]))

([ATHENA_GlycemicControl_Class90009] of  %3APAL-CONSTRAINT

	(%3APAL-NAME "No bad drug partner Glyburide")
	(%3APAL-RANGE "(defrange ?med :FRAME Medication)\n(defrange ?drug_usage :FRAME Drug_Usage)\n(defrange ?drug_class :FRAME Medications_Metaclass)\n(defrange ?drug :FRAME Medications_Metaclass)")
	(%3APAL-STATEMENT "(forall ?drug_usage \n        (=> (Drug_Class_Name ?drug_usage (coerce-to-class \"GLYBURIDE\"))\n            (not (exists ?med \n                         (and            (is-class (drug_name ?med))\n                         (or (exists ?drug_class \n                                     (and (Drug_Partners_To_Avoid ?drug_usage ?drug_class)\n                                          (equal-or-subclass-of (coerce-to-class (drug_name ?med)) ?drug_class)))\n                             (exists ?drug \n                                     (and (Drug_Partners_To_Avoid ?drug_usage ?drug)\n                          \n                                          (equal-or-subclass-of (coerce-to-class (drug_name ?med)) ?drug))))))\n            )\n        ))"))

([ATHENA_GlycemicControl_Class90011] of  Followed_By

	(%3ATO [ATHENA_GlycemicControl_Class39]))

([ATHENA_GlycemicControl_Class900178] of  Action_Choice

	(label "Msg/follow up/referal after 1st line therapy blocked")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class800007]))

([ATHENA_GlycemicControl_Class90019] of  Presence_Criterion

	(domain_term BIGUANIDE)
	(entry_type Medication)
	(label "Using metformin")
	(mood Authorized)
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class90020] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class90021]
		[ATHENA_GlycemicControl_Class90024])
	(label "No contraindications nor bad drug partner to biguanide")
	(operator AND))

([ATHENA_GlycemicControl_Class90021] of  PAL_Criterion

	(case_variable "$patient_id")
	(label "contraindications to Biguanide")
	(PAL_constraint [ATHENA_GlycemicControl_Class90023]))

([ATHENA_GlycemicControl_Class90023] of  %3APAL-CONSTRAINT

	(%3APAL-NAME "contraindications to Biguanide")
	(%3APAL-RANGE "(defrange ?condition :FRAME Note_Entry)\n(defrange ?problem :FRAME Medical_Conditions_Metaclass)\n(defrange ?derived_problem :FRAME Diagnostic_Term_Metaclass)\n(defrange ?drug_usage :FRAME Drug_Usage)")
	(%3APAL-STATEMENT "(forall ?drug_usage\n        (=> (Drug_Class_Name ?drug_usage BIGUANIDE)\n            (or  (exists ?condition \n                              (and (patient_id ?condition $patient_id)\n                                   (exists ?problem \n                                           (and (Absolute_Contraindications ?drug_usage ?problem)\n                                                (isa-classname (domain_term ?condition))\n                                                (or (= (coerce-to-class (domain_term ?condition)) ?problem )\n                                                    (subclass-of (coerce-to-class (domain_term ?condition)) ?problem )) \n                                           ))))\n                 (exists  ?derived_problem \n                               (and (Absolute_Contraindications ?drug_usage ?derived_problem)\n                                    (is-derivable ?derived_problem))))\n            )\n)"))

([ATHENA_GlycemicControl_Class90024] of  PAL_Criterion

	(case_variable "$patient_id")
	(label "No bad drug partner Biguanide")
	(PAL_constraint [ATHENA_GlycemicControl_Class90025]))

([ATHENA_GlycemicControl_Class90025] of  %3APAL-CONSTRAINT

	(%3APAL-NAME "Biguanide no bad drug partner")
	(%3APAL-RANGE "(defrange ?med :FRAME Medication)\n(defrange ?drug_usage :FRAME Drug_Usage)\n(defrange ?drug_class :FRAME Medications_Metaclass)\n(defrange ?drug :FRAME Medications_Metaclass)")
	(%3APAL-STATEMENT "(forall ?drug_usage \n        (=> (Drug_Class_Name ?drug_usage (coerce-to-class \"GLYBURIDE\"))\n            (not (exists ?med \n                         (and            (is-class (drug_name ?med))\n                         (or (exists ?drug_class \n                                     (and (Drug_Partners_To_Avoid ?drug_usage ?drug_class)\n                                          (equal-or-subclass-of (coerce-to-class (drug_name ?med)) ?drug_class)))\n                             (exists ?drug \n                                     (and (Drug_Partners_To_Avoid ?drug_usage ?drug)\n                          \n                                          (equal-or-subclass-of (coerce-to-class (drug_name ?med)) ?drug)))))\n            ))\n        ))"))

([ATHENA_GlycemicControl_Class90030] of  Presence_Criterion

	(domain_term SULFONYLUREAS)
	(entry_type Medication)
	(label "absence of sulfonylurea")
	(mood Authorized)
	(presence TRUE)
	(status "active"))

([ATHENA_GlycemicControl_Class90032] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class80026]
		[ATHENA_GlycemicControl_Class90033])
	(label "Age>=65 and creatinine>=2")
	(operator AND))

([ATHENA_GlycemicControl_Class90033] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "creatinine>=2")
	(numeric_domain_term Creatinine)
	(operator %3E%3D)
	(valid_window [time%3AINSTANCE_2])
	(value 2.0))

([ATHENA_GlycemicControl_Class90036] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class80000])
	(label "Add metformin")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Instance_130679])
	(strict_rule_out_condition [ATHENA_GlycemicControl_Class120321]))

([ATHENA_GlycemicControl_Class90045] of  Supporting_Material

	(abstract "Table Evaluate HBA1C target")
	(label "Table Evaluate HBA1C target")
	(role evidence)
	(URL "\\\\vhapalathenaot\\Diabetes_Grant\\domain_model\\Evaluate_HBA1Ctarget.jpg"))

([ATHENA_GlycemicControl_Class90046] of  Collateral_Action

	(actions
		[ATHENA_GlycemicControl_Class90047]
		[ATHENA_GlycemicControl_Class90048])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class90047] of  On_Screen_Message

	(label "Reasons to not use TZDs")
	(message "Thiazolidinediones are less effective in lowering HbA1C, have a higher cost, and are non formulary.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class90048] of  On_Screen_Message

	(label "Warning about liver enzymes check in 1st year")
	(message "Check liver enzymes every 2-3 months during first year of thiazolidinedione therapy to evaluate for potential hepatitis.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class90049] of  Collateral_Action

	(actions
		[ATHENA_GlycemicControl_Class90050]
		[ATHENA_GlycemicControl_Class220000]
		[ATHENA_GlycemicControl_Class220001])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class90050] of  On_Screen_Message

	(display_location Summary)
	(label "Cons of starting insulin")
	(message "Staring insulin therapy requires closer monitoring by patient and clinician, has a higher risk of hypoglycemic events and requires injections.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class90051] of  Drug_Usage

	(Absolute_Contraindications
		CCS-9.8.2.1
		cirrhosis
		Crohns_disease
		Ulcerative_enterocolitis)
	(collateral_actions
		[ATHENA_GlycemicControl_Class90056]
		[ATHENA_GlycemicControl_Class210051]
		[ATHENA_GlycemicControl_Class490000]
		[ATHENA_GlycemicControl_Class600003])
	(Do_Not_Intensify_Conditions Absence+of+eGFR+in+past+year)
	(Do_Not_Start_Conditions Absence+of+eGFR+in+past+month)
	(Drug_Class_Name ALPHA-GLUCOSIDASE_INHIBITORS)
	(formulary_preferred_drug_in_class [ATHENA_GlycemicControl_Instance_80007])
	(label "ALPHA-GLUCOSIDASE INHIBITORS")
	(Relative_Contraindications eGFR+%3C+30)
	(Relative_Indications DM-Type2))

([ATHENA_GlycemicControl_Class90053] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class90054]
		[ATHENA_GlycemicControl_Class90055])
	(label "Presence of cirrhosis")
	(operator OR))

([ATHENA_GlycemicControl_Class90054] of  Presence_Criterion

	(domain_term cirrhosis)
	(entry_type Note_Entry)
	(label "presence of cirrhosis (not HCUP)")
	(presence TRUE))

([ATHENA_GlycemicControl_Class90055] of  Presence_Criterion

	(domain_term CCS-9.8.2.1)
	(entry_type Note_Entry)
	(label "presence of cirrhosis without mention of alcohol (HCUP)")
	(presence TRUE))

([ATHENA_GlycemicControl_Class90056] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class90057])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Class90057] of  On_Screen_Message

	(display_location Summary)
	(label "liver enzyme check")
	(message "Monitor serum levels of AST/ALT every 3 months during first year of therapy, specially if dose >50mg TID.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Class90131] of  Structured_Query

	(label "Sex = Male")
	(type Note_Entry)
	(where_restriction
		[ATHENA_GlycemicControl_Class90132]
		[ATHENA_GlycemicControl_Class90134]))

([ATHENA_GlycemicControl_Class90132] of  Comparison_Filter

	(attribute [domain_term])
	(label "attribute is Sex")
	(operator eq)
	(value_expression [ATHENA_GlycemicControl_Class90133]))

([ATHENA_GlycemicControl_Class90133] of  Qualitative_Constant

	(value "Sex"))

([ATHENA_GlycemicControl_Class90134] of  Comparison_Filter

	(attribute [value])
	(label "value is Male")
	(operator eq)
	(value_expression [ATHENA_CKD_Instance_70006]))

([ATHENA_GlycemicControl_Class90199] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class80003])
	(%3ATO [ATHENA_GlycemicControl_Class80004]))

([ATHENA_GlycemicControl_Class920000] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class1300425])
	(label "Check daily dose > max recommended dose")
	(rule_in [criterion_INSTANCE_00001]))

([ATHENA_GlycemicControl_Class930000] of  Conditional_On_Screen_Message

	(label "Follow up in 3 months if rec add 2nd line oral hypoglycemic agent")
	(message "Follow up in 3 months")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class940001]))

([ATHENA_GlycemicControl_Class930001] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class1300425])
	(label "Dose > max recommended dose check")
	(rule_in [ATHENA_GlycemicControl_Class1300423]))

([ATHENA_GlycemicControl_Class930002] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class930001]))

([ATHENA_GlycemicControl_Class930003] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class250002])
	(%3ATO [ATHENA_GlycemicControl_Class920000]))

([ATHENA_GlycemicControl_Class930004] of  Consultation_Guideline

	(first_step [ATHENA_GlycemicControl_Class930005])
	(label "check dose > max recommended dose")
	(steps
		[ATHENA_GlycemicControl_Class930005]
		[ATHENA_GlycemicControl_Class930006]
		[ATHENA_GlycemicControl_Class1000002]
		[ATHENA_GlycemicControl_Class1312626])
	(transitions
		[ATHENA_GlycemicControl_Class930007]
		[ATHENA_GlycemicControl_Class1000004]
		[ATHENA_DM_GlycemicControl_Dashboard_Class40000]))

([ATHENA_GlycemicControl_Class930005] of  Consultation_Branch_Step

	(branches
		[ATHENA_GlycemicControl_Class930006]
		[ATHENA_GlycemicControl_Class1000002]
		[ATHENA_GlycemicControl_Class1312626])
	(label "start")
	(selection_method all_of))

([ATHENA_GlycemicControl_Class930006] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class1300425])
	(label "Check dose > max recommended dose")
	(rule_in [criterion_INSTANCE_00001]))

([ATHENA_GlycemicControl_Class930007] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class930005])
	(%3ATO [ATHENA_GlycemicControl_Class930006]))

([ATHENA_GlycemicControl_Class940000] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class950001])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Class940001] of  Presence_Criterion

	(domain_term Oral_Hypoglycemic_Agent)
	(entry_type Medication)
	(label "Presence of 2nd line oral hypoglycemic agent rec_add")
	(mood Recommend_Add)
	(presence TRUE)
	(status "active")
	(%3ADOCUMENTATION "This presence criterion should be used only when adding 2nd line oral hypoglycemic agent"))

([ATHENA_GlycemicControl_Class940591] of  Choice_Step

	(branches [ATHENA_GlycemicControl_Class800010])
	(label "System recommends adding a 2nd line med"))

([ATHENA_GlycemicControl_Class940593] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class940591])
	(%3ATO [ATHENA_GlycemicControl_Class800010]))

([ATHENA_GlycemicControl_Class950000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class120322]
		[ATHENA_GlycemicControl_Class80023])
	(label "Pres Biguanide and eGFR<30 past year")
	(operator AND))

([ATHENA_GlycemicControl_Class950001] of  Parameterized_Message

	(label "Conditional: Old creatinine, cannot add glyburide")
	(message_type Primary_Recommendation)
	(parameterized_message [ATHENA_GlycemicControl_Class980001])
	(rule_in_condition [ATHENA_GlycemicControl_Class1010736]))

([ATHENA_GlycemicControl_Class960000] of  Parameterized_Message

	(label "Parameterized: Missing creatinine in last month for adding glyburide")
	(message_type Primary_Recommendation)
	(parameterized_message [ATHENA_GlycemicControl_Class980001])
	(rule_in_condition [ATHENA_GlycemicControl_Class150035]))

([ATHENA_GlycemicControl_Class960001] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class230008])
	(%3ATO [ATHENA_GlycemicControl_Class550008]))

([ATHENA_GlycemicControl_Class960002] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class230008])
	(%3ATO [ATHENA_GlycemicControl_Class550008]))

([ATHENA_GlycemicControl_Class960003] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class230008])
	(%3ATO [ATHENA_GlycemicControl_Class550008]))

([ATHENA_GlycemicControl_Class960004] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class720169])
	(%3ATO [ATHENA_GlycemicControl_Class720168]))

([ATHENA_GlycemicControl_Class960005] of  Presence_Criterion

	(domain_term BIGUANIDE)
	(entry_type Medication)
	(label "Absence of Biguanide add rec")
	(mood Recommend_Add)
	(presence FALSE))

([ATHENA_GlycemicControl_Class970000] of  Variable

	(derivation_expression [ATHENA_GlycemicControl_Class20002])
	(label "PatientChar PAL query for drugs not at max dose")
	(string_name "?meds"))

([ATHENA_GlycemicControl_Class980000] of  Consultation_Selection

	(%3AFROM [ATHENA_GlycemicControl_Class790002])
	(%3ATO [ATHENA_GlycemicControl_Class1000002]))

([ATHENA_GlycemicControl_Class980001] of  Parameterized_String

	(label "Add recommendation blocked for old creatinine")
	(multivalued_variables [ATHENA_GlycemicControl_Class980003])
	(value "Glyburide could not be recommended because the patient's creatinine is older than one month: Last creatinine: ?value (?date)"))

([ATHENA_GlycemicControl_Class980003] of  Variable_ValueSet

	(derivation_expression [ATHENA_GlycemicControl_Class980006])
	(label "Query for most recent creatinine value and date")
	(property_values_to_get
		[ATHENA_GlycemicControl_Class980004]
		[ATHENA_GlycemicControl_Class980005]))

([ATHENA_GlycemicControl_Class980004] of  Property_Value

	(slot [value])
	(string_name "?value"))

([ATHENA_GlycemicControl_Class980005] of  Property_Value

	(slot [valid_time])
	(string_name "?date"))

([ATHENA_GlycemicControl_Class980006] of  Structured_Query

	(aggregation_operator most_recent)
	(label "Most recent creatinine")
	(type Numeric_Entry)
	(where_restriction [ATHENA_GlycemicControl_Class980007]))

([ATHENA_GlycemicControl_Class980007] of  Comparison_Filter

	(attribute [domain_term])
	(label "Creatinine")
	(operator eq)
	(value_expression [ATHENA_GlycemicControl_Class980008]))

([ATHENA_GlycemicControl_Class980008] of  Qualitative_Constant

	(label "Creatinine")
	(value "Creatinine"))

([ATHENA_GlycemicControl_Class980014] of  Parameterized_Message

	(label "Conditional: Old GFR for add metformin")
	(message_type Primary_Recommendation)
	(parameterized_message [ATHENA_GlycemicControl_Class980015])
	(rule_in_condition [ATHENA_GlycemicControl_Class1400001]))

([ATHENA_GlycemicControl_Class980015] of  Parameterized_String

	(label "Metformin missing GFR in last month: value/date")
	(multivalued_variables [ATHENA_GlycemicControl_Class980016])
	(value "We normally consider recomending Metformin, but cannot do so because there is no eGFR measurement in the last 30 days. Last eGFR: ?value (?date)"))

([ATHENA_GlycemicControl_Class980016] of  Variable_ValueSet

	(derivation_expression [ATHENA_GlycemicControl_Class980018])
	(label "Metformin GFR value/date")
	(property_values_to_get
		[ATHENA_GlycemicControl_Class980017]
		[ATHENA_GlycemicControl_Class980005]))

([ATHENA_GlycemicControl_Class980017] of  Property_Value

	(slot [value])
	(string_name "?value"))

([ATHENA_GlycemicControl_Class980018] of  Structured_Query

	(aggregation_operator most_recent)
	(label "eGFR structured query")
	(type Numeric_Entry)
	(where_restriction [ATHENA_GlycemicControl_Class980019]))

([ATHENA_GlycemicControl_Class980019] of  Comparison_Filter

	(attribute [domain_term])
	(label "eGFR  comparison filter")
	(operator eq)
	(value_expression [ATHENA_GlycemicControl_Class580017]))

([ATHENA_GlycemicControl_Class990000] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Class1060004]
		[ATHENA_GlycemicControl_Class1220005]
		[ATHENA_GlycemicControl_Class1220010]
		[ATHENA_GlycemicControl_Class1220012]
		[ATHENA_GlycemicControl_Class1220014]
		[ATHENA_DM_GlycemicControl_Dashboard_Class20594]
		[ATHENA_GlycemicControl_Class850001])
	(label "Presence of bad drug partners DM Meds")
	(operator OR))

([ATHENA_GlycemicControl_Class990001] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Class960000])
	(mood Blocked_Add))

([ATHENA_GlycemicControl_Instance_0] of  Management_Guideline

	(authors "Mary Goldstein")
	(clinical_algorithm [ATHENA_GlycemicControl_Instance_1])
	(eligibility_criteria [ATHENA_GlycemicControl_Class100000])
	(goal
		[KB_273522_Class0]
		[ATHENA_GlycemicControl_Class180050])
	(label "ATHENA DM: Glycemic Control")
	(patient_characterization
		[BMI%3E25]
		[BMI%3E%3D29]
		[Creatinine+%3E+1.5+and+Male])
	(title "ATHENA DM: Glycemic Control")
	(version "1.0"))

([ATHENA_GlycemicControl_Instance_1] of  Management_Diagram

	(label "Glycemic Control")
	(steps
		[ATHENA_GlycemicControl_Instance_10018]
		[ATHENA_GlycemicControl_Instance_10030]
		[ATHENA_GlycemicControl_Class0]
		[ATHENA_GlycemicControl_Class1]
		[ATHENA_GlycemicControl_Class2]
		[ATHENA_GlycemicControl_Class3]
		[ATHENA_GlycemicControl_Class4]
		[ATHENA_GlycemicControl_Class5]
		[ATHENA_GlycemicControl_Class7]
		[ATHENA_GlycemicControl_Class8]
		[ATHENA_GlycemicControl_Class9]
		[ATHENA_GlycemicControl_Class21]
		[ATHENA_GlycemicControl_Class22]
		[ATHENA_GlycemicControl_Class39]
		[ATHENA_GlycemicControl_Class42]
		[ATHENA_GlycemicControl_Instance_50008]
		[ATHENA_GlycemicControl_Instance_70010]
		[ATHENA_GlycemicControl_Instance_130309]
		[ATHENA_GlycemicControl_Instance_130311]
		[ATHENA_GlycemicControl_Instance_130784]
		[ATHENA_GlycemicControl_Class90036]
		[ATHENA_GlycemicControl_Class100006]
		[ATHENA_GlycemicControl_Class120002])
	(transitions
		[ATHENA_GlycemicControl_Class14]
		[ATHENA_GlycemicControl_Class40]
		[ATHENA_GlycemicControl_Class41]
		[ATHENA_GlycemicControl_Class43]
		[ATHENA_GlycemicControl_Instance_50018]
		[ATHENA_GlycemicControl_Instance_50020]
		[ATHENA_GlycemicControl_Instance_50022]
		[ATHENA_GlycemicControl_Instance_70022]
		[ATHENA_GlycemicControl_Instance_70023]
		[ATHENA_GlycemicControl_Instance_70026]
		[ATHENA_GlycemicControl_Instance_70027]
		[ATHENA_GlycemicControl_Instance_70029]
		[KB_794798_Class4]
		[KB_794798_Class5]
		[KB_794798_Class6]
		[ATHENA_GlycemicControl_Instance_130312]
		[ATHENA_GlycemicControl_Instance_130315]
		[ATHENA_GlycemicControl_Instance_130316]
		[ATHENA_GlycemicControl_Instance_130785]
		[ATHENA_GlycemicControl_Instance_120088]
		[ATHENA_GlycemicControl_Class110004]
		[ATHENA_GlycemicControl_Class110005]
		[ATHENA_GlycemicControl_Class120007]
		[ATHENA_GlycemicControl_Class120319]
		[ATHENA_GlycemicControl_Class120325]
		[ATHENA_GlycemicControl_Class120326]
		[ATHENA_GlycemicControl_Class120327]
		[ATHENA_GlycemicControl_Class120328]
		[ATHENA_GlycemicControl_Class120329]
		[ATHENA_GlycemicControl_Class120330]
		[ATHENA_GlycemicControl_Class130196]
		[ATHENA_GlycemicControl_Class130197]
		[ATHENA_GlycemicControl_Class130198]
		[ATHENA_GlycemicControl_Class130199]
		[ATHENA_GlycemicControl_Class140315]))

([ATHENA_GlycemicControl_Instance_10000] of  General_Comparison_Criterion

	(aggregation_operator most_recent)
	(domain_term Sex)
	(entry_type Note_Entry)
	(label "Being Female")
	(operator eq)
	(value [Female]))

([ATHENA_GlycemicControl_Instance_100000] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 75.0)
	(upper_limit 299.9))

([ATHENA_GlycemicControl_Instance_100001] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 750.0)
	(upper_limit 1000.0))

([ATHENA_GlycemicControl_Instance_100002] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 1000.0)
	(upper_limit 2000.0))

([ATHENA_GlycemicControl_Instance_100003] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 2000.1)
	(upper_limit 3000.0))

([ATHENA_GlycemicControl_Instance_100004] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 250.0)
	(upper_limit 999.9))

([ATHENA_GlycemicControl_Instance_100005] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 1000.0)
	(upper_limit 1500.0))

([ATHENA_GlycemicControl_Instance_100006] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 2.5)
	(upper_limit 39.9))

([ATHENA_GlycemicControl_Instance_100007] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 40.0)
	(upper_limit 40.2))

([ATHENA_GlycemicControl_Instance_100008] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 1.25)
	(upper_limit 19.9))

([ATHENA_GlycemicControl_Instance_100009] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 20.0)
	(upper_limit 20.2))

([ATHENA_GlycemicControl_Instance_10001] of  Presence_Criterion

	(domain_term HbA1C)
	(entry_type Numeric_Entry)
	(label "Presence of HbA1c in past 3 months")
	(period [ATHENA_GlycemicControl_Instance_10003])
	(presence TRUE)
	(%3ADOCUMENTATION "5/21/13 changed note_entry to numeric_entry"))

([ATHENA_GlycemicControl_Instance_100010] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 1.0)
	(upper_limit 7.9))

([ATHENA_GlycemicControl_Instance_100011] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 8.0)
	(upper_limit 8.2))

([ATHENA_GlycemicControl_Instance_100012] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 75.0)
	(upper_limit 149.9))

([ATHENA_GlycemicControl_Instance_100013] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 150.0)
	(upper_limit 150.2))

([ATHENA_GlycemicControl_Instance_10002] of  Presence_Criterion

	(domain_term HbA1C)
	(entry_type Numeric_Entry)
	(label "Presence of HbA1c")
	(presence TRUE))

([ATHENA_GlycemicControl_Instance_10003] of  Relative_Time_Interval_Definite

	(how_many "3")
	(label "3 months before today")
	(polarity Before)
	(relative_time_point [time%3AINSTANCE_1])
	(time_unit month))

([ATHENA_GlycemicControl_Instance_100038] of  Comparison_Filter

	(attribute [domain_term])
	(label "domain term is HbA1C")
	(operator eq)
	(value_expression [ATHENA_GlycemicControl_Instance_100039]))

([ATHENA_GlycemicControl_Instance_100039] of  Qualitative_Constant

	(value "HbA1c"))

([ATHENA_GlycemicControl_Instance_10004] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "HbA1c <= 7%")
	(numeric_domain_term HbA1C)
	(operator %3C%3D)
	(unit "%")
	(value 7.0))

([ATHENA_GlycemicControl_Instance_10005] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "HbA1c > 9%")
	(numeric_domain_term HbA1C)
	(operator %3E)
	(unit "%")
	(value 9.0)
	(%3ADOCUMENTATION "3/26/13 change <= op to >; aggreg op now most_recent\n5/21/13 changed note_entry to numeric_entry"))

([ATHENA_GlycemicControl_Instance_10006] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "HbA1c <= 9%")
	(numeric_domain_term HbA1C)
	(operator %3C%3D)
	(unit "%")
	(valid_window [library_Class60017])
	(value 9.0))

([ATHENA_GlycemicControl_Instance_10007] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "HbA1c <= 8%")
	(numeric_domain_term HbA1C)
	(operator %3C%3D)
	(unit "%")
	(value 8.0))

([ATHENA_GlycemicControl_Instance_100070] of  Numeric_Term_Criterion

	(aggregation_operator count)
	(entry_type Medication)
	(label "Taking >1 oral agents")
	(mood Authorized)
	(numeric_domain_term Oral_Hypoglycemic_Agent)
	(operator %3E)
	(status "active")
	(value 1.0))

([ATHENA_GlycemicControl_Instance_10012] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Instance_10006])
	(label "NOT HbA1c <= 9%")
	(operator NOT))

([ATHENA_GlycemicControl_Instance_10013] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Instance_10007])
	(label "NOT HbA1c <= 8%")
	(operator NOT))

([ATHENA_GlycemicControl_Instance_10014] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Instance_10004])
	(label "NOT HbA1c <= 7%")
	(operator NOT))

([ATHENA_GlycemicControl_Instance_10016] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_10014]
		[ATHENA_GlycemicControl_Instance_10007])
	(label "7 <= HbA1c <=8")
	(operator AND))

([ATHENA_GlycemicControl_Instance_10017] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_10013]
		[ATHENA_GlycemicControl_Instance_10006])
	(label "8 <= HbA1c <=9")
	(operator AND))

([ATHENA_GlycemicControl_Instance_10018] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Instance_50000])
	(label "Order HbA1c")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Instance_10021]))

([ATHENA_GlycemicControl_Instance_10019] of  Presence_Criterion

	(domain_term HbA1C)
	(entry_type Numeric_Entry)
	(label "Absence of HbA1c lab value")
	(presence FALSE))

([ATHENA_GlycemicControl_Instance_10020] of  Presence_Criterion

	(domain_term HbA1C)
	(entry_type Numeric_Entry)
	(label "Absence of HbA1c lab value in past year")
	(period [ATHENA_DM_Eye_Instance_30019])
	(presence FALSE)
	(%3ADOCUMENTATION "5/21/13 changed from note_entry to numeric_entry"))

([ATHENA_GlycemicControl_Instance_10021] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_10019]
		[ATHENA_GlycemicControl_Instance_10020]
		[ATHENA_GlycemicControl_Instance_20000])
	(label "No HbA1c ever or in past year")
	(operator OR))

([ATHENA_GlycemicControl_Instance_10022] of  Schedule

	(description "Order HbA1C lab")
	(label "Order HbA1C lab")
	(when [ATHENA_DM_Eye_Instance_100018])
	(who_with primary+care+provider))

([ATHENA_GlycemicControl_Instance_10027] of  Quantitative_Data

	(sensitive FALSE))

([ATHENA_GlycemicControl_Instance_10028] of  Data_Entry_Template

	(data_to_collect
		[ATHENA_GlycemicControl_Instance_50030]
		[ATHENA_GlycemicControl_Instance_50031]
		[ATHENA_GlycemicControl_Instance_50032]
		[ATHENA_GlycemicControl_Instance_50033]
		[ATHENA_GlycemicControl_Instance_50034]
		[ATHENA_GlycemicControl_Instance_60012])
	(label "Evaluate for high risk"))

([ATHENA_GlycemicControl_Instance_10029] of  Qualitative_Data

	(allowed_terms
		"7%"
		"8%"
		"9%")
	(choice_type one_of)
	(description "Determine the recommended target based on the patient's absolute risk for developing microvascular complications.")
	(domain_term target_HBA1c)
	(label "clinician enter goal for HbA1C")
	(prompt "Enter goal for HbA1C (7, 8, or 9%):")
	(sensitive TRUE))

([ATHENA_GlycemicControl_Instance_10030] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Instance_50012])
	(label "Determine goal")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Instance_10032]))

([ATHENA_GlycemicControl_Instance_10032] of  Presence_Criterion

	(domain_term target_HBA1c)
	(entry_type Numeric_Entry)
	(label "Absence Target HBA1c")
	(presence FALSE))

([ATHENA_GlycemicControl_Instance_10034] of  Goal_Criterion

	(guideline_entity [ATHENA_GlycemicControl_Instance_0])
	(label "Goal satisfied"))

([ATHENA_GlycemicControl_Instance_10036] of  Goal

	(conditional_goals [ATHENA_GlycemicControl_Instance_10037])
	(label "Renal Protection"))

([ATHENA_GlycemicControl_Instance_10037] of  Conditional_Goal

	(criterion_to_achieve [ATHENA_GlycemicControl_Class640230])
	(label "Presence of ACE-I or ARB")
	(selection_criterion [ATHENA_GlycemicControl_Class250014]))

([ATHENA_GlycemicControl_Instance_110000] of  Presence_Criterion

	(domain_term CCS-7.2.11.1)
	(entry_type Note_Entry)
	(label "Congestive heart failure")
	(period [ATHENA_DM_Eye_Instance_30013])
	(presence TRUE))

([ATHENA_GlycemicControl_Instance_110001] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 300.0)
	(upper_limit 300.2))

([ATHENA_GlycemicControl_Instance_110002] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 500.0)
	(upper_limit 1999.0))

([ATHENA_GlycemicControl_Instance_110003] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 2000.0)
	(upper_limit 2000.2))

([ATHENA_GlycemicControl_Instance_110004] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 4.0)
	(upper_limit 7.9))

([ATHENA_GlycemicControl_Instance_110005] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 8.0)
	(upper_limit 8.2))

([ATHENA_GlycemicControl_Instance_110006] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 45.0)
	(upper_limit 45.2))

([ATHENA_GlycemicControl_Instance_110007] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 15.0)
	(upper_limit 44.0))

([ATHENA_GlycemicControl_Instance_110008] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 1.5)
	(upper_limit 15.9))

([ATHENA_GlycemicControl_Instance_110009] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 16.0)
	(upper_limit 16.2))

([ATHENA_GlycemicControl_Instance_110010] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 180.0)
	(upper_limit 359.9))

([ATHENA_GlycemicControl_Instance_110011] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 360.0)
	(upper_limit 360.2))

([ATHENA_GlycemicControl_Instance_110012] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 25.0)
	(upper_limit 99.9))

([ATHENA_GlycemicControl_Instance_110013] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 100.0)
	(upper_limit 100.2))

([ATHENA_GlycemicControl_Instance_110074] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_10019]
		[ATHENA_GlycemicControl_Instance_10032])
	(label "absence of HbA1c or its target")
	(operator OR))

([ATHENA_GlycemicControl_Instance_110113] of  N_ary_Criterion

	(criteria
		[KB_362799_Class0]
		[ATHENA_GlycemicControl_Instance_110114])
	(label "insulin therapy only and presence of HbA1c and its target")
	(operator AND))

([ATHENA_GlycemicControl_Instance_110114] of  N_ary_Criterion

	(criteria
		[KB_273522_Class1]
		[ATHENA_GlycemicControl_Instance_10002])
	(label "presence of HbA1c and its target")
	(operator AND))

([ATHENA_GlycemicControl_Instance_120001] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Instance_120002])
	(mood Recommend_Increase))

([ATHENA_GlycemicControl_Instance_120002] of  Conditional_On_Screen_Message

	(label "Monitor creatinine level closely if age > 80")
	(message "Monitor creatinine level closely if age > 80 and the dose should not be escalated to the maximum in elderly patients due to increased susceptibility to lactic acidosis.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Instance_120003]))

([ATHENA_GlycemicControl_Instance_120003] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(assume_if_no_value no_assumption)
	(entry_type Numeric_Entry)
	(label "Age > 80")
	(numeric_domain_term Age)
	(operator %3E%3D)
	(value 80.0))

([ATHENA_GlycemicControl_Instance_120005] of  Presence_Criterion

	(domain_term Liver_Disease)
	(entry_type Note_Entry)
	(label "Liver disease")
	(presence TRUE))

([ATHENA_GlycemicControl_Instance_120008] of  Collateral_Action

	(actions [KB_308520_Class6])
	(mood Authorized))

([ATHENA_GlycemicControl_Instance_120009] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Instance_120010])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Instance_120010] of  Conditional_On_Screen_Message

	(display_location Summary)
	(label "Biguanide info general")
	(message "•	Efficacy ( HbA1c) a 1.0 - 2.0%\n•	The major blood glucose lowering effect is through decreasing hepatic glucose                           production with some decrease in peripheral insulin resistance \n•	May restore ovulation in premenopausal anovulatory females.\n•	Monitor renal function prior to drug initiation and at least annually thereafter.\n•	Inexpensive when using generic.")
	(message_type Recommendation)
	(rule_in_condition [criterion_INSTANCE_00001]))

([ATHENA_GlycemicControl_Instance_120088] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class8])
	(%3ATO [ATHENA_GlycemicControl_Instance_130784]))

([ATHENA_GlycemicControl_Instance_120108] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Instance_120110])
	(label "test"))

([ATHENA_GlycemicControl_Instance_120109] of  Consultation_Selection

	(%3AFROM [KB_707783_Class4])
	(%3ATO [ATHENA_GlycemicControl_Instance_120108]))

([ATHENA_GlycemicControl_Instance_120110] of  On_Screen_Message

	(display_location Summary)
	(label "test")
	(message "test")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Instance_120201] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_100070]
		[ATHENA_GlycemicControl_Instance_110114])
	(label ">1 oral agents & presence of HbA1c & its target")
	(operator AND))

([ATHENA_GlycemicControl_Instance_120202] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_110114]
		[KB_362799_Class1]
		[KB_308520_Class3])
	(label "oral agent & insulin, presence of HbA1c & its target")
	(operator AND))

([ATHENA_GlycemicControl_Instance_120203] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_110114]
		[ATHENA_GlycemicControl_Instance_120204]
		[ATHENA_DM_Eye_Instance_80028])
	(label "1 oral agent & presence of HbA1c & target")
	(operator AND))

([ATHENA_GlycemicControl_Instance_120204] of  Numeric_Term_Criterion

	(aggregation_operator count)
	(entry_type Medication)
	(label "1 oral agent")
	(numeric_domain_term Oral_Hypoglycemic_Agent)
	(operator %3D)
	(status "active")
	(value 1.0))

([ATHENA_GlycemicControl_Instance_120205] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_110114]
		[KB_308520_Class16])
	(label "Absence of pharmacologic treatment & presence of HbA1c and target")
	(operator AND))

([ATHENA_GlycemicControl_Instance_130131] of  %3APAL-CONSTRAINT

	(%3APAL-NAME "presence of contraindicated drug that has no complicating factor")
	(%3APAL-RANGE "(defrange ?current_med :FRAME Medication)\n(defrange ?problem :FRAME Note_Entry)\n(defrange ?problem1 :FRAME Note_Entry)\n(defrange ?med_class :FRAME Drug_Usage)\n(defrange ?contraindication :FRAME Medical_Conditions_Metaclass Absolute_Contraindications)\n(defrange ?derived_contraindication :FRAME Diagnostic_Term_Metaclass)\n(defrange ?complication :FRAME Medical_Conditions_Metaclass Complication_Factor)\n(defrange ?derived_complication :FRAME Diagnostic_Term_Metaclass)")
	(%3APAL-STATEMENT "(exists ?current_med \n        (and (or (not (own-slot-not-null mood ?current_med ))\n                 (mood ?current_med Authorized)) \n             (patient_id ?current_med $patient_id)\n             (is-class (drug_name ?current_med))\n             (exists ?med_class\n                     (and (equal-or-subclass-of (coerce-to-class (drug_name ?current_med)) (Drug_Class_Name ?med_class ))\n                          (not (exists ?complication \n                                       (and  (Complication_Factor ?med_class ?complication)\n                                             (exists ?problem1 \n                                                     (and (patient_id ?problem1 $patient_id)\n                                                          (is-class (domain_term ?problem1) )\n                                                          (equal-or-subclass-of  (coerce-to-class (domain_term ?problem1))\n                                                                                 ?complication))))))\n                          (not (exists ?derived_complication\n                                       (and (Complication_Factor ?med_class ?derived_complication)\n                                            (is-derivable ?derived_complication))))\n             \n                          (or (exists ?contraindication \n                                      (and  (Absolute_Contraindications ?med_class ?contraindication)\n                                            (exists ?problem \n                                                    (and (patient_id ?problem $patient_id)\n                                                         (is-class (domain_term ?problem) )\n                                                         (equal-or-subclass-of  (coerce-to-class (domain_term ?problem))\n                                                                                ?contraindication)))))\n                              (exists ?derived_contraindication\n                                      (and (Absolute_Contraindications ?med_class ?derived_contraindication)\n                                           (is-derivable ?derived_contraindication))))\n                     ))))"))

([ATHENA_GlycemicControl_Instance_130309] of  Choice_Step

	(branches
		[ATHENA_GlycemicControl_Class21]
		[ATHENA_GlycemicControl_Instance_130784]
		[ATHENA_GlycemicControl_Class150002]
		[ATHENA_GlycemicControl_Class150004]
		[ATHENA_GlycemicControl_Class150015])
	(label "Intensify choices"))

([ATHENA_GlycemicControl_Instance_130311] of  Action_Choice

	(followed_by [ATHENA_GlycemicControl_Instance_130309])
	(label "Intensify drug treatment")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Instance_130679]))

([ATHENA_GlycemicControl_Instance_130312] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class7])
	(%3ATO [ATHENA_GlycemicControl_Instance_130311]))

([ATHENA_GlycemicControl_Instance_130315] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Instance_130311])
	(%3ATO [ATHENA_GlycemicControl_Instance_130309]))

([ATHENA_GlycemicControl_Instance_130316] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Instance_130309])
	(%3ATO [ATHENA_GlycemicControl_Class21]))

([ATHENA_GlycemicControl_Instance_130679] of  N_ary_Criterion

	(criteria [ATHENA_GlycemicControl_Instance_10034])
	(label "Goal not satisfied")
	(operator NOT))

([ATHENA_GlycemicControl_Instance_130784] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Class20000])
	(label "Increase dose")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class1300424]))

([ATHENA_GlycemicControl_Instance_130785] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Instance_130309])
	(%3ATO [ATHENA_GlycemicControl_Instance_130784]))

([ATHENA_GlycemicControl_Instance_130786] of  PAL_Criterion

	(case_variable "$patient_id")
	(label "(PAL) there exists non-contraindicated meds not at max level")
	(PAL_constraint [ATHENA_GlycemicControl_Class20001]))

([ATHENA_GlycemicControl_Instance_140143] of  Collateral_Action

	(actions [ATHENA_GlycemicControl_Instance_140144])
	(mood Recommend_Add))

([ATHENA_GlycemicControl_Instance_140144] of  Conditional_On_Screen_Message

	(display_location Summary)
	(label "Sulfonylurea general info when prescribing")
	(message "•	Efficacy ( HbA1c) a = 1.0 - 2.0 %\n•	1st generation sulfonylureas are no longer commonly used.\n•	No difference in long term efficacy or failure rate has been demonstrated among the sulfonylureas.\n•	The preferred agents have shorter half-lives and inactive metabolites.\n•	1st generation sulfonylureas are 100% renally eliminated. Chlorpropamide and tolazamide have active metabolites.\n•	Glipizide, glyburide, and glimepiride are renally eliminated by 80 - 85%, 50%, and 60% respectively. All but glipizide have active metabolites.\n•	Inexpensive")
	(message_type Recommendation)
	(rule_in_condition [criterion_INSTANCE_00001]))

([ATHENA_GlycemicControl_Instance_140145] of  On_Screen_Message

	(display_location Summary)
	(label "dose - rec add chlorpropamide")
	(message "100mg/day-125mg/day for elderly patients; 250mg/day in the mild-to-moderately severe, middle aged, stable patient")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Instance_140146] of  On_Screen_Message

	(display_location Summary)
	(label "dose - rec add piolgitazone")
	(message "15 - 45mg administered once daily.\n\nMay be given without regard to meals\nDosage adjustment is not required for renal insufficiency; however, there is insufficient data to recommend use in endstage renal disease.\nSlow onset of action.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Instance_140147] of  On_Screen_Message

	(display_location Summary)
	(label "dose - rec add Repaglinide")
	(message "Starting dose is 0.5mg in patients with HbA1c <8%. If the HbA1c is >8%, a dose of 1 or 2mg may be initiated. Maximum dose is 4mg per meal.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Instance_140148] of  On_Screen_Message

	(display_location Summary)
	(label "dose - rec add Tolazamide")
	(message "1000 mg given once daily or divided into 2 doses.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Instance_140149] of  On_Screen_Message

	(display_location Summary)
	(label "dose - rec add micronized gliburide")
	(message "0.75 - 12mg given once daily or divided into 2 doses; doses >6mg when divided, may provide a better response\n\nIf the response to a single daily dose does not achieve treatment goals, dividing the dose may be effective.\nIn general, the hypoglycemic effects of glyburide and glipizide tend to plateau at 10mg and 20mg, respectively.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Instance_140150] of  On_Screen_Message

	(display_location Summary)
	(label "dose - rec add Tolbutamide")
	(message "250-2000mg divided into 2-3 doses.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Instance_140151] of  On_Screen_Message

	(display_location Summary)
	(label "dose - rec add gliburide")
	(message "1.25 - 20mg given once daily or divided into 2 doses")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Instance_140152] of  On_Screen_Message

	(display_location Summary)
	(label "dose - rec add Glimepiride")
	(message "1-4 mg once daily")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Instance_140153] of  On_Screen_Message

	(display_location Summary)
	(label "dose - rec add glipizide")
	(message "2.5 - 40 mg given once daily or divided into 2 doses taken 30 minutes before a meal.  Doses > 15 mgs should be divided into 2 doses.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Instance_140154] of  On_Screen_Message

	(display_location Summary)
	(label "dose - rec add acarbose")
	(message "For acarbose or miglitol begin with 25 mg TID or initiate gradually:\n25 mg QD x 1-2 weeks followed by \n25 mg BID for 1-2 weeks followed by\n25 mg TID. Once a 25mg TID dosing regimen is reached, further increases may be made at a 4-8 week interval.\n\nThe usual maintenance dose is 50 mg TID. Maximum dose for acarbose is 100mg TID (50 mg TID if weight <60 kg) and 100mg tid for miglitol.\n\nDose is to be taken with the first bite of each main meal.\n\nIf the patient misses or adds a meal, they should omit or add the dose.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Instance_140155] of  On_Screen_Message

	(display_location Summary)
	(label "dose - rec add rosiglitazone")
	(message "4 - 8mg/day, given once daily or divided into 2 doses.\n\nMay be given without regard to meals\nDosage adjustment is not required for renal insufficiency; however, there is insufficient data to recommend use in endstage renal disease.\nSlow onset of action.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Instance_140156] of  On_Screen_Message

	(display_location Summary)
	(label "dose - rec add miglitol")
	(message "For acarbose or miglitol begin with 25 mg TID or initiate gradually:\n25 mg QD x 1-2 weeks followed by \n25 mg BID for 1-2 weeks followed by\n25 mg TID. Once a 25mg TID dosing regimen is reached, further increases may be made at a 4-8 week interval.\n\nThe usual maintenance dose is 50 mg TID. Maximum dose for acarbose is 100mg TID (50 mg TID if weight <60 kg) and 100mg tid for miglitol.\n\nDose is to be taken with the first bite of each main meal.\n\nIf the patient misses or adds a meal, they should omit or add the dose.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Instance_140157] of  On_Screen_Message

	(display_location Summary)
	(label "dose - rec add nateglinide")
	(message "120mg before each meal.\n\nTake 1 - 30 minutes before a meal.\nIf the patient misses or adds a meal, they should omit or add the dose")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Instance_140158] of  On_Screen_Message

	(display_location Summary)
	(label "dose - rec add metformin")
	(message "Starting dosage is either 500mg BID or 850mg q am:\n\nIf on 500mg BID, dosage increase may be made by 500mg increments weekly up to 1000mg BID\n\nIf on 850mg q am, dosage increase of 850mg may be made every other week (given as 850mg BID)\n\nThe usual maintenance dose is 850 mg BID with meals.\n\nMaximum dose: 2550 mg/day (850mg TID); the dose response curve usually plateaus after 2000mg/day.\n\nTake with food to avoid possible GI symptoms")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Instance_140159] of  On_Screen_Message

	(display_location Summary)
	(label "dose - rec add repaglinide")
	(message "Starting dose is 0.5mg in patients with HbA1c <8%. If the HbA1c is >8%, a dose of 1 or 2mg may be initiated. Maximum dose is 4mg per meal.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Instance_140160] of  On_Screen_Message

	(display_location Summary)
	(label "dose - rec add Repaglinide")
	(message "Starting dose is 0.5mg in patients with HbA1c <8%. If the HbA1c is >8%, a dose of 1 or 2mg may be initiated. Maximum dose is 4mg per meal.")
	(message_type Recommendation))

([ATHENA_GlycemicControl_Instance_20000] of  Query_Result_Criterion

	(label "Any HBA1c above target in past year")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Instance_20001]))

([ATHENA_GlycemicControl_Instance_20001] of  Structured_Query

	(label "Any HBA1c above target in past year")
	(type Numeric_Entry)
	(where_restriction
		[ATHENA_GlycemicControl_Instance_20002]
		[ATHENA_GlycemicControl_Instance_100038]))

([ATHENA_GlycemicControl_Instance_20002] of  Comparison_Filter

	(attribute [value])
	(label "value > HbA1C target")
	(operator %3E)
	(value_expression [KB_794798_Class1]))

([ATHENA_GlycemicControl_Instance_20005] of  Consultation_Branch_Step

	(branches [ATHENA_GlycemicControl_Instance_20006])
	(label "Determine target")
	(selection_method some_of))

([ATHENA_GlycemicControl_Instance_20006] of  Consultation_Action_Step

	(actions [ATHENA_GlycemicControl_Class750000])
	(label "request confirmation of presumptive target goal"))

([ATHENA_GlycemicControl_Instance_20008] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_20010]
		[ATHENA_DM_Eye_Instance_100022])
	(label "High risk per glycemic control module")
	(operator OR))

([ATHENA_GlycemicControl_Instance_20010] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "HbA1c >=9.5%")
	(numeric_domain_term HbA1C)
	(operator %3E%3D)
	(unit "%")
	(value 9.5))

([ATHENA_GlycemicControl_Instance_20011] of  Query_Result_Criterion

	(label "Sex = Male")
	(presence TRUE)
	(query [ATHENA_GlycemicControl_Class90131]))

([ATHENA_GlycemicControl_Instance_40001] of  N_ary_Criterion

	(criteria [ATHENA_DM_Eye_Instance_30020])
	(label "Target HBA1c 7%")
	(operator OR))

([ATHENA_GlycemicControl_Instance_50000] of  Order_TestProcedure

	(label "HbA1c")
	(subsidiary_message "HbA1c is absent or more than a year old.  Please order. Once we have a current HbA1c, we will give more detailed recommendations.")
	(test_or_procedure HbA1C)
	(when [ATHENA_DM_Eye_Instance_100018]))

([ATHENA_GlycemicControl_Instance_50002] of  Drug_Usage

	(Absolute_Contraindications
		Allergy+to+Sulfonylureas
		CCS-11.7)
	(collateral_actions [ATHENA_GlycemicControl_Instance_140143])
	(Drug_Class_Name SULFONYLUREAS_1STGEN)
	(label "Sulfonylureas 1st generation")
	(Relative_Contraindications
		hypoglycemia
		Weight+gain)
	(Side_Effects
		hypoglycemia
		Weight+gain
		Allergy+to+Sulfonylureas))

([ATHENA_GlycemicControl_Instance_50003] of  Presence_Criterion

	(domain_term Oral_Hypoglycemic_Agent)
	(entry_type Medication)
	(label "Absence oral hypoglycemic agent")
	(mood Authorized)
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControl_Instance_50004] of  Drug_Usage

	(Absolute_Contraindications
		Poor+renal+function+and+Abs+Biguanide
		Pres+Biguanide+and+eGFR%3C30+past+year
		ADR+renal+failure+or+impairment+to+MF+or+MF_ER
		ADR+acidosis+to+MF+or+MF_ER
		ADR+anaphylaxis+to+MF+or+MF_ER)
	(collateral_actions
		[ATHENA_GlycemicControl_Instance_120001]
		[ATHENA_GlycemicControl_Class30002]
		[ATHENA_GlycemicControl_Class730008]
		[ATHENA_GlycemicControl_Class730019]
		[ATHENA_GlycemicControl_Class720148]
		[ATHENA_GlycemicControl_Class741055]
		[ATHENA_GlycemicControl_Class1090424]
		[ATHENA_DM_GlycemicControl_Dashboard_Class10000])
	(Do_Not_Intensify_Conditions
		Absence+of+eGFR+in+past+year
		30%3C%3DeGFR%3C45+past+year
		Absence+of+AST+or+ALT+in+past+year
		Absence+all+bicarb+labs+past+year)
	(Do_Not_Start_Conditions
		Absence+of+eGFR+in+past+month
		Absence+of+AST+or+ALT+in+past+year
		30%3C%3DeGFR%3C45+past+30+days
		Absence+all+bicarb+labs+past+year)
	(Drug_Class_Name BIGUANIDE)
	(formulary_preferred_drug_in_class [ATHENA_GlycemicControl_Instance_80009])
	(is_first-line_drug_for DM-Type2)
	(label "Biguanide")
	(Relative_Contraindications
		AST%3E3*UpperLimitOfNormal
		ALT%3E3*UpperLimitOfNormal
		Abs+Biguanide+and+45%3C%3DeGFR%3C60+past+month
		Pres+of+Biguanide+and+45%3C%3DeGFR%3C60+past+year
		bicarb+lt+24+or+22+or+23+past+year))

([ATHENA_GlycemicControl_Instance_50005] of  Evaluate_Start_Activity

	(activity_class "Medication")
	(alternatives
		[ATHENA_GlycemicControl_Instance_50004]
		[ATHENA_GlycemicControl_Class60000]
		[ATHENA_GlycemicControl_Class1070005]
		[ATHENA_GlycemicControl_Instance_50026])
	(fine-grain_priority 1000)
	(label "Initiate biguanide, glipizide, Saxa, TZD")
	(therapeutic_goal [ATHENA_GlycemicControl_Class610454]))

([ATHENA_GlycemicControl_Instance_50007] of  Presence_Criterion

	(domain_term SULFONYLUREAS)
	(entry_type Adverse_Reaction)
	(label "Allergy to Sulfonylureas")
	(presence TRUE))

([ATHENA_GlycemicControl_Instance_50008] of  Action_Choice

	(actions
		[ATHENA_GlycemicControl_Instance_10028]
		[ATHENA_GlycemicControl_Instance_60000])
	(label "Is patient high risk? If yes, refer")
	(strict_rule_in_condition [criterion_INSTANCE_00001]))

([ATHENA_GlycemicControl_Instance_50011] of  Data_Entry_Template
)

([ATHENA_GlycemicControl_Instance_50012] of  Quantitative_Data

	(domain_term target_HBA1c)
	(label "Clinician enter target HbA1c")
	(possible_values
		[ATHENA_GlycemicControl_Instance_50014]
		[ATHENA_GlycemicControl_Instance_50015]
		[ATHENA_GlycemicControl_Instance_50016])
	(prompt "What is the target HbA1c for this patient?")
	(references [ATHENA_GlycemicControl_Class90045])
	(rule_in_condition [ATHENA_GlycemicControl_Instance_10032])
	(sensitive TRUE))

([ATHENA_GlycemicControl_Instance_50013] of  Numeric_Constant

	(value 7.0))

([ATHENA_GlycemicControl_Instance_50014] of  Physical_Quantity

	(unit "%")
	(value "7"))

([ATHENA_GlycemicControl_Instance_50015] of  Physical_Quantity

	(unit "%")
	(value "8"))

([ATHENA_GlycemicControl_Instance_50016] of  Physical_Quantity

	(unit "%")
	(value "9"))

([ATHENA_GlycemicControl_Instance_50018] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class9])
	(%3ATO [ATHENA_GlycemicControl_Instance_50008]))

([ATHENA_GlycemicControl_Instance_50020] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class7])
	(%3ATO [ATHENA_GlycemicControl_Instance_50008]))

([ATHENA_GlycemicControl_Instance_50022] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class5])
	(%3ATO [ATHENA_GlycemicControl_Instance_50008]))

([ATHENA_GlycemicControl_Instance_50023] of  Qualitative_Data

	(label "High risk determination")
	(sensitive FALSE))

([ATHENA_GlycemicControl_Instance_50024] of  Qualitative_Data

	(label "Recurrent incapacitating episodes of hypoglycemia")
	(prompt "Have recurrent episodes of incapacitating hypoglycemia")
	(sensitive TRUE))

([ATHENA_GlycemicControl_Instance_50026] of  Drug_Usage

	(Absolute_Contraindications
		Bladder_Cancer
		ADR+of+thrombocytopenia+to+pio+or+rosi
		ADR+anaphylaxis+to+TZD)
	(collateral_actions
		[KB_308520_Class4]
		[KB_308520_Class13]
		[ATHENA_GlycemicControl_Class90046]
		[ATHENA_GlycemicControl_Class210051]
		[ATHENA_GlycemicControl_Class490000]
		[ATHENA_GlycemicControl_Class1110000]
		[ATHENA_GlycemicControl_Class1330004])
	(Do_Not_Intensify_Conditions
		AST%3E3*UpperLimitOfNormal
		ALT%3E3*UpperLimitOfNormal
		Heart_failure_N
		CCS-7.2.11.1
		CCS-7.2.11
		Absence+of+AST+or+ALT+in+past+year)
	(Do_Not_Start_Conditions
		AST%3E3*UpperLimitOfNormal
		ALT%3E3*UpperLimitOfNormal
		Heart_failure_N
		CCS-7.2.11.1
		CCS-7.2.11
		Absence+of+AST+or+ALT+in+past+year)
	(Drug_Class_Name THIAZOLIDINEDIONES)
	(Drug_Partners_To_Avoid
		Insulin
		gemfibrozil)
	(formulary_preferred_drug_in_class [ATHENA_GlycemicControl_Instance_80012])
	(is_second-line_drug_for DM-Type2)
	(label "THIAZOLIDINEDIONES")
	(references [ATHENA_GlycemicControl_Class80024])
	(Relative_Contraindications
		cirrhosis
		CCS-9.8.2.1
		Osteoporosis))

([ATHENA_GlycemicControl_Instance_50027] of  Drug_Usage

	(Absolute_Contraindications
		Presence_of_NPH_insulin
		Presence_of_Gemfibrozil)
	(collateral_actions
		[ATHENA_GlycemicControl_Class210051]
		[ATHENA_GlycemicControl_Class490000]
		[ATHENA_GlycemicControl_Class500006]
		[ATHENA_GlycemicControl_Class730017])
	(Do_Not_Intensify_Conditions Absence+of+eGFR+in+past+year)
	(Do_Not_Start_Conditions Absence+of+eGFR+in+past+month)
	(Drug_Class_Name MEGLITINIDES)
	(Drug_Partners_To_Avoid NATEGLINIDE)
	(formulary_preferred_drug_in_class [ATHENA_GlycemicControl_Instance_80014])
	(label "repaglinide")
	(Relative_Contraindications Poor_renal_function)
	(Relative_Indications DM-Type2))

([ATHENA_GlycemicControl_Instance_50028] of  Drug_Usage

	(Absolute_Contraindications
		eGFR+%3C45+and+Saxagliptin+daily+dose%3E2.5
		eGFR+%3C+30)
	(collateral_actions
		[ATHENA_GlycemicControl_Class210051]
		[ATHENA_GlycemicControl_Class350013]
		[ATHENA_GlycemicControl_Class490000])
	(Do_Not_Intensify_Conditions Absence+of+eGFR+in+past+year)
	(Do_Not_Start_Conditions Absence+of+eGFR+in+past+month)
	(formulary_preferred_drug_in_class
		[ATHENA_GlycemicControl_Instance_80016]
		[ATHENA_GlycemicControl_Class340006])
	(label "DIPEPTIDYL_PEPTIDASE-4_INHIBITOR")
	(Relative_Contraindications
		Pancreatitis
		Poor_renal_function)
	(Relative_Indications DM-Type2))

([ATHENA_GlycemicControl_Instance_50029] of  Boolean_Data

	(sensitive FALSE))

([ATHENA_GlycemicControl_Instance_50030] of  Boolean_Data

	(label "Recurrent incapacitating episodes of hypoglycemia")
	(prompt "Does patient have recurrent incapacitating episodes of hypoglycemia?")
	(sensitive TRUE))

([ATHENA_GlycemicControl_Instance_50031] of  Boolean_Data

	(domain_term recurrent+episodes+of+incapacitating+hyperglycemia)
	(label "Recurrent incapacitating episodes of hyperglycemia")
	(prompt "Does patient have recurrent incapacitating episodes of hyperglycemia?")
	(sensitive TRUE))

([ATHENA_GlycemicControl_Instance_50032] of  Boolean_Data

	(label "History of severe hypoglycemia reactions")
	(prompt "Does patient have a history of severe hypoglycemic reactions (including coma, seizures, or frequent need for emergency resuscitation)?")
	(sensitive TRUE))

([ATHENA_GlycemicControl_Instance_50033] of  Boolean_Data

	(label "poor recognition of hypoglycemia")
	(prompt "Does patient have poor recognition of hypoglycemia?")
	(sensitive TRUE))

([ATHENA_GlycemicControl_Instance_50034] of  Boolean_Data

	(label "psychosocial problems (including alcohol or substance abuse) that complicate management")
	(prompt "Does patient have psychosocial problems (including alcohol or substance abuse) that complicate management")
	(sensitive TRUE))

([ATHENA_GlycemicControl_Instance_60000] of  Referral

	(label "Refer to subspecialty consultation")
	(rule_in_condition [ATHENA_GlycemicControl_Instance_60001])
	(when [ATHENA_DM_Eye_Instance_100018])
	(who_to endocrinologist))

([ATHENA_GlycemicControl_Instance_60001] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_60002]
		[ATHENA_GlycemicControl_Instance_60003]
		[ATHENA_GlycemicControl_Instance_60004]
		[ATHENA_GlycemicControl_Instance_60005]
		[ATHENA_GlycemicControl_Instance_60006]
		[ATHENA_GlycemicControl_Instance_60007]
		[ATHENA_GlycemicControl_Instance_60008]
		[ATHENA_GlycemicControl_Instance_60009]
		[ATHENA_GlycemicControl_Instance_60010]
		[ATHENA_DM_Eye_Instance_100022])
	(label "Criteria for High Risk")
	(operator OR))

([ATHENA_GlycemicControl_Instance_60002] of  Presence_Criterion

	(domain_term history+of+severe+hypoglycemic+reactions)
	(entry_type Note_Entry)
	(label "history of severe hypoglycemic reactions")
	(presence TRUE))

([ATHENA_GlycemicControl_Instance_60003] of  Presence_Criterion

	(domain_term recurrent+episodes+of+incapacitating+hypoglycemia)
	(entry_type Note_Entry)
	(label "recurrent episodes of incapacitating hypoglycemia")
	(presence TRUE))

([ATHENA_GlycemicControl_Instance_60004] of  Presence_Criterion

	(domain_term poor+recognition+of+hypoglycemia)
	(entry_type Note_Entry)
	(label "poor recognition of hypoglycemia")
	(presence TRUE))

([ATHENA_GlycemicControl_Instance_60005] of  Presence_Criterion

	(domain_term recurrent+episodes+of+incapacitating+hyperglycemia)
	(entry_type Note_Entry)
	(label "recurrent episodes of incapacitating hyperglycemia")
	(presence TRUE))

([ATHENA_GlycemicControl_Instance_60006] of  Presence_Criterion

	(domain_term psychosocial+problems+that+complicate+management)
	(entry_type Note_Entry)
	(label "psychosocial problems that complicate management")
	(presence TRUE))

([ATHENA_GlycemicControl_Instance_60007] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "HbA1c>=9.5%")
	(numeric_domain_term HbA1C)
	(operator %3E%3D)
	(unit "%")
	(value 9.5))

([ATHENA_GlycemicControl_Instance_60008] of  Presence_Criterion

	(domain_term CCS-10.1.3)
	(entry_type Note_Entry)
	(label "Chronic renal failure")
	(presence TRUE))

([ATHENA_GlycemicControl_Instance_60009] of  Numeric_Term_Criterion

	(entry_type Numeric_Entry)
	(label "egfr<60????")
	(numeric_domain_term eGFR)
	(operator %3C)
	(value 60.0))

([ATHENA_GlycemicControl_Instance_60010] of  Presence_Criterion

	(domain_term CCS-6.7.2)
	(entry_type Note_Entry)
	(label "retinopathy-- check with experts")
	(presence TRUE))

([ATHENA_GlycemicControl_Instance_60012] of  Boolean_Data

	(domain_term new-onset+insulin-requiring+DM)
	(label "new-onset insulin-requiring DM")
	(prompt "Does patient have new-onset insulin-requiring DM?")
	(sensitive TRUE))

([ATHENA_GlycemicControl_Instance_60014] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "BMI>25")
	(numeric_domain_term BMI)
	(operator %3E)
	(value 25.0))

([ATHENA_GlycemicControl_Instance_60016] of  Numeric_Term_Criterion

	(entry_type Numeric_Entry)
	(label "BMI>=29")
	(numeric_domain_term BMI)
	(operator %3E%3D)
	(value 29.0))

([ATHENA_GlycemicControl_Instance_60017] of  Guideline_View

	(drug_usages
		[ATHENA_GlycemicControl_Instance_50004]
		[ATHENA_GlycemicControl_Instance_50028]
		[ATHENA_GlycemicControl_Instance_50027]
		[ATHENA_GlycemicControl_Instance_50002]
		[ATHENA_GlycemicControl_Instance_50026])
	(guideline [ATHENA_GlycemicControl_Instance_0]))

([ATHENA_GlycemicControl_Instance_70000] of  Guideline_View

	(drug_usages
		[ATHENA_GlycemicControl_Instance_50004]
		[ATHENA_GlycemicControl_Instance_50028]
		[ATHENA_GlycemicControl_Instance_50027]
		[ATHENA_GlycemicControl_Instance_50002]
		[ATHENA_GlycemicControl_Instance_50026]
		[KB_390055_Class4]
		[ATHENA_GlycemicControl_Class60000]
		[ATHENA_GlycemicControl_Class70000]
		[ATHENA_GlycemicControl_Class90051])
	(guideline [ATHENA_GlycemicControl_Instance_0])
	(guideline_drugs
		[ATHENA_GlycemicControl_Instance_80000]
		[ATHENA_GlycemicControl_Instance_80001]
		[ATHENA_GlycemicControl_Instance_80002]
		[ATHENA_GlycemicControl_Instance_80003]
		[ATHENA_GlycemicControl_Instance_80004]
		[ATHENA_GlycemicControl_Instance_80005]
		[ATHENA_GlycemicControl_Instance_80006]
		[ATHENA_GlycemicControl_Instance_80007]
		[ATHENA_GlycemicControl_Instance_80008]
		[ATHENA_GlycemicControl_Instance_80009]
		[ATHENA_GlycemicControl_Instance_80010]
		[ATHENA_GlycemicControl_Instance_80011]
		[ATHENA_GlycemicControl_Instance_80012]
		[ATHENA_GlycemicControl_Instance_80014]
		[ATHENA_GlycemicControl_Instance_80015]
		[ATHENA_GlycemicControl_Instance_80016]
		[ATHENA_GlycemicControl_Class70001]))

([ATHENA_GlycemicControl_Instance_70001] of  N_ary_Criterion

	(criteria
		[library_Instance_10002]
		[ATHENA_GlycemicControl_Instance_70002])
	(label "25<BMI<29")
	(operator AND))

([ATHENA_GlycemicControl_Instance_70002] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "BMI<29")
	(numeric_domain_term BMI)
	(operator %3C)
	(value 29.0))

([ATHENA_GlycemicControl_Instance_70010] of  Action_Choice

	(actions [ATHENA_GlycemicControl_Instance_90005])
	(label "HbA1c controlled")
	(strict_rule_in_condition [ATHENA_GlycemicControl_Class180126]))

([ATHENA_GlycemicControl_Instance_70022] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class4])
	(%3ATO [ATHENA_GlycemicControl_Class8]))

([ATHENA_GlycemicControl_Instance_70023] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class2])
	(%3ATO [ATHENA_GlycemicControl_Class7]))

([ATHENA_GlycemicControl_Instance_70026] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class1])
	(%3ATO [ATHENA_GlycemicControl_Class7]))

([ATHENA_GlycemicControl_Instance_70027] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class0])
	(%3ATO [ATHENA_GlycemicControl_Class5]))

([ATHENA_GlycemicControl_Instance_70029] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class7])
	(%3ATO [ATHENA_GlycemicControl_Class22]))

([ATHENA_GlycemicControl_Instance_70031] of  Evaluate_Start_Activity

	(activity_class "Medication")
	(alternatives [KB_390055_Class4])
	(fine-grain_priority 1000)
	(label "Evaluate Start Insulin")
	(therapeutic_goal [ATHENA_GlycemicControl_Class610454]))

([ATHENA_GlycemicControl_Instance_80000] of  Guideline_Drug

	(collateral_actions [ATHENA_GlycemicControl_Class50000])
	(dose_level_ranges
		[KB_308520_Class18]
		[KB_308520_Class19])
	(drug_usage [ATHENA_GlycemicControl_Instance_50002])
	(generic_drug CHLORPROPAMIDE)
	(increase_dose_ceiling 500.0)
	(label "CHLORPROPAMIDE")
	(max_recommended_dose 750.0)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(starting_dose 100.0))

([ATHENA_GlycemicControl_Instance_80001] of  Guideline_Drug

	(collateral_actions [ATHENA_GlycemicControl_Class60004])
	(dose_level_ranges
		[ATHENA_GlycemicControl_Instance_90000]
		[ATHENA_GlycemicControl_Instance_100001])
	(drug_usage [ATHENA_GlycemicControl_Instance_50002])
	(generic_drug TOLAZAMIDE)
	(increase_dose_ceiling 750.0)
	(label "TOLAZAMIDE")
	(max_recommended_dose 1000.0)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(starting_dose 100.0))

([ATHENA_GlycemicControl_Instance_80002] of  Guideline_Drug

	(collateral_actions [ATHENA_GlycemicControl_Class60007])
	(dose_level_ranges
		[ATHENA_GlycemicControl_Instance_100002]
		[ATHENA_GlycemicControl_Instance_100003])
	(drug_usage [ATHENA_GlycemicControl_Instance_50002])
	(generic_drug TOLBUTAMIDE)
	(increase_dose_ceiling 2000.1)
	(label "TOLBUTAMIDE")
	(max_recommended_dose 3000.0)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(starting_dose 1000.0))

([ATHENA_GlycemicControl_Instance_80003] of  Guideline_Drug

	(dose_level_ranges
		[ATHENA_GlycemicControl_Instance_100004]
		[ATHENA_GlycemicControl_Instance_100005])
	(drug_usage [ATHENA_GlycemicControl_Instance_50002])
	(generic_drug ACETOHEXAMIDE)
	(increase_dose_ceiling 1000.0)
	(label "ACETOHEXAMIDE")
	(max_recommended_dose 1500.0)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(starting_dose 250.0))

([ATHENA_GlycemicControl_Instance_80004] of  Guideline_Drug

	(collateral_actions [ATHENA_GlycemicControl_Class730021])
	(dose_level_ranges
		[ATHENA_GlycemicControl_Instance_100006]
		[ATHENA_GlycemicControl_Instance_100007])
	(drug_usage [ATHENA_GlycemicControl_Class60000])
	(generic_drug GLIPIZIDE)
	(increase_dose_ceiling 39.9)
	(label "Glipizide")
	(max_recommended_dose 40.2)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(starting_dose 2.5))

([ATHENA_GlycemicControl_Instance_80005] of  Guideline_Drug

	(collateral_actions
		[ATHENA_GlycemicControl_Class730022]
		[ATHENA_GlycemicControl_Class730027]
		[ATHENA_GlycemicControl_Class730028])
	(dose_level_ranges
		[ATHENA_GlycemicControl_Instance_100008]
		[ATHENA_GlycemicControl_Instance_100009])
	(drug_usage [ATHENA_GlycemicControl_Class70000])
	(generic_drug GLYBURIDE)
	(increase_dose_ceiling 20.0)
	(label "GLYBURIDE")
	(max_recommended_dose 20.2)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(references [ATHENA_GlycemicControl_Class80027])
	(rule_out [ATHENA_GlycemicControl_Class80026])
	(starting_dose 1.25))

([ATHENA_GlycemicControl_Instance_80006] of  Guideline_Drug

	(collateral_actions [ATHENA_GlycemicControl_Class730020])
	(dose_level_ranges
		[ATHENA_GlycemicControl_Instance_100010]
		[ATHENA_GlycemicControl_Instance_100011])
	(Drug_Class_Name GLIMEPIRIDE)
	(drug_usage [ATHENA_GlycemicControl_Class330008])
	(generic_drug GLIMEPIRIDE)
	(increase_dose_ceiling 8.0)
	(label "GLIMEPIRIDE")
	(max_recommended_dose 8.2)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(starting_dose 1.0))

([ATHENA_GlycemicControl_Instance_80007] of  Guideline_Drug

	(collateral_actions [ATHENA_GlycemicControl_Class730024])
	(dose_level_ranges
		[ATHENA_GlycemicControl_Instance_100012]
		[ATHENA_GlycemicControl_Instance_100013])
	(Drug_Class_Name ACARBOSE)
	(drug_usage [ATHENA_GlycemicControl_Class90051])
	(generic_drug ACARBOSE)
	(increase_dose_ceiling 150.0)
	(label "ACARBOSE")
	(max_recommended_dose 150.2)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(rule_out [ATHENA_GlycemicControl_Class90053])
	(starting_dose 75.0))

([ATHENA_GlycemicControl_Instance_80008] of  Guideline_Drug

	(dose_level_ranges
		[ATHENA_GlycemicControl_Instance_100000]
		[ATHENA_GlycemicControl_Instance_110001])
	(Drug_Class_Name MIGLITOL)
	(drug_usage [ATHENA_GlycemicControl_Class90051])
	(generic_drug MIGLITOL)
	(increase_dose_ceiling 300.0)
	(label "MIGLITOL")
	(max_recommended_dose 300.2)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(starting_dose 25.0))

([ATHENA_GlycemicControl_Instance_80009] of  Guideline_Drug

	(collateral_actions
		[ATHENA_GlycemicControl_Class730019]
		[ATHENA_GlycemicControl_Class730025]
		[ATHENA_GlycemicControl_Class741055]
		[ATHENA_GlycemicControl_Class720148])
	(dose_level_ranges
		[ATHENA_GlycemicControl_Class10001]
		[ATHENA_GlycemicControl_Class190000])
	(drug_usage [ATHENA_GlycemicControl_Instance_50004])
	(generic_drug METFORMIN)
	(increase_dose_ceiling 2499.8)
	(label "Metformin")
	(max_recommended_dose 2600.0)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(starting_dose 500.0))

([ATHENA_GlycemicControl_Instance_80010] of  Guideline_Drug

	(collateral_actions
		[ATHENA_GlycemicControl_Class730018]
		[ATHENA_GlycemicControl_Class730025]
		[ATHENA_GlycemicControl_Class741055]
		[ATHENA_GlycemicControl_Class720148]
		[ATHENA_DM_GlycemicControl_Dashboard_Class10000])
	(dose_level_ranges
		[ATHENA_GlycemicControl_Instance_110002]
		[ATHENA_GlycemicControl_Instance_110003])
	(drug_usage [ATHENA_GlycemicControl_Instance_50004])
	(generic_drug METFORMIN_ER)
	(increase_dose_ceiling 1999.9)
	(label "Metformin extended release")
	(max_recommended_dose 2000.1)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(starting_dose 500.0))

([ATHENA_GlycemicControl_Instance_80011] of  Guideline_Drug

	(dose_level_ranges
		[ATHENA_GlycemicControl_Instance_110004]
		[ATHENA_GlycemicControl_Instance_110005])
	(Drug_Class_Name ROSIGLITAZONE)
	(drug_usage [ATHENA_GlycemicControl_Instance_50026])
	(generic_drug ROSIGLITAZONE)
	(increase_dose_ceiling 8.0)
	(label "ROSIGLITAZONE")
	(max_recommended_dose 8.2)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(starting_dose 4.0))

([ATHENA_GlycemicControl_Instance_80012] of  Guideline_Drug

	(collateral_actions
		[ATHENA_GlycemicControl_Class730023]
		[ATHENA_GlycemicControl_Class1330004]
		[ATHENA_GlycemicControl_Class1330006])
	(dose_level_ranges
		[ATHENA_GlycemicControl_Instance_110007]
		[ATHENA_GlycemicControl_Instance_110006])
	(Drug_Class_Name PIOGLITAZONE)
	(drug_usage [ATHENA_GlycemicControl_Instance_50026])
	(generic_drug PIOGLITAZONE)
	(increase_dose_ceiling 44.9)
	(label "Pioglitazone")
	(max_recommended_dose 45.1)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(starting_dose 15.0))

([ATHENA_GlycemicControl_Instance_80014] of  Guideline_Drug

	(Absolute_Contraindications
		Presence_of_NPH_insulin
		Presence_of_Gemfibrozil)
	(collateral_actions [ATHENA_GlycemicControl_Class730030])
	(Do_Not_Intensify_Conditions Absence+of+eGFR+or+Absence+of+eGFR+in+past+yr)
	(Do_Not_Start_Conditions Absence+of+eGFR+in+past+month)
	(dose_level_ranges
		[ATHENA_GlycemicControl_Instance_110008]
		[ATHENA_GlycemicControl_Instance_110009])
	(Drug_Class_Name REPAGLINIDE)
	(Drug_Partners_To_Avoid NATEGLINIDE)
	(drug_usage [ATHENA_GlycemicControl_Instance_50027])
	(generic_drug REPAGLINIDE)
	(increase_dose_ceiling 16.0)
	(label "REPAGLINIDE")
	(max_recommended_dose 16.2)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(Relative_Contraindications Poor_renal_function)
	(Relative_Indications DM-Type2)
	(starting_dose 1.5))

([ATHENA_GlycemicControl_Instance_80015] of  Guideline_Drug

	(collateral_actions [ATHENA_GlycemicControl_Class730016])
	(Do_Not_Intensify_Conditions Absence+of+AST+and+ALT+or+Absnece+of+AST+and+ALT+in+past+yr)
	(dose_level_ranges
		[ATHENA_GlycemicControl_Instance_110010]
		[ATHENA_GlycemicControl_Instance_110011])
	(Drug_Class_Name NATEGLINIDE)
	(Drug_Partners_To_Avoid REPAGLINIDE)
	(drug_usage [ATHENA_GlycemicControl_Class340013])
	(generic_drug NATEGLINIDE)
	(increase_dose_ceiling 360.0)
	(label "NATEGLINIDE")
	(max_recommended_dose 360.2)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(Relative_Contraindications
		AST%3E3*UpperLimitOfNormal
		ALT%3E3*UpperLimitOfNormal)
	(Relative_Indications DM-Type2)
	(starting_dose 360.0))

([ATHENA_GlycemicControl_Instance_80016] of  Guideline_Drug

	(dose_level_ranges
		[ATHENA_GlycemicControl_Instance_110012]
		[ATHENA_GlycemicControl_Instance_110013])
	(Drug_Class_Name DIPEPTIDYL_PEPTIDASE-4_INHIBITOR)
	(drug_usage [ATHENA_GlycemicControl_Instance_50028])
	(generic_drug SITAGLIPTIN)
	(increase_dose_ceiling 100.0)
	(label "SITAGLIPTIN")
	(max_recommended_dose 100.2)
	(max_recommended_dose_level High_Dose%28high%2Flow%29)
	(starting_dose 25.0))

([ATHENA_GlycemicControl_Instance_90000] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 100.0)
	(upper_limit 749.9))

([ATHENA_GlycemicControl_Instance_90001] of  Query_Result_Criterion

	(label "HbA1c measurment < Target HbA1c")
	(presence FALSE)
	(query [ATHENA_GlycemicControl_Instance_20001]))

([ATHENA_GlycemicControl_Instance_90002] of  General_Comparison_Criterion

	(aggregation_operator most_recent)
	(domain_term HbA1C)
	(entry_type Numeric_Entry)
	(label "HbA1c > Target_HbA1c")
	(operator %3E)
	(value [KB_794798_Class1])
	(%3ADOCUMENTATION "5/21/13 added most_recent"))

([ATHENA_GlycemicControl_Instance_90005] of  On_Screen_Message

	(display_location Summary)
	(label "Continue therapy- HbA1c under control")
	(message "Latest HbA1c under control.  Continue therapy and periodically reevaluate appropriateness of target.")
	(message_type Recommendation))

([ATHENA_GlycemicControlAlt_Class0] of  Query_Result_Criterion

	(label "ACEi contraindicated by query")
	(presence TRUE)
	(query [ATHENA_GlycemicControlAlt_Class4]))

([ATHENA_GlycemicControlAlt_Class1] of  Query_Result_Criterion

	(label "Metformin contraindicated by query")
	(presence TRUE)
	(query [ATHENA_GlycemicControlAlt_Class2]))

([ATHENA_GlycemicControlAlt_Class10152] of  Variable

	(derivation_expression [ATHENA_GlycemicControlAlt_Class20620])
	(label "Query for drug usages of diabetes guideline")
	(string_name "ContraindicatedACEOrARB"))

([ATHENA_GlycemicControlAlt_Class10270] of  Structured_Query

	(attribute [drug_name])
	(label "Query for contraindicated ACE or ARB med")
	(type Medication)
	(where_restriction [ATHENA_GlycemicControlAlt_Class10271]))

([ATHENA_GlycemicControlAlt_Class10271] of  Comparison_Filter

	(attribute [drug_name])
	(label "drug name member of Drug Class Name of contraindicated drug usages")
	(operator member_of)
	(value_expression [ATHENA_GlycemicControlAlt_Class10272]))

([ATHENA_GlycemicControlAlt_Class10272] of  Structured_Query

	(attribute [Drug_Class_Name])
	(label "Classname of contraindicated ACE or ARB drug_usage")
	(type Drug_Usage)
	(where_restriction
		[eon2_Class60001]
		[ATHENA_GlycemicControlAlt_Class10273]))

([ATHENA_GlycemicControlAlt_Class10273] of  N_aryFilter

	(filters
		[ATHENA_GlycemicControlAlt_Class5]
		[ATHENA_GlycemicControlAlt_Class7])
	(label "drug class name is either ACE or ARB")
	(operator OR))

([ATHENA_GlycemicControlAlt_Class2] of  Structured_Query

	(label "Drug usage showing Metformin contraindicated")
	(type Drug_Usage)
	(where_restriction
		[eon2_Class60001]
		[ATHENA_GlycemicControlAlt_Class3]))

([ATHENA_GlycemicControlAlt_Class20276] of  Query_Result_Criterion

	(label "Presence of DM guideline med with 0.0 < MPR < 0.9")
	(presence TRUE)
	(query [ATHENA_GlycemicControlAlt_Class20620]))

([ATHENA_GlycemicControlAlt_Class20413] of  Query_Result_Criterion

	(label "there exists active and not refilled medication")
	(presence TRUE)
	(query [ATHENA_GlycemicControlAlt_Class20414]))

([ATHENA_GlycemicControlAlt_Class20414] of  Structured_Query

	(label "Active and not refilled medication")
	(type Medication)
	(where_restriction [ATHENA_GlycemicControlAlt_Class20415]))

([ATHENA_GlycemicControlAlt_Class20415] of  Comparison_Filter

	(attribute [prescription_id])
	(operator eq)
	(value_expression [ATHENA_GlycemicControlAlt_Class20416]))

([ATHENA_GlycemicControlAlt_Class20416] of  Qualitative_Constant

	(label "active and not refilled")
	(value "active and not refilled"))

([ATHENA_GlycemicControlAlt_Class20620] of  Structured_Query

	(label "DM guideline med with 0.0 < MPR < 0.9")
	(type Medication)
	(where_restriction
		[ATHENA_GlycemicControlAlt_Class20621]
		[ATHENA_GlycemicControlAlt_Class20623]
		[ATHENA_GlycemicControlAlt_Class20625])
	(%3ADOCUMENTATION "(exists ?med \n        (and (= (patient_id ?med) $patient_id) \n             (isa-classname (drug_name ?med))\n             (< (medication_possession_ratio ?med) 90.0)\n             (< 0.0 (medication_possession_ratio ?med))             \n             (or  (not (own-slot-not-null mood ?med))(= (mood ?med) Authorized))\n             (exists ?drugUsage (and \n                                     (exists ?guideline (and (drug_usages ?guideline ?drugUsage)\n                                                             (= (label ?guideline) \"ATHENA DM:  Glycemic Control Dashboard\")))\n                                     (subclass-of (coerce-to-class (drug_name ?med))(Drug_Class_Name ?drugUsage))))\n        ))"))

([ATHENA_GlycemicControlAlt_Class20621] of  Comparison_Filter

	(attribute [medication_possession_ratio])
	(label "mpr < 90")
	(operator %3C)
	(value_expression [ATHENA_GlycemicControlAlt_Class20622]))

([ATHENA_GlycemicControlAlt_Class20622] of  Numeric_Constant

	(label "90")
	(value 90.0))

([ATHENA_GlycemicControlAlt_Class20623] of  Comparison_Filter

	(attribute [medication_possession_ratio])
	(label "mpr > 0")
	(operator %3E)
	(value_expression [ATHENA_GlycemicControlAlt_Class20624]))

([ATHENA_GlycemicControlAlt_Class20624] of  Numeric_Constant

	(label "0")
	(value 0.0))

([ATHENA_GlycemicControlAlt_Class20625] of  Comparison_Filter

	(attribute [drug_name])
	(label "drug name a member of guideline drug usages")
	(operator member_of)
	(value_expression [ATHENA_GlycemicControlAlt_Class20626]))

([ATHENA_GlycemicControlAlt_Class20626] of  Structured_Query

	(attribute [Drug_Class_Name])
	(label "Drug class names of drug usages in Diabetes guideline")
	(type Drug_Usage)
	(where_restriction [ATHENA_GlycemicControlAlt_Class20627]))

([ATHENA_GlycemicControlAlt_Class20627] of  Comparison_Filter

	(label "Drug usages member of Diabetes guideline drug_usages")
	(operator member_of)
	(value_expression [ATHENA_GlycemicControlAlt_Class20628]))

([ATHENA_GlycemicControlAlt_Class20628] of  Structured_Query

	(attribute [drug_usages])
	(label "Drug usages of diabetes guideline")
	(type Management_Guideline)
	(where_restriction [ATHENA_GlycemicControlAlt_Class20629]))

([ATHENA_GlycemicControlAlt_Class20629] of  Comparison_Filter

	(attribute [label])
	(label "diabetes guideline")
	(operator eq)
	(value_expression [ATHENA_GlycemicControlAlt_Class20630]))

([ATHENA_GlycemicControlAlt_Class20630] of  Qualitative_Constant

	(label "ATHENA DM:  Glycemic Control Dashboard")
	(value "ATHENA DM:  Glycemic Control Dashboard"))

([ATHENA_GlycemicControlAlt_Class3] of  Comparison_Filter

	(attribute [Drug_Class_Name])
	(label "Biguanide drug class name")
	(operator eq)
	(value_expression [BIGUANIDE]))

([ATHENA_GlycemicControlAlt_Class30810] of  Variable

	(derivation_expression [ATHENA_GlycemicControlAlt_Class31635])
	(label "ACEI contraindicated")
	(string_name "ACE contraindicated"))

([ATHENA_GlycemicControlAlt_Class31635] of  Structured_Query

	(label "find angioedema or anaphylasis or angioedemia ADR to glimepiride")
	(type Adverse_Reaction)
	(where_restriction
		[ATHENA_GlycemicControl_Class700000]
		[ATHENA_GlycemicControl_Class690000]))

([ATHENA_GlycemicControlAlt_Class4] of  Structured_Query

	(attribute [Drug_Class_Name])
	(label "Drug class name of ACE inhibitor drug usage when there is an absolute contraindication")
	(type Drug_Usage)
	(where_restriction
		[ATHENA_GlycemicControlAlt_Class5]
		[eon2_Class60001]))

([ATHENA_GlycemicControlAlt_Class41409] of  Presence_Criterion

	(domain_term ACE_Inhibitors)
	(entry_type Medication)
	(label "No recommendation blocking ACE")
	(mood Blocked_Add)
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControlAlt_Class41410] of  Presence_Criterion

	(domain_term Angiotensin_II_receptor_blockers)
	(entry_type Medication)
	(label "No recommendation blocking ARB")
	(mood Blocked_Add)
	(presence FALSE)
	(status "active"))

([ATHENA_GlycemicControlAlt_Class5] of  Comparison_Filter

	(attribute [Drug_Class_Name])
	(label "ACEi drug class name")
	(operator eq)
	(value_expression [ACE_Inhibitors]))

([ATHENA_GlycemicControlAlt_Class6] of  Structured_Query

	(attribute [Drug_Class_Name])
	(label "Drug class name of ARB drug usage when there is an absolute contraindication")
	(type Drug_Usage)
	(where_restriction
		[eon2_Class60001]
		[ATHENA_GlycemicControlAlt_Class7]))

([ATHENA_GlycemicControlAlt_Class7] of  Comparison_Filter

	(attribute [Drug_Class_Name])
	(label "ARB drug class name")
	(operator eq)
	(value_expression [Angiotensin_II_receptor_blockers]))

([ATHENA_GlycemicControlAlt_Class8] of  Query_Result_Criterion

	(label "ARB contraindicated by query")
	(presence TRUE)
	(query [ATHENA_GlycemicControlAlt_Class6]))

([bicarb+lt+24+or+22+or+23+past+year] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_DM_GlycemicControl_Dashboard_Class150002])
	(PrettyName "bicarb lt 24 or 22 or 23"))

([bicarb%3C24+in+past+year] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1340000])
	(label "bicarb<24 in past year")
	(PrettyName "bicarbless than 24 in past year"))

([bicarb%3C%3D21] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class330012])
	(PrettyName "bicarb<=21"))

([BMI%3E25] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Instance_70001])
	(PrettyName "PatientChar Overweight (25<BMI<29)"))

([BMI%3E%3D29] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Instance_60016])
	(PrettyName "PatinetChar Morbidly overweight (BMI>=29)"))

([CKD_stage_3_or_4_or_5_or_eGFR_lt_50] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class350004])
	(PrettyName "CKD stage 3/4/5 or eGFR<60"))

([Contraindication_to_ACE_Inhibitor_defined_concept] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControlAlt_Class0])
	(PrettyName "Contraindication to ACE-I"))

([Creatinine+%3E+1.4+and+Female] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [KB_799906_Class5]))

([Creatinine+%3E+1.5+and+Male] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [KB_799906_Class6])
	(PrettyName "PatientChar Creatinine > 1.5 and Male"))

([creatinine_clearance_lt_30_defined_concept] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class140003]))

([DM_care_team] of  Canonical_Terms_Metaclass

	(PrettyName "DM Care Team"))

([Edema] of  Canonical_Terms_Metaclass
)

([eGFR+%3C+30] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1130006])
	(PrettyName "eGFR <30"))

([eGFR+%3C45+and+Saxagliptin+daily+dose%3E2.5] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1070003]))

([eGFR%3C45] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class780001])
	(PrettyName "eGFR<45"))

([eGFR%3C45+most+recent+any+time+frame] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1130011])
	(PrettyName "eGFR<45 most recent any time frame"))

([eGFR%3C60] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1130007])
	(label "eGFR<60")
	(PrettyName "eGFR<60"))

([endocrinologist] of  Canonical_Terms_Metaclass
)

([HbA1c%3C6] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class240009]))

([HbA1c%3C7+or+HbA1c%3E10+past+year] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1160008])
	(label "HbA1c<7 or HbA1c>10 past year")
	(PrettyName "HbA1c<7 or HbA1c>10 past year"))

([HbA1c_GT_9] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Instance_10005]))

([Hypersensitivity+to+Chlorpropamide] of  Canonical_Terms_Metaclass

	(PrettyName "Hypersensitivity to Chlorpropamide"))

([Intermediate_renal_function] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [library_Class110019])
	(PrettyName "Intermediate renal function 30<=eGFR<60 or 1.5<creat<2.5 male or 1.3<creat<2.3 female"))

([K%3E5+and+absence+of+ACE-I] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class350002]))

([K%3E5.5+and+ACE-I+in+last+3+months] of  Diagnostic_Term_Metaclass

	(code "testing version control")
	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class250010]))

([K%3E5.5+and+ARB+in+last+3+months] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class250016]))

([KB_141443_Class82] of  Presence_Query

	(entry_type Note_Entry))

([KB_261203_Class19] of  Numeric_Constant

	(value 8.0))

([KB_261203_Class36] of  Numeric_Constant

	(value 8.0))

([KB_273522_Class0] of  Conditional_Goal

	(criterion_to_achieve [KB_794798_Class0])
	(label "Presence of target HbA1c and HbA1c < target")
	(selection_criterion [KB_273522_Class1]))

([KB_273522_Class1] of  Presence_Criterion

	(domain_term target_HBA1c)
	(entry_type Numeric_Entry)
	(label "presence of target HbA1c")
	(presence TRUE))

([KB_308520_Class1] of  Evaluate_Start_Activity

	(activity_class "Medication")
	(alternatives
		[ATHENA_GlycemicControl_Instance_50004]
		[ATHENA_GlycemicControl_Instance_50026]
		[ATHENA_GlycemicControl_Class60000]
		[ATHENA_GlycemicControl_Class70000])
	(fine-grain_priority 1000)
	(label "Evaluate start hypoglycemic agent")
	(therapeutic_goal [ATHENA_GlycemicControl_Class610454]))

([KB_308520_Class11] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_10000]
		[KB_707783_Class6]
		[KB_308520_Class9])
	(label "Female between 18 and 50 years")
	(operator AND))

([KB_308520_Class13] of  Collateral_Action

	(actions [KB_308520_Class14])
	(mood Authorized))

([KB_308520_Class14] of  Conditional_On_Screen_Message

	(display_location Summary)
	(label "Thiazolidinedions and ovulation warning message")
	(message "Thiazolidinediones may restore ovulation in premenopausal anovulatory females.")
	(message_type Recommendation)
	(rule_in_condition [KB_308520_Class11]))

([KB_308520_Class16] of  N_ary_Criterion

	(criteria
		[ATHENA_DM_Eye_Instance_80028]
		[ATHENA_GlycemicControl_Instance_50003])
	(label "Absence of pharmacologic treatment (insulin or oral hyoglycemic agents)")
	(operator AND))

([KB_308520_Class18] of  Range_Mapping_Entry

	(abstract_value Low_Dose%28high%2Flow%29)
	(lower_limit 100.0)
	(upper_limit 499.0))

([KB_308520_Class19] of  Range_Mapping_Entry

	(abstract_value High_Dose%28high%2Flow%29)
	(lower_limit 500.0)
	(upper_limit 750.0))

([KB_308520_Class2] of  Evaluate_Start_Activity

	(activity_class "Medication")
	(alternatives [ATHENA_GlycemicControl_Instance_50004])
	(fine-grain_priority 1000)
	(label "Evaluate start Biguanide")
	(recommendation_basis [is_first-line_drug_for])
	(therapeutic_goal [ATHENA_GlycemicControl_Class610454]))

([KB_308520_Class3] of  Presence_Criterion

	(domain_term Oral_Hypoglycemic_Agent)
	(entry_type Medication)
	(label "Presence of hypoglycemic agent")
	(mood Authorized)
	(presence TRUE)
	(status "active"))

([KB_308520_Class4] of  Collateral_Action

	(actions
		[KB_308520_Class5]
		[KB_308520_Class6])
	(mood Authorized))

([KB_308520_Class5] of  On_Screen_Message

	(display_location Summary)
	(label "Thiazolidinediones warning about liver lab values")
	(message "Liver function tests and bilirubin should be tested every 2 months for 1 year, then periodically therafter.  If ALT is >3x u.l.n., recheck another level as soon as possible.  If ALT remains >3x the upper limit, discontinue use.")
	(message_type Recommendation))

([KB_308520_Class6] of  Conditional_On_Screen_Message

	(display_location Summary)
	(label "Warning for intravascular iodinated radiocontrast studies")
	(message "Temporarily discontinue metformin use at the time of or prior to intravascular iodinated radiocontrast studies and withhold for 48 hours after the procedure. Reinstitute only after renal function has been reevaluated and found to be normal.")
	(message_type Recommendation)
	(rule_in_condition [ATHENA_GlycemicControl_Class60010]))

([KB_308520_Class8] of  Numeric_Term_Criterion

	(entry_type Numeric_Entry)
	(label "Age>=65")
	(numeric_domain_term Age)
	(operator %3E%3D)
	(value 65.0))

([KB_308520_Class9] of  Numeric_Term_Criterion

	(entry_type Numeric_Entry)
	(label "Age>=18")
	(numeric_domain_term Age)
	(operator %3E%3D)
	(value 18.0))

([KB_331703_Class93] of  Numeric_Constant

	(value 7.0))

([KB_362799_Class0] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_50003]
		[KB_362799_Class1])
	(label "insulin therapy only")
	(operator AND))

([KB_362799_Class1] of  Presence_Criterion

	(domain_term Insulin)
	(entry_type Medication)
	(label "presence of insulin")
	(presence TRUE)
	(status "active"))

([KB_390055_Class0] of  Collateral_Action

	(actions
		[KB_390055_Class1]
		[ATHENA_GlycemicControl_Instance_140154]
		[ATHENA_GlycemicControl_Instance_140145]
		[ATHENA_GlycemicControl_Instance_140151]
		[ATHENA_GlycemicControl_Instance_140152]
		[ATHENA_GlycemicControl_Instance_140153]
		[ATHENA_GlycemicControl_Instance_140158]
		[KB_390055_Class1]
		[ATHENA_GlycemicControl_Instance_140149]
		[ATHENA_GlycemicControl_Instance_140156]
		[ATHENA_GlycemicControl_Instance_140157]
		[ATHENA_GlycemicControl_Instance_140146]
		[ATHENA_GlycemicControl_Instance_140147]
		[ATHENA_GlycemicControl_Instance_140160]
		[ATHENA_GlycemicControl_Instance_140159]
		[ATHENA_GlycemicControl_Instance_140155]
		[ATHENA_GlycemicControl_Instance_140148]
		[ATHENA_GlycemicControl_Instance_140150])
	(mood Recommend_Add))

([KB_390055_Class1] of  On_Screen_Message

	(display_location Summary)
	(label "dose - rec add metformin ER")
	(message "Begin with 500mg daily with the evening meal. Dose may be increased by 500mg per week to a maximum of 2000mg once daily. If glycemic control is not achieved, consider dividing into 2 doses.")
	(message_type Recommendation))

([KB_390055_Class2] of  Start_Activity

	(activity [ATHENA_GlycemicControl_Class60000])
	(description "Add Glipizide")
	(label "Add Glipizide"))

([KB_390055_Class3] of  Evaluate_Start_Activity

	(activity_class "Medication")
	(alternatives [KB_390055_Class4])
	(fine-grain_priority 1000)
	(label "Evaluate start insulin")
	(therapeutic_goal [ATHENA_GlycemicControl_Class610454]))

([KB_390055_Class4] of  Drug_Usage

	(collateral_actions
		[ATHENA_GlycemicControl_Class90049]
		[ATHENA_GlycemicControl_Class490000])
	(Drug_Class_Name Insulin)
	(Drug_Partners_To_Avoid THIAZOLIDINEDIONES)
	(label "Insulin")
	(Relative_Indications DM-Type2))

([KB_390055_Class9] of  Evaluate_Substitution_Activity

	(activity_class "Medication")
	(activity_spec Drug_Usage)
	(activity_spec_key [Drug_Class_Name])
	(activity_to_stop [ATHENA_GlycemicControl_Class780509])
	(alternatives
		[ATHENA_GlycemicControl_Instance_50004]
		[ATHENA_GlycemicControl_Class60000]
		[ATHENA_GlycemicControl_Class70000])
	(label "Evaluate substitution hypoglycemic agent"))

([KB_707783_Class3] of  Consultation_Guideline

	(first_step [KB_707783_Class4])
	(label "On meds")
	(steps
		[KB_707783_Class4]
		[ATHENA_GlycemicControl_Instance_120108])
	(transitions [ATHENA_GlycemicControl_Instance_120109]))

([KB_707783_Class4] of  Consultation_Branch_Step

	(branches
		[ATHENA_GlycemicControl_Class80004]
		[ATHENA_GlycemicControl_Class150020]
		[ATHENA_GlycemicControl_Class150027])
	(label "On meds")
	(selection_method some_of))

([KB_707783_Class5] of  Consultation_Action_Step

	(actions [KB_707783_Class7])
	(label "Elderly -hypoglycemia risk")
	(rule_in [KB_707783_Class6]))

([KB_707783_Class6] of  Numeric_Term_Criterion

	(entry_type Numeric_Entry)
	(label "Age<50")
	(numeric_domain_term Age)
	(operator %3C)
	(value 50.0))

([KB_707783_Class7] of  On_Screen_Message

	(display_location Summary)
	(label "Elderly on meds hypoglycemia risk")
	(message "Elderly patients are at a higher risk for drug-associated hypoglycemia, due to altered metabolism and excretion rates, impaired symptom recognition, and potentially attenuated counter-regulatory responses. Instruct patient and family  to recognize signs and symptoms of hypoglycemia and its management.")
	(message_type Recommendation))

([KB_794798_Class0] of  General_Comparison_Criterion

	(aggregation_operator most_recent)
	(domain_term HbA1C)
	(entry_type Numeric_Entry)
	(label "HbA1c <= target")
	(operator %3C%3D)
	(value [KB_794798_Class1]))

([KB_794798_Class1] of  Structured_Query

	(aggregation_operator most_recent)
	(attribute [value])
	(label "value of HbA1c target")
	(type Numeric_Entry)
	(where_restriction [KB_794798_Class2]))

([KB_794798_Class2] of  Comparison_Filter

	(attribute [domain_term])
	(label "domain_term is target_HbA1C")
	(operator eq)
	(value_expression [KB_794798_Class3]))

([KB_794798_Class3] of  Qualitative_Constant

	(value "target_HBA1c"))

([KB_794798_Class4] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class5])
	(%3ATO [ATHENA_GlycemicControl_Instance_70010]))

([KB_794798_Class5] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class7])
	(%3ATO [ATHENA_GlycemicControl_Instance_70010]))

([KB_794798_Class6] of  Followed_By

	(%3AFROM [ATHENA_GlycemicControl_Class8])
	(%3ATO [ATHENA_GlycemicControl_Instance_70010]))

([KB_799906_Class2] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "Creatinine > 1.5")
	(numeric_domain_term Creatinine)
	(operator %3E%3D)
	(unit "mg/dl")
	(valid_window [ATHENA_DM_Eye_Instance_100007])
	(value 1.5))

([KB_799906_Class3] of  Numeric_Term_Criterion

	(aggregation_operator most_recent)
	(entry_type Numeric_Entry)
	(label "Creatinine > 1.4")
	(numeric_domain_term Creatinine)
	(operator %3E%3D)
	(unit "mg/dl")
	(value 1.4))

([KB_799906_Class4] of  General_Comparison_Criterion

	(aggregation_operator most_recent)
	(domain_term Sex)
	(entry_type Note_Entry)
	(label "Being Male")
	(operator eq)
	(value [Male]))

([KB_799906_Class5] of  N_ary_Criterion

	(criteria
		[ATHENA_GlycemicControl_Instance_10000]
		[KB_799906_Class3])
	(label "Creatinine > 1.4 and Female")
	(operator AND))

([KB_799906_Class6] of  N_ary_Criterion

	(criteria
		[KB_799906_Class2]
		[KB_799906_Class4])
	(label "Creatinine > 1.5 and Male")
	(operator AND))

([KB_857361_Class99] of  Numeric_Constant

	(value 7.0))

([KB_860845_Class121] of  Numeric_Constant

	(value 7.0))

([KB_860845_Class93] of  Numeric_Constant

	(value 7.0))

([KB_891039_Class0] of  PAL_Query

	(case_variable "$patient_id")
	(key_slot [drug_name])
	(label "query for contraindicated drugs")
	(PAL_query [KB_891039_Class1]))

([KB_891039_Class1] of  PAL-QUERY

	(%3APAL-NAME "query for contraindicated drugs")
	(%3APAL-RANGE "(defrange ?current_med :FRAME Medication) \n(defrange ?problem :FRAME Note_Entry) \n(defrange ?med_class :FRAME Drug_Usage) \n(defrange ?contraindication :FRAME Medical_Conditions_Metaclass Absolute_Contraindications) \n(defrange ?derived_contraindication :FRAME Diagnostic_Term_Metaclass)")
	(%3APAL-STATEMENT "(findall ?current_med        \n         (and (or (not (own-slot-not-null mood ?current_med ))           \n                  (is-class (drug_name ?current_med))    \n                  (mood ?current_med Authorized))             \n              (patient_id ?current_med $patient_id)            \n              (exists ?med_class                    \n                      (and (equal-or-subclass-of (coerce-to-class (drug_name ?current_med)) (Drug_Class_Name ?med_class ))                         \n                           (or (exists ?contraindication                                      (and  (Absolute_Contraindications ?med_class ?contraindication)                                           (exists ?problem                                                    (and (patient_id ?problem $patient_id)                                                        (is-class (domain_term ?problem) )                                                        (equal-or-subclass-of  (coerce-to-class (domain_term ?problem))                                                                               ?contraindication)))))                             (exists ?derived_contraindication                                                                 (and (Absolute_Contraindications ?med_class ?derived_contraindication)(is-derivable ?derived_contraindication))))                    ))))"))

([KB_954632_Class196] of  Numeric_Constant

	(value 8.0))

([KB_987250_Class2] of  PAL_Criterion

	(case_variable "$patient_id")
	(label "Presence of contraindication")
	(PAL_constraint [ATHENA_GlycemicControl_Instance_130131]))

([nephrologist] of  Canonical_Terms_Metaclass
)

([new-onset+insulin-requiring+DM] of  Medical_Conditions_Metaclass
)

([Poor+renal+function+and+Abs+Biguanide] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1040002])
	(label "Poor renal function 30 days and Abs Biguanide")
	(PrettyName "Poor renal function and Abs Biguanide"))

([Poor_renal_function] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [library_Class110013])
	(PrettyName "Poor renal function eGFR<30 or creatinine >=2.5 male or creatinine >=2.3 female"))

([Pres+biguanide+and+30%3C%3D3GFR%3C45+past+year] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1220001])
	(PrettyName "Pres biguanide and 30<=3GFR<45 past year"))

([Pres+Biguanide+and+eGFR%3C30+past+year] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class950000])
	(PrettyName "Pres Biguanide and eGFR<30 past year"))

([Pres+dialysis] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1160004])
	(PrettyName "Pres dialysis"))

([Pres+Emp+and+eGFR%3C45+past+year] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1150001])
	(label "Pres Emp and eGFR<45 past year")
	(PrettyName "Pres Emp and eGFR<45 past year"))

([Pres+glyb+and+eGFR%3C30+past+year] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1150003])
	(label "Pres glyb and eGFR<30 past year")
	(PrettyName "Pres glyb and eGFR<30 past year"))

([Pres+of+Biguanide+and+45%3C%3DeGFR%3C60+past+year] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class1240003])
	(PrettyName "Pres of Biguanide and 45<=eGFR<60 past year"))

([Presence+of+ACE+Inhibitor+and+AA] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class370005]))

([Presence_of_Gemfibrozil] of  Diagnostic_Term_Metaclass

	(controllable TRUE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class340009])
	(PrettyName "Presence of gemfibrozil"))

([Presence_of_NPH_insulin] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class340011])
	(PrettyName "Presence of NPH insulin"))

([SBP%3C110] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class610000]))

([Serum+creatinine+%3E%3D2] of  Diagnostic_Term_Metaclass

	(controllable FALSE)
	(DiagnosticCriteria [ATHENA_GlycemicControl_Class90033])
	(PrettyName "Serum creatinine >=2mg/dl"))

([Weight+gain] of  Canonical_Terms_Metaclass
)
